{"version":3,"sources":["webpack:///./node_modules/@patternfly/react-core/dist/js/components/Text/TextList.js","webpack:///./node_modules/@patternfly/react-core/dist/js/components/Text/TextListItem.js","webpack:///./node_modules/@patternfly/react-icons/dist/js/icons/info-icon.js","webpack:///./src/smart-components/order/order-detail/approval-request.js"],"names":["Object","defineProperty","exports","value","tslib_1","React","__importStar","react_styles_1","TextListVariants","TextList","_a","children","className","component","ul","props","__rest","Component","createElement","assign","css","displayName","TextListItemVariants","TextListItem","li","__esModule","InfoIconConfig","name","height","width","svgPath","yOffset","xOffset","transform","InfoIcon","createIcon","delay","ms","Promise","resolve","setTimeout","checkRequest","fetchRequests","a","data","length","isEmpty","approvalRequest","ApprovalRequests","formatMessage","useIntl","dispatch","useDispatch","useSelector","orderReducer","orderDetail","order","orderItem","useEffect","state","id","fetchApprovalRequests","direction","default","grow","size","headingLevel","ordersMessages","noApprovalRequests","creatingApprovalRequest","TextVariants","h2","approvalTitle","map","request","key","dl","dt","href","document","baseURI","approval_request_ref","approvalDetail","approvalCreated","dd","date","created_at","variant","statesMessages","title","toLowerCase","reason","approvalReason","request_completed_at","approvalCompleted"],"mappings":"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","file":"js/approval-request~31ecd969.6ee45b4116118bd5a12b.js","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst tslib_1 = require(\"tslib\");\nconst React = tslib_1.__importStar(require(\"react\"));\nconst react_styles_1 = require(\"@patternfly/react-styles\");\nvar TextListVariants;\n(function (TextListVariants) {\n    TextListVariants[\"ul\"] = \"ul\";\n    TextListVariants[\"ol\"] = \"ol\";\n    TextListVariants[\"dl\"] = \"dl\";\n})(TextListVariants = exports.TextListVariants || (exports.TextListVariants = {}));\nexports.TextList = (_a) => {\n    var { children = null, className = '', component = TextListVariants.ul } = _a, props = tslib_1.__rest(_a, [\"children\", \"className\", \"component\"]);\n    const Component = component;\n    return (React.createElement(Component, Object.assign({}, props, { \"data-pf-content\": true, className: react_styles_1.css(className) }), children));\n};\nexports.TextList.displayName = 'TextList';\n//# sourceMappingURL=TextList.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst tslib_1 = require(\"tslib\");\nconst React = tslib_1.__importStar(require(\"react\"));\nconst react_styles_1 = require(\"@patternfly/react-styles\");\nvar TextListItemVariants;\n(function (TextListItemVariants) {\n    TextListItemVariants[\"li\"] = \"li\";\n    TextListItemVariants[\"dt\"] = \"dt\";\n    TextListItemVariants[\"dd\"] = \"dd\";\n})(TextListItemVariants = exports.TextListItemVariants || (exports.TextListItemVariants = {}));\nexports.TextListItem = (_a) => {\n    var { children = null, className = '', component = TextListItemVariants.li } = _a, props = tslib_1.__rest(_a, [\"children\", \"className\", \"component\"]);\n    const Component = component;\n    return (React.createElement(Component, Object.assign({}, props, { \"data-pf-content\": true, className: react_styles_1.css(className) }), children));\n};\nexports.TextListItem.displayName = 'TextListItem';\n//# sourceMappingURL=TextListItem.js.map","\"use strict\"\nexports.__esModule = true;\nexports.InfoIconConfig = {\n  name: 'InfoIcon',\n  height: 512,\n  width: 192,\n  svgPath: 'M20 424.229h20V279.771H20c-11.046 0-20-8.954-20-20V212c0-11.046 8.954-20 20-20h112c11.046 0 20 8.954 20 20v212.229h20c11.046 0 20 8.954 20 20V492c0 11.046-8.954 20-20 20H20c-11.046 0-20-8.954-20-20v-47.771c0-11.046 8.954-20 20-20zM96 0C56.235 0 24 32.235 24 72s32.235 72 72 72 72-32.235 72-72S135.764 0 96 0z',\n  yOffset: 0,\n  xOffset: 0,\n  transform: ''\n};\nexports.InfoIcon = require('../createIcon').createIcon(exports.InfoIconConfig);\nexports[\"default\"] = exports.InfoIcon;","import React, { Fragment, useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport {\n  Bullseye,\n  Flex,\n  Spinner,\n  TextContent,\n  Text,\n  TextVariants,\n  TextList,\n  TextListVariants,\n  TextListItem,\n  TextListItemVariants,\n  Title\n} from '@patternfly/react-core';\nimport { DateFormat } from '@redhat-cloud-services/frontend-components/components/cjs/DateFormat';\nimport InfoIcon from '@patternfly/react-icons/dist/js/icons/info-icon';\nimport { fetchApprovalRequests } from '../../../redux/actions/order-actions';\nimport { useIntl } from 'react-intl';\nimport ordersMessages from '../../../messages/orders.messages';\nimport statesMessages from '../../../messages/states.messages';\n\nconst delay = (ms) => new Promise((resolve) => setTimeout(resolve, ms));\n\nconst checkRequest = async (fetchRequests) => {\n  // eslint-disable-next-line no-constant-condition\n  while (true) {\n    const result = await fetchRequests();\n    if (result.data.length > 0) {\n      return 'Finished';\n    }\n\n    await delay(3000);\n  }\n};\n\nconst isEmpty = (approvalRequest) =>\n  !approvalRequest ||\n  !approvalRequest.data ||\n  approvalRequest.data.length === 0;\n\nconst ApprovalRequests = () => {\n  const { formatMessage } = useIntl();\n  const dispatch = useDispatch();\n  const { order, approvalRequest, orderItem } = useSelector(\n    ({ orderReducer: { orderDetail } }) => orderDetail\n  );\n\n  useEffect(() => {\n    if (order.state !== 'Failed' && orderItem?.id && isEmpty(approvalRequest)) {\n      checkRequest(() => dispatch(fetchApprovalRequests(orderItem.id)));\n    }\n  }, []);\n\n  if (order.state === 'Failed' && isEmpty(approvalRequest)) {\n    return (\n      <Bullseye id=\"no-approval-requests\">\n        <Flex direction={{ default: 'column' }} grow={{ default: 'grow' }}>\n          <Bullseye>\n            <InfoIcon size=\"xl\" />\n          </Bullseye>\n          <Bullseye>\n            <Title headingLevel=\"h1\" size=\"2xl\">\n              {formatMessage(ordersMessages.noApprovalRequests)}\n            </Title>\n          </Bullseye>\n        </Flex>\n      </Bullseye>\n    );\n  }\n\n  return (\n    <TextContent>\n      {isEmpty(approvalRequest) ? (\n        <Bullseye>\n          <Flex direction={{ default: 'column' }} grow={{ default: 'grow' }}>\n            <Bullseye id=\"creating-approval-request\">\n              <Title headingLevel=\"h1\" size=\"xl\">\n                {formatMessage(ordersMessages.creatingApprovalRequest)}\n              </Title>\n            </Bullseye>\n            <Bullseye>\n              <Spinner size=\"xl\" />\n            </Bullseye>\n          </Flex>\n        </Bullseye>\n      ) : (\n        <Fragment>\n          <Text component={TextVariants.h2}>\n            {formatMessage(ordersMessages.approvalTitle)}\n          </Text>\n          {approvalRequest.data.map((request) => (\n            <TextList key={request.id} component={TextListVariants.dl}>\n              <TextListItem component={TextListItemVariants.dt}>\n                <a\n                  href={`${document.baseURI}ansible/catalog/approval/request?request=${request.approval_request_ref}`}\n                >\n                  {formatMessage(ordersMessages.approvalDetail)}\n                </a>\n              </TextListItem>\n              <TextListItem component={TextListItemVariants.dt}>\n                {formatMessage(ordersMessages.approvalCreated)}\n              </TextListItem>\n              <TextListItem component={TextListItemVariants.dd}>\n                <DateFormat date={order.created_at} variant=\"relative\" />\n              </TextListItem>\n              <TextListItem component={TextListItemVariants.dt}>\n                {formatMessage(statesMessages.title)}\n              </TextListItem>\n              <TextListItem component={TextListItemVariants.dd}>\n                {formatMessage(statesMessages[request.state.toLowerCase()])}\n              </TextListItem>\n              {request.reason && (\n                <Fragment>\n                  <TextListItem component={TextListItemVariants.dt}>\n                    {formatMessage(ordersMessages.approvalReason)}\n                  </TextListItem>\n                  <TextListItem component={TextListItemVariants.dd}>\n                    {request.reason}\n                  </TextListItem>\n                </Fragment>\n              )}\n              {request.request_completed_at && (\n                <Fragment>\n                  <TextListItem component={TextListItemVariants.dt}>\n                    {formatMessage(ordersMessages.approvalCompleted)}\n                  </TextListItem>\n                  <TextListItem component={TextListItemVariants.dd}>\n                    <DateFormat\n                      date={request.request_completed_at}\n                      variant=\"relative\"\n                    />\n                  </TextListItem>\n                </Fragment>\n              )}\n            </TextList>\n          ))}\n        </Fragment>\n      )}\n    </TextContent>\n  );\n};\n\nexport default ApprovalRequests;\n"],"sourceRoot":""}