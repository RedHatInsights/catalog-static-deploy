{"version":3,"sources":["webpack:///./node_modules/@babel/runtime/helpers/extends.js","webpack:///./node_modules/awesome-imperative-promise/dist/index.es.js","webpack:///./node_modules/awesome-debounce-promise/dist/index.es.js","webpack:///./node_modules/awesome-only-resolves-last-promise/dist/index.es.js","webpack:///./src/utilities/async-form-validator.js","webpack:///./node_modules/debounce-promise/dist/index.js","webpack:///./node_modules/@babel/runtime/helpers/typeof.js","webpack:///./src/utilities/use-enhanced-history.js","webpack:///./node_modules/react-intl/lib/components/message.js","webpack:///./src/forms/edit-workflow_form.schema.js","webpack:///./src/helpers/approval/approval-helper.js","webpack:///./src/smart-components/common/edit-approval-workflow.js","webpack:///./src/redux/actions/approval-actions.js"],"names":["_extends","module","exports","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","createImperativePromise","promiseArg","resolve","reject","wrappedPromise","Promise","_resolve","_reject","then","val","error","promise","value","reason","cancel","__assign","t","s","n","p","DefaultOptions","_args","_i","onlyResolvesLast","DebounceCache","config","debounceSingleton","debounceCache","_createDebouncedFunction","asyncFunction","cancelPrevious","debouncedFunc","func","wait","options","args","initialPromise","_a","getDebouncedFunction","finalOptions","debouncedFn","debounceTime","awesomeDebouncePromise","getWait","defer","deferred","fn","undefined","lastCallAt","timer","pendingArgs","currentWait","currentTime","Date","getTime","isCold","_len","Array","_key","leading","accumulate","result","concat","clearTimeout","push","setTimeout","flush","bind","argsIndex","results","thisDeferred","_typeof","obj","Symbol","iterator","constructor","removeSearchQuery","split","search","useEnhancedHistory","removeSearch","keepHash","history","useHistory","internalTarget","location","hash","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","shallowEquals","defaultFormatMessage","descriptor","values","locale","FormattedMessage","nextProps","props","otherProps","nextValues","nextOtherProps","Consumer","intl","defaultMessage","formatMessage","textComponent","Text","id","description","children","tagName","Component","nodes","isArray","displayName","defaultProps","editWorkflowSchema","loadWorkflows","fields","component","componentTypes","SELECT","name","label","loadOptions","asyncFormValidator","multi","isSearchable","isClearable","loadWorkflowOptions","filterValue","initialLookup","initialLookupQuery","map","workflow","join","getAxiosInstance","get","APPROVAL_API_BASE","data","updateWorkflows","unlinkIds","linkIds","resourceObject","unlinkPromises","wf","getWorkflowApi","unlinkWorkflow","linkPromises","linkWorkflow","all","listWorkflowsForObject","pagination","limit","defaultSettings","offset","filter","objectQuery","appName","objectType","objectId","paginationQuery","filterQuery","initialState","isFetching","approvalState","state","action","type","payload","EditApprovalWorkflow","removeQuery","querySelector","pushParam","objectName","useReducer","stateDispatch","useSelector","approvalReducer","resolvedWorkflows","meta","dispatch","useDispatch","useQuery","query","useEffect","ASYNC_ACTIONS","RESOLVE_WORKFLOWS","ApprovalHelper","APP_NAME","Modal","title","isOpen","onClose","variant","Stack","hasGutter","StackItem","TextContent","initialValues","selectedWorkflows","onSubmit","formData","formApi","initialWorkflows","getState","newWorkflows","toUnlinkIds","toLinkIds","toUnlinkWorkflows","findIndex","w","toLinkWorkflows","object_type","app_name","object_id","UPDATE_WORKFLOWS","addNotification","dismissable","count","onCancel","schema","editApprovalWorkflowSchema","formContainer","buttonsLabels","submitLabel","propTypes","PropTypes","oneOfType","string","shape","pathname","isRequired","bool","oneOf"],"mappings":"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","file":"js/edit-approval-workflow~31ecd969.85cad6698ed423079185.js","sourcesContent":["function _extends() {\n  module.exports = _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nmodule.exports = _extends;","function createImperativePromise(promiseArg) {\r\n    var resolve = null;\r\n    var reject = null;\r\n    var wrappedPromise = new Promise(function (_resolve, _reject) {\r\n        resolve = _resolve;\r\n        reject = _reject;\r\n    });\r\n    promiseArg && promiseArg.then(function (val) {\r\n        resolve && resolve(val);\r\n    }, function (error) {\r\n        reject && reject(error);\r\n    });\r\n    return {\r\n        promise: wrappedPromise,\r\n        resolve: function (value) {\r\n            resolve && resolve(value);\r\n        },\r\n        reject: function (reason) {\r\n            reject && reject(reason);\r\n        },\r\n        cancel: function () {\r\n            resolve = null;\r\n            reject = null;\r\n        }\r\n    };\r\n}\n\nexport { createImperativePromise };\n//# sourceMappingURL=index.es.js.map\n","import DebouncePromise from 'debounce-promise';\nimport { onlyResolvesLast } from 'awesome-only-resolves-last-promise';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\n\nvar DefaultOptions = {\r\n    // One distinct debounced function is created per key and added to an internal cache\r\n    // By default, the key is null, which means that all the calls\r\n    // will share the same debounced function\r\n    key: function () {\r\n        var _args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            _args[_i] = arguments[_i];\r\n        }\r\n        return null;\r\n    },\r\n    // By default, a debounced function will only resolve\r\n    // the last promise it returned\r\n    // Former calls will stay unresolved, so that you don't have\r\n    // to handle concurrency issues in your code\r\n    // Setting this to false means all returned promises will resolve to the last result\r\n    onlyResolvesLast: true,\r\n};\r\n// We create a debouncing function cache, because when wrapping the original function,\r\n// we may actually want to route the function call to different debounced functions depending function paameters\r\nvar DebounceCache = /** @class */ (function () {\r\n    function DebounceCache(config) {\r\n        this.config = config;\r\n        this.debounceSingleton = null;\r\n        this.debounceCache = {}; // when key feature is used\r\n    }\r\n    DebounceCache.prototype._createDebouncedFunction = function () {\r\n        var debouncedFunc = DebouncePromise(this.config.func, this.config.wait, this.config.options); // TODO TS\r\n        if (this.config.options.onlyResolvesLast) {\r\n            debouncedFunc = onlyResolvesLast(debouncedFunc);\r\n        }\r\n        return {\r\n            func: debouncedFunc,\r\n        };\r\n    };\r\n    DebounceCache.prototype.getDebouncedFunction = function (args) {\r\n        var _a;\r\n        var key = (_a = this.config.options).key.apply(_a, args);\r\n        if (key === null || typeof key === 'undefined') {\r\n            if (!this.debounceSingleton) {\r\n                this.debounceSingleton = this._createDebouncedFunction();\r\n            }\r\n            return this.debounceSingleton;\r\n        }\r\n        else {\r\n            if (!this.debounceCache[key]) {\r\n                this.debounceCache[key] = this._createDebouncedFunction();\r\n            }\r\n            return this.debounceCache[key];\r\n        }\r\n    };\r\n    return DebounceCache;\r\n}());\r\nfunction AwesomeDebouncePromise(func, wait, options) {\r\n    var finalOptions = __assign({}, DefaultOptions, options);\r\n    var debounceCache = new DebounceCache({\r\n        func: func,\r\n        wait: wait,\r\n        options: finalOptions,\r\n    });\r\n    var AwesomeDebouncePromiseWrapper = (function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        var debouncedFn = debounceCache.getDebouncedFunction(args).func;\r\n        return debouncedFn.apply(void 0, args);\r\n    }); // TODO fix TS\r\n    /*\r\n    AwesomeDebouncePromiseWrapper.cancel = (key?: string) => {\r\n  \n    };\r\n    */\r\n    return AwesomeDebouncePromiseWrapper;\r\n}\n\nexport default AwesomeDebouncePromise;\n//# sourceMappingURL=index.es.js.map\n","import { createImperativePromise } from 'awesome-imperative-promise';\n\n// see https://stackoverflow.com/a/54825370/82609\r\nfunction onlyResolvesLast(asyncFunction) {\r\n    var cancelPrevious = null;\r\n    var wrappedFunction = function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        cancelPrevious && cancelPrevious();\r\n        var initialPromise = asyncFunction.apply(void 0, args);\r\n        var _a = createImperativePromise(initialPromise), promise = _a.promise, cancel = _a.cancel;\r\n        cancelPrevious = cancel;\r\n        return promise;\r\n    };\r\n    return wrappedFunction; // TODO fix TS\r\n}\n\nexport { onlyResolvesLast };\n//# sourceMappingURL=index.es.js.map\n","import awesomeDebouncePromise from 'awesome-debounce-promise';\n\nexport default (\n  asyncFunction,\n  debounceTime = 250,\n  options = { onlyResolvesLast: false }\n) => awesomeDebouncePromise(asyncFunction, debounceTime, options);\n","'use strict';\n\n/* global setTimeout, clearTimeout */\n\nmodule.exports = function debounce(fn) {\n  var wait = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n  var lastCallAt = void 0;\n  var deferred = void 0;\n  var timer = void 0;\n  var pendingArgs = [];\n  return function debounced() {\n    var currentWait = getWait(wait);\n    var currentTime = new Date().getTime();\n\n    var isCold = !lastCallAt || currentTime - lastCallAt > currentWait;\n\n    lastCallAt = currentTime;\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    if (isCold && options.leading) {\n      return options.accumulate ? Promise.resolve(fn.call(this, [args])).then(function (result) {\n        return result[0];\n      }) : Promise.resolve(fn.call.apply(fn, [this].concat(args)));\n    }\n\n    if (deferred) {\n      clearTimeout(timer);\n    } else {\n      deferred = defer();\n    }\n\n    pendingArgs.push(args);\n    timer = setTimeout(flush.bind(this), currentWait);\n\n    if (options.accumulate) {\n      var argsIndex = pendingArgs.length - 1;\n      return deferred.promise.then(function (results) {\n        return results[argsIndex];\n      });\n    }\n\n    return deferred.promise;\n  };\n\n  function flush() {\n    var thisDeferred = deferred;\n    clearTimeout(timer);\n\n    Promise.resolve(options.accumulate ? fn.call(this, pendingArgs) : fn.apply(this, pendingArgs[pendingArgs.length - 1])).then(thisDeferred.resolve, thisDeferred.reject);\n\n    pendingArgs = [];\n    deferred = null;\n  }\n};\n\nfunction getWait(wait) {\n  return typeof wait === 'function' ? wait() : wait;\n}\n\nfunction defer() {\n  var deferred = {};\n  deferred.promise = new Promise(function (resolve, reject) {\n    deferred.resolve = resolve;\n    deferred.reject = reject;\n  });\n  return deferred;\n}\n//# sourceMappingURL=index.js.map","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;","import { useHistory } from 'react-router-dom';\n\nconst removeSearchQuery = (target) => {\n  if (typeof target === 'string') {\n    return target.split('?')[0];\n  }\n\n  if (typeof target === 'object') {\n    return {\n      ...target,\n      search: undefined\n    };\n  }\n\n  return target;\n};\n\n/**\n * Wrapper around useHistory hook which adds aditional settings to standard history methods\n * @param {Boolean} removeSearch if true, using history navigation methods will remove search string from path\n * @param {Boolean} keepHash if true, using history navigation methods will not remove hash from URL\n */\nconst useEnhancedHistory = ({ removeSearch, keepHash } = {}) => {\n  const history = useHistory();\n  return {\n    ...history,\n    push: (target) => {\n      let internalTarget = target;\n      if (keepHash && history.location.hash.length > 0) {\n        internalTarget =\n          typeof internalTarget === 'object'\n            ? { ...internalTarget, hash: history.location.hash }\n            : `${internalTarget}${history.location.hash}`;\n      }\n\n      if (removeSearch) {\n        return history.push(removeSearchQuery(internalTarget));\n      }\n\n      return history.push(internalTarget);\n    }\n  };\n};\n\nexport default useEnhancedHistory;\n","/*\n * Copyright 2015, Yahoo Inc.\n * Copyrights licensed under the New BSD License.\n * See the accompanying LICENSE file for terms.\n */\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport * as React from 'react';\nimport { Context } from './injectIntl';\nimport { formatMessage } from '../formatters/message';\nimport { invariantIntlContext, DEFAULT_INTL_CONFIG, createFormatters, } from '../utils';\nimport * as shallowEquals_ from 'shallow-equal/objects';\nconst shallowEquals = shallowEquals_.default || shallowEquals_;\nconst defaultFormatMessage = (descriptor, values) => {\n    if (process.env.NODE_ENV !== 'production') {\n        console.error('[React Intl] Could not find required `intl` object. <IntlProvider> needs to exist in the component ancestry. Using default message as fallback.');\n    }\n    return formatMessage(Object.assign(Object.assign({}, DEFAULT_INTL_CONFIG), { locale: 'en' }), createFormatters(), descriptor, values);\n};\nclass FormattedMessage extends React.Component {\n    shouldComponentUpdate(nextProps) {\n        const _a = this.props, { values } = _a, otherProps = __rest(_a, [\"values\"]);\n        const { values: nextValues } = nextProps, nextOtherProps = __rest(nextProps, [\"values\"]);\n        return (!shallowEquals(nextValues, values) ||\n            !shallowEquals(otherProps, nextOtherProps));\n    }\n    render() {\n        return (React.createElement(Context.Consumer, null, (intl) => {\n            if (!this.props.defaultMessage) {\n                invariantIntlContext(intl);\n            }\n            const { formatMessage = defaultFormatMessage, textComponent: Text = React.Fragment, } = intl || {};\n            const { id, description, defaultMessage, values, children, tagName: Component = Text, } = this.props;\n            const descriptor = { id, description, defaultMessage };\n            let nodes = formatMessage(descriptor, values);\n            if (!Array.isArray(nodes)) {\n                nodes = [nodes];\n            }\n            if (typeof children === 'function') {\n                return children(...nodes);\n            }\n            if (Component) {\n                // Needs to use `createElement()` instead of JSX, otherwise React will\n                // warn about a missing `key` prop with rich-text message formatting.\n                return React.createElement(Component, null, ...nodes);\n            }\n            return nodes;\n        }));\n    }\n}\nFormattedMessage.displayName = 'FormattedMessage';\nFormattedMessage.defaultProps = {\n    values: {},\n};\nexport default FormattedMessage;\n","import componentTypes from '@data-driven-forms/react-form-renderer/dist/cjs/component-types';\nimport asyncFormValidator from '../utilities/async-form-validator';\n\nconst editWorkflowSchema = (loadWorkflows) => ({\n  fields: [\n    {\n      component: componentTypes.SELECT,\n      name: 'selectedWorkflows',\n      label: '',\n      loadOptions: asyncFormValidator(loadWorkflows),\n      multi: true,\n      isSearchable: true,\n      isClearable: true\n    }\n  ]\n});\n\nexport default editWorkflowSchema;\n","import { getWorkflowApi, getAxiosInstance } from '../shared/user-login';\nimport { APPROVAL_API_BASE } from '../../utilities/constants';\nimport { defaultSettings } from '../shared/pagination';\n\nexport const getApprovalWorkflows = () => getWorkflowApi().listWorkflows();\n\nexport const loadWorkflowOptions = (filterValue = '', initialLookup = []) => {\n  const initialLookupQuery = initialLookup\n    .map((workflow) => `filter[id][]=${workflow}`)\n    .join('&');\n\n  return getAxiosInstance()\n    .get(\n      `${APPROVAL_API_BASE}/workflows?filter[name][contains]=${filterValue}&${initialLookupQuery ||\n        ''}`\n    )\n    .then(({ data }) =>\n      data.map(({ id, name }) => ({ label: name, value: id }))\n    );\n};\n\nexport const updateWorkflows = (unlinkIds, linkIds, resourceObject) => {\n  const unlinkPromises = unlinkIds\n    ? unlinkIds.map((wf) => getWorkflowApi().unlinkWorkflow(wf, resourceObject))\n    : [];\n  const linkPromises = linkIds\n    ? linkIds.map((wf) => getWorkflowApi().linkWorkflow(wf, resourceObject))\n    : [];\n  return Promise.all([...unlinkPromises, ...linkPromises]);\n};\n\nexport const listWorkflowsForObject = (\n  resourceObject,\n  pagination = { limit: defaultSettings.limit, offset: defaultSettings.offset },\n  filter = ''\n) => {\n  const objectQuery = `app_name=${resourceObject.appName}&object_type=${resourceObject.objectType}&object_id=${resourceObject.objectId}`;\n  const paginationQuery = `&limit=${pagination.limit}&offset=${pagination.offset}`;\n  const filterQuery = `&filter[name][contains]=${filter}`;\n  return getAxiosInstance().get(\n    `${APPROVAL_API_BASE}/workflows?${objectQuery}${filterQuery}${paginationQuery}`\n  );\n};\n","import React, { useEffect, useReducer } from 'react';\nimport PropTypes from 'prop-types';\nimport { useDispatch, useSelector } from 'react-redux';\nimport {\n  Modal,\n  TextContent,\n  Text,\n  Stack,\n  StackItem\n} from '@patternfly/react-core';\nimport FormRenderer from '../common/form-renderer';\nimport editApprovalWorkflowSchema from '../../forms/edit-workflow_form.schema';\nimport {\n  listWorkflowsForObject,\n  updateWorkflows\n} from '../../redux/actions/approval-actions';\nimport { APP_NAME } from '../../utilities/constants';\nimport { loadWorkflowOptions } from '../../helpers/approval/approval-helper';\nimport { WorkflowLoader } from '../../presentational-components/shared/loader-placeholders';\nimport useQuery from '../../utilities/use-query';\nimport useEnhancedHistory from '../../utilities/use-enhanced-history';\n\nconst initialState = {\n  isFetching: true\n};\n\nconst approvalState = (state, action) => {\n  switch (action.type) {\n    case 'setFetching':\n      return { ...state, isFetching: action.payload };\n    default:\n      return state;\n  }\n};\n\nconst EditApprovalWorkflow = ({\n  objectType,\n  removeQuery,\n  keepHash,\n  querySelector,\n  pushParam,\n  objectName = () => objectType\n}) => {\n  const [{ isFetching }, stateDispatch] = useReducer(\n    approvalState,\n    initialState\n  );\n  const { data, meta } = useSelector(\n    ({ approvalReducer: { resolvedWorkflows } }) => resolvedWorkflows\n  );\n  const dispatch = useDispatch();\n  const history = useEnhancedHistory({ removeQuery, keepHash });\n  const [query] = useQuery([querySelector]);\n\n  useEffect(() => {\n    dispatch(\n      listWorkflowsForObject(\n        {\n          objectType,\n          appName: APP_NAME[objectType],\n          objectId: query[querySelector]\n        },\n        meta\n      )\n    ).then(() => stateDispatch({ type: 'setFetching', payload: false }));\n  }, []);\n\n  const onSubmit = (formData, formApi) => {\n    const initialWorkflows =\n      formApi.getState().initialValues.selectedWorkflows || [];\n    const newWorkflows = formData.selectedWorkflows || [];\n\n    history.push(pushParam);\n    const toUnlinkWorkflows = initialWorkflows.filter(\n      (wf) => newWorkflows.findIndex((w) => w === wf) < 0\n    );\n    const toLinkWorkflows = newWorkflows.filter(\n      (wf) => initialWorkflows.findIndex((w) => w === wf) < 0\n    );\n\n    if (toUnlinkWorkflows.length > 0 || toLinkWorkflows.length > 0) {\n      dispatch(\n        updateWorkflows(toUnlinkWorkflows, toLinkWorkflows, {\n          object_type: objectType,\n          app_name: APP_NAME[objectType],\n          object_id: query[querySelector]\n        })\n      );\n    }\n  };\n\n  return (\n    <Modal\n      title=\"Set approval process\"\n      isOpen\n      onClose={() => history.push(pushParam)}\n      variant=\"small\"\n    >\n      {isFetching && <WorkflowLoader />}\n      {!isFetching && (\n        <Stack hasGutter>\n          <StackItem>\n            <TextContent>\n              <Text>\n                Select approval processes for{' '}\n                <strong>{objectName(query[querySelector])}</strong>\n              </Text>\n            </TextContent>\n          </StackItem>\n          <StackItem>\n            <FormRenderer\n              initialValues={{\n                selectedWorkflows: data ? data.map((wf) => wf.id) : undefined\n              }}\n              onSubmit={onSubmit}\n              onCancel={() => history.push(pushParam)}\n              schema={editApprovalWorkflowSchema(loadWorkflowOptions)}\n              formContainer=\"modal\"\n              buttonsLabels={{ submitLabel: 'Save' }}\n            />\n          </StackItem>\n        </Stack>\n      )}\n    </Modal>\n  );\n};\n\nEditApprovalWorkflow.propTypes = {\n  pushParam: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.shape({\n      pathname: PropTypes.string.isRequired,\n      search: PropTypes.string\n    })\n  ]).isRequired,\n  objectType: PropTypes.string.isRequired,\n  objectName: PropTypes.func,\n  removeQuery: PropTypes.bool,\n  querySelector: PropTypes.oneOf([\n    'portfolio',\n    'platform',\n    'inventory',\n    'portfolio-item'\n  ]).isRequired,\n  keepHash: PropTypes.bool\n};\n\nEditApprovalWorkflow.defaultProps = {\n  keepHash: false\n};\n\nexport default EditApprovalWorkflow;\n","import React, { Fragment } from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport { ASYNC_ACTIONS } from '../action-types/approval-action-types';\nimport * as ApprovalHelper from '../../helpers/approval/approval-helper';\nimport { defaultSettings } from '../../helpers/shared/pagination';\nimport { addNotification } from '@redhat-cloud-services/frontend-components-notifications/cjs/actions';\n\nexport const fetchWorkflows = () => ({\n  type: ASYNC_ACTIONS.FETCH_WORKFLOWS,\n  payload: ApprovalHelper.getApprovalWorkflows().then(({ data }) => [\n    ...data.map(({ id, name }) => ({ value: id, label: name }))\n  ])\n});\n\nexport const updateWorkflows = (toUnlinkIds, toLinkIds, resourceObject) => (\n  dispatch\n) =>\n  dispatch({\n    type: ASYNC_ACTIONS.UPDATE_WORKFLOWS,\n    payload: ApprovalHelper.updateWorkflows(\n      toUnlinkIds,\n      toLinkIds,\n      resourceObject\n    ).then(() =>\n      dispatch(\n        addNotification({\n          variant: 'success',\n          title: 'Success updating approval process',\n          dismissable: true,\n          description: (\n            <Fragment>\n              {toUnlinkIds.length > 0 ? (\n                <FormattedMessage\n                  id=\"workflows.update_workflows\"\n                  defaultMessage={`{count, number} {count, plural, one {approval process was}\n                    other {approval processes were}} unlinked successfully. `}\n                  values={{ count: toUnlinkIds.length }}\n                />\n              ) : (\n                ''\n              )}\n              {toLinkIds.length > 0 ? (\n                <FormattedMessage\n                  id=\"workflows.update_workflows\"\n                  defaultMessage={`{count, number} {count, plural, one {approval process was}\n                    other {approval processes were}} linked successfully.`}\n                  values={{ count: toLinkIds.length }}\n                />\n              ) : (\n                ''\n              )}\n            </Fragment>\n          )\n        })\n      )\n    )\n  });\n\nexport const listWorkflowsForObject = (\n  resourceObject,\n  meta = { limit: defaultSettings.limit, offset: defaultSettings.offset },\n  filter = ''\n) => ({\n  type: ASYNC_ACTIONS.RESOLVE_WORKFLOWS,\n  payload: ApprovalHelper.listWorkflowsForObject(resourceObject, meta, filter)\n});\n"],"sourceRoot":""}