{"version":3,"sources":["webpack:///./src/utilities/async-form-validator.js","webpack:///./src/helpers/platform/platform-helper.js","webpack:///./src/redux/actions/platform-actions.js","webpack:///./src/helpers/shared/breadcrumbs-creators.js","webpack:///./src/redux/actions/breadcrumbs-actions.js","webpack:///./src/utilities/use-breadcrumbs.js","webpack:///./src/utilities/use-is-mounted.js","webpack:///./src/smart-components/portfolio/portfolio.js","webpack:///./src/helpers/shared/redux-mutators.js"],"names":["asyncFunction","debounceTime","options","onlyResolvesLast","awesomeDebouncePromise","axiosInstance","getAxiosInstance","graphqlInstance","getGraphqlInstance","getPlatforms","post","SOURCES_API_BASE","query","then","data","application_types","sources","getPlatform","platformId","get","getPlatformItems","filter","filterQuery","TOPOLOGICAL_INVENTORY_API_BASE","limit","offset","getPlatformInventories","defaultSettings","getServiceOffering","serviceOfferingId","sourceId","Promise","all","source","source_type_id","icon_url","service","fetchPlatforms","dispatch","type","ActionTypes","PlatformHelper","payload","error","fetchPlatformItems","meta","fetchSelectedPlatform","id","fetchPlatformInventories","fetchServiceOffering","ENTITIES_EXTRA_PARAMS","PORTFOLIOS_ROUTE","FRAGMENT_TITLE","PORTFOLIO_ROUTE","getState","portfolioReducer","selectedPortfolio","name","PORTFOLIO_ITEM_ROUTE","portfolioItem","EDIT_SURVEY_ROUTE","ADD_PRODUCTS_ROUTE","PLATFORM_ROUTE","platformReducer","selectedPlatform","PLATFORM_SERVICE_OFFERINGS_ROUTE","serviceOffering","ORDER_ROUTE","orderReducer","orderDetail","order","FRAGMENT_PREFIX","pathname","title","searchParams","PLATFORMS_ROUTE","ORDERS_ROUTE","createBreadcrumbsFromLocations","search","length","INITIALIZE_BREADCRUMBS","result","replace","split","reduce","acc","curr","index","generateTitle","forEach","key","useBreadcrumbs","updateTriggers","useDispatch","useLocation","URLSearchParams","searchObject","value","useEffect","useIsMounted","isMounted","useRef","current","PortfolioSuspenseFallback","description","schema","fields","component","toolbarComponentTypes","TOP_TOOLBAR","TOP_TOOLBAR_TITLE","propTypes","PropTypes","node","PortfolioItems","lazy","PortfolioItemDetail","AddProductsToPortfolio","initialState","selectedItems","removeInProgress","filterValue","copyInProgress","isFetching","isFiltering","debouncedFilter","asyncFormValidator","filteringCallback","fetchPortfolioItemsWithPortfolio","porftolioUiReducer","state","items","item","selectItem","includes","slice","indexOf","setRemoveInProgress","removeSucessfull","setFilterValue","setCopyInProgress","setIsFetching","setFilteringFlag","Portfolio","viewState","useInitialUriHash","useReducer","portfolioItems","stateDispatch","useQuery","portfolio","url","useRouteMatch","history","useHistory","useSelector","resetBreadcrumbs","fetchData","portfolioId","fetchSelectedPortfolio","insights","chrome","appNavClick","secondaryNav","scrollToTop","resetSelectedPortfolio","location","routes","portfolioRoute","addProductsRoute","editPortfolioRoute","removePortfolioRoute","sharePortfolioRoute","workflowPortfolioRoute","portfolioItemRoute","metadata","user_capabilities","show","fallback","path","userCapabilities","requiredCapabilities","portfolioLoaded","handleFilterChange","removeProducts","products","removeProductsFromPortfolio","copyPortfolio","push","fetchPortfolios"],"mappings":"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","file":"js/portfolio~91f4305a.b7226600440c2aeb7f89.js","sourcesContent":["import awesomeDebouncePromise from 'awesome-debounce-promise';\n\nexport default (\n  asyncFunction,\n  debounceTime = 250,\n  options = { onlyResolvesLast: false }\n) => awesomeDebouncePromise(asyncFunction, debounceTime, options);\n","import { getAxiosInstance, getGraphqlInstance } from '../shared/user-login';\nimport {\n  TOPOLOGICAL_INVENTORY_API_BASE,\n  SOURCES_API_BASE\n} from '../../utilities/constants';\nimport { defaultSettings } from '../shared/pagination';\nconst axiosInstance = getAxiosInstance();\nconst graphqlInstance = getGraphqlInstance();\n\nconst sourcesQuery = `\nquery {\n  application_types (filter: { name: \"/insights/platform/catalog\" }) {\n    id\n    name\n    sources {\n      id\n      name\n      source_type_id\n    }\n  }\n}`;\n\nexport const getPlatforms = () => {\n  return graphqlInstance\n    .post(`${SOURCES_API_BASE}/graphql`, { query: sourcesQuery })\n    .then(({ data: { application_types } }) => application_types)\n    .then(([{ sources }]) => sources);\n};\n\nexport const getPlatform = (platformId) => {\n  return axiosInstance.get(`${SOURCES_API_BASE}/sources/${platformId}`);\n};\n\nexport const getPlatformItems = (platformId, filter, options) => {\n  const filterQuery = filter ? `&filter[name][contains_i]=${filter}` : '';\n  if (platformId) {\n    return axiosInstance.get(\n      `${TOPOLOGICAL_INVENTORY_API_BASE}/sources/${platformId}/service_offerings?filter[archived_at][nil]${filterQuery}${\n        options ? `&limit=${options.limit}&offset=${options.offset}` : ''\n      }`\n    );\n  } else {\n    return axiosInstance.get(\n      `${TOPOLOGICAL_INVENTORY_API_BASE}/service_offerings`\n    );\n  }\n};\n\nexport const getPlatformInventories = (\n  platformId,\n  filter = '',\n  options = defaultSettings\n) => {\n  if (platformId) {\n    return axiosInstance.get(\n      `${TOPOLOGICAL_INVENTORY_API_BASE}/sources/${platformId}/service_inventories?filter[name][contains_i]=${filter}${\n        options ? `&limit=${options.limit}&offset=${options.offset}` : ''\n      }`\n    );\n  } else {\n    return axiosInstance.get(\n      `${TOPOLOGICAL_INVENTORY_API_BASE}/service_inventories?limit=${options.limit}&offset=${options.offset}`\n    );\n  }\n};\n\nexport const getServiceOffering = (serviceOfferingId, sourceId) =>\n  Promise.all([\n    axiosInstance.get(\n      `${TOPOLOGICAL_INVENTORY_API_BASE}/service_offerings/${serviceOfferingId}`\n    ),\n    axiosInstance\n      .get(`${SOURCES_API_BASE}/sources/${sourceId}`)\n      .then((source) => {\n        return axiosInstance\n          .get(`${SOURCES_API_BASE}/source_types/${source.source_type_id}`)\n          .then(({ icon_url }) => ({\n            ...source,\n            icon_url\n          }));\n      })\n  ]).then(([service, source]) => ({\n    service,\n    source\n  }));\n","import * as ActionTypes from '../action-types';\nimport * as PlatformHelper from '../../helpers/platform/platform-helper';\n\nexport const fetchPlatforms = () => (dispatch) => {\n  dispatch({ type: `${ActionTypes.FETCH_PLATFORMS}_PENDING` });\n  return PlatformHelper.getPlatforms()\n    .then((data) =>\n      dispatch({\n        type: `${ActionTypes.FETCH_PLATFORMS}_FULFILLED`,\n        payload: data\n      })\n    )\n    .catch((error) =>\n      dispatch({\n        type: `${ActionTypes.FETCH_PLATFORMS}_REJECTED`,\n        payload: error\n      })\n    );\n};\n\nexport const fetchPlatformItems = (platformId, filter, options) => ({\n  type: ActionTypes.FETCH_PLATFORM_ITEMS,\n  payload: PlatformHelper.getPlatformItems(platformId, filter, options),\n  meta: {\n    platformId,\n    filter,\n    ...options\n  }\n});\n\nexport const fetchMultiplePlatformItems = (platformsId) => {\n  const platformPromisses = platformsId.map((platformId) =>\n    PlatformHelper.getPlatformItems(platformId).then((data) => ({\n      [platformId]: data\n    }))\n  );\n  return {\n    type: ActionTypes.FETCH_MULTIPLE_PLATFORM_ITEMS,\n    payload: Promise.all(platformPromisses).then((data) =>\n      data.reduce(\n        (acc, curr) => ({\n          ...acc,\n          ...curr\n        }),\n        {}\n      )\n    )\n  };\n};\n\nexport const fetchSelectedPlatform = (id) => ({\n  type: ActionTypes.FETCH_PLATFORM,\n  payload: PlatformHelper.getPlatform(id)\n});\n\nexport const searchPlatformItems = (value) => ({\n  type: ActionTypes.FILTER_PLATFORM_ITEMS,\n  payload: new Promise((resolve) => {\n    resolve(value);\n  })\n});\n\nexport const fetchPlatformInventories = (platformId, filter, options) => ({\n  type: ActionTypes.FETCH_PLATFORM_INVENTORIES,\n  payload: PlatformHelper.getPlatformInventories(platformId, filter, options)\n});\n\nexport const fetchServiceOffering = (...args) => ({\n  type: ActionTypes.FETCH_SERVICE_OFFERING,\n  payload: PlatformHelper.getServiceOffering(...args)\n});\n","import {\n  PORTFOLIOS_ROUTE,\n  PORTFOLIO_ROUTE,\n  PORTFOLIO_ITEM_ROUTE,\n  ORDER_ROUTE,\n  PLATFORM_ROUTE,\n  PLATFORM_SERVICE_OFFERINGS_ROUTE,\n  PLATFORMS_ROUTE,\n  ORDERS_ROUTE,\n  EDIT_SURVEY_ROUTE,\n  ADD_PRODUCTS_ROUTE\n} from '../../constants/routes';\n\nexport const BASE_PORTFOLIO_FRAGMENTS = [\n  {\n    title: 'Portfolios',\n    pathname: PORTFOLIOS_ROUTE,\n    searchParams: {}\n  }\n];\n\nexport const ENTITIES_EXTRA_PARAMS = {\n  'portfolio-item': ['source']\n};\n\nexport const FRAGMENT_TITLE = {\n  [PORTFOLIO_ROUTE]: (getState) =>\n    getState().portfolioReducer.selectedPortfolio.name,\n  [PORTFOLIO_ITEM_ROUTE]: (getState) =>\n    getState().portfolioReducer.portfolioItem.portfolioItem.name,\n  [EDIT_SURVEY_ROUTE]: () => 'Edit survey',\n  [ADD_PRODUCTS_ROUTE]: () => 'Add products',\n  [PLATFORM_ROUTE]: (getState) =>\n    getState().platformReducer.selectedPlatform.name,\n  [PLATFORM_SERVICE_OFFERINGS_ROUTE]: (getState) =>\n    getState().platformReducer.serviceOffering.service.name,\n  [ORDER_ROUTE]: (getState) => {\n    const { portfolioItem, order } = getState().orderReducer.orderDetail;\n    return `${portfolioItem.name} # ${order.id}`;\n  }\n};\n\nexport const FRAGMENT_PREFIX = {\n  [PORTFOLIO_ROUTE]: {\n    pathname: PORTFOLIOS_ROUTE,\n    title: 'Portfolios',\n    searchParams: {}\n  },\n  [PLATFORM_ROUTE]: {\n    pathname: PLATFORMS_ROUTE,\n    title: 'Platforms',\n    searchParams: {}\n  },\n  [ORDER_ROUTE]: {\n    pathname: ORDERS_ROUTE,\n    title: 'Orders',\n    searchParams: {}\n  }\n};\n","import { INITIALIZE_BREADCRUMBS } from '../action-types';\nimport {\n  FRAGMENT_TITLE,\n  ENTITIES_EXTRA_PARAMS,\n  FRAGMENT_PREFIX\n} from '../../helpers/shared/breadcrumbs-creators';\n\nexport const createBreadcrumbsFromLocations = (pathname = '', search = {}) => (\n  dispatch,\n  getState\n) => {\n  if (pathname.length === 0) {\n    return dispatch({ type: INITIALIZE_BREADCRUMBS, payload: [] });\n  }\n\n  let result = pathname\n    .replace(/^\\//, '')\n    .split('/')\n    .reduce((acc, curr, index) => {\n      const pathname = `${\n        index > 0 && acc[index - 1] ? acc[index - 1].pathname : ''\n      }/${curr}`;\n\n      const generateTitle = FRAGMENT_TITLE[pathname];\n      if (!generateTitle) {\n        return acc;\n      }\n\n      const searchParams = {\n        ...(index > 0 && acc[index - 1].searchParams),\n        ...(search[curr] ? { [curr]: search[curr] } : {})\n      };\n      if (ENTITIES_EXTRA_PARAMS[curr]) {\n        ENTITIES_EXTRA_PARAMS[curr].forEach((key) => {\n          searchParams[key] = search[key];\n        });\n      }\n\n      return [\n        ...acc,\n        {\n          pathname,\n          searchParams,\n          title: generateTitle(getState)\n        }\n      ];\n    }, []);\n  if (result.length > 0 && FRAGMENT_PREFIX[result[0].pathname]) {\n    result = [FRAGMENT_PREFIX[result[0].pathname], ...result];\n  }\n\n  return dispatch({ type: INITIALIZE_BREADCRUMBS, payload: result });\n};\n","import { useEffect } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport { useDispatch } from 'react-redux';\nimport { createBreadcrumbsFromLocations } from '../redux/actions/breadcrumbs-actions';\n\nconst useBreadcrumbs = (updateTriggers = []) => {\n  const dispatch = useDispatch();\n  const { pathname, search } = useLocation();\n  if (updateTriggers.length === 0) {\n    return dispatch(createBreadcrumbsFromLocations('', {}));\n  }\n\n  const searchParams = new URLSearchParams(search);\n  const searchObject = {};\n  searchParams.forEach((value, key) => {\n    searchObject[key] = value;\n  });\n\n  useEffect(() => {\n    dispatch(createBreadcrumbsFromLocations(pathname, searchObject));\n  }, [pathname, ...updateTriggers]);\n\n  return () => dispatch(createBreadcrumbsFromLocations('', {}));\n};\n\nexport default useBreadcrumbs;\n","import { useRef, useEffect } from 'react';\n\nconst useIsMounted = () => {\n  const isMounted = useRef(false);\n  useEffect(() => {\n    isMounted.current = true;\n    return () => (isMounted.current = false);\n  }, []);\n  return isMounted;\n};\n\nexport default useIsMounted;\n","import React, { useEffect, useReducer, lazy, Suspense } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useHistory, useRouteMatch, Route, Switch } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport { scrollToTop } from '../../helpers/shared/helpers';\nimport { toggleArraySelection } from '../../helpers/shared/redux-mutators';\nimport { fetchPlatforms } from '../../redux/actions/platform-actions';\nimport {\n  copyPortfolio,\n  fetchPortfolios,\n  fetchSelectedPortfolio,\n  removeProductsFromPortfolio,\n  resetSelectedPortfolio,\n  fetchPortfolioItemsWithPortfolio\n} from '../../redux/actions/portfolio-actions';\nimport asyncFormValidator from '../../utilities/async-form-validator';\nimport useQuery from '../../utilities/use-query';\nimport useBreadcrumbs from '../../utilities/use-breadcrumbs';\nimport { PORTFOLIO_ROUTE } from '../../constants/routes';\nimport { UnauthorizedRedirect } from '../error-pages/error-redirects';\nimport CatalogRoute from '../../routing/catalog-route';\nimport useIsMounted from '../../utilities/use-is-mounted';\nimport useInitialUriHash from '../../routing/use-initial-uri-hash';\nimport ToolbarRenderer from '../../toolbar/toolbar-renderer';\nimport { toolbarComponentTypes } from '../../toolbar/toolbar-mapper';\n\n/**\n * Fake the toolbar until the chunk is loaded\n */\nconst PortfolioSuspenseFallback = ({ title, description }) => (\n  <ToolbarRenderer\n    schema={{\n      fields: [\n        {\n          component: toolbarComponentTypes.TOP_TOOLBAR,\n          key: 'portfolio-top-toolbar',\n          fields: [\n            {\n              component: toolbarComponentTypes.TOP_TOOLBAR_TITLE,\n              key: 'portfolio-toolbar-title',\n              title,\n              description\n            }\n          ]\n        }\n      ]\n    }}\n  />\n);\n\nPortfolioSuspenseFallback.propTypes = {\n  title: PropTypes.node,\n  description: PropTypes.node\n};\n\nconst PortfolioItems = lazy(() =>\n  /* webpackChunkName: \"portfolio-items\" */ import('./portfolio-items')\n);\n\nconst PortfolioItemDetail = lazy(() =>\n  import(\n    /* webpackChunkName: \"portfolio-item-detail\" */\n    './portfolio-item-detail/portfolio-item-detail'\n  )\n);\nconst AddProductsToPortfolio = lazy(() =>\n  import(\n    /* webpackChunkName: \"add-products-to-portfolio\" */\n    './add-products-to-portfolio'\n  )\n);\nconst initialState = {\n  selectedItems: [],\n  removeInProgress: false,\n  filterValue: '',\n  copyInProgress: false,\n  isFetching: true,\n  isFiltering: false\n};\n\nconst debouncedFilter = asyncFormValidator(\n  (value, dispatch, filteringCallback, meta) => {\n    filteringCallback(true);\n    dispatch(fetchPortfolioItemsWithPortfolio(value, meta)).then(() =>\n      filteringCallback(false)\n    );\n  },\n  1000\n);\n\nconst porftolioUiReducer = (state, { type, payload }) =>\n  ({\n    selectItem: {\n      ...state,\n      selectedItems: toggleArraySelection(state.selectedItems, payload)\n    },\n    setRemoveInProgress: { ...state, removeInProgress: payload },\n    removeSucessfull: { ...state, selectedItems: [], removeInProgress: false },\n    setFilterValue: { ...state, filterValue: payload, isFiltering: true },\n    setCopyInProgress: { ...state, copyInProgress: payload },\n    setIsFetching: { ...state, isFetching: payload },\n    setFilteringFlag: { ...state, isFiltering: payload }\n  }[type]);\n\nconst Portfolio = () => {\n  const viewState = useInitialUriHash();\n  const [state, stateDispatch] = useReducer(porftolioUiReducer, {\n    ...initialState,\n    filterValue: viewState?.portfolioItems?.filter || ''\n  });\n  const [searchParams] = useQuery(['portfolio']);\n  const { portfolio: id } = searchParams;\n  const { url } = useRouteMatch(PORTFOLIO_ROUTE);\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const isMounted = useIsMounted();\n  const { portfolio, portfolioItem, meta } = useSelector(\n    ({\n      portfolioReducer: {\n        selectedPortfolio,\n        portfolioItem,\n        portfolioItems: { meta }\n      }\n    }) => ({\n      portfolio: selectedPortfolio,\n      portfolioItem,\n      meta\n    })\n  );\n\n  const resetBreadcrumbs = useBreadcrumbs([portfolio, portfolioItem]);\n\n  const fetchData = (portfolioId) => {\n    stateDispatch({ type: 'setIsFetching', payload: true });\n    return Promise.all([\n      dispatch(fetchPlatforms()),\n      dispatch(fetchSelectedPortfolio(portfolioId)),\n      dispatch(\n        fetchPortfolioItemsWithPortfolio(portfolioId, viewState?.portfolioItems)\n      )\n    ])\n      .then((data) => {\n        if (isMounted.current) {\n          stateDispatch({ type: 'setIsFetching', payload: false });\n        }\n\n        return data;\n      })\n      .catch(() => stateDispatch({ type: 'setIsFetching', payload: false }));\n  };\n\n  useEffect(() => {\n    insights.chrome.appNavClick({ id: 'portfolios', secondaryNav: true });\n    fetchData(id);\n    scrollToTop();\n\n    return () => {\n      resetBreadcrumbs();\n      dispatch(resetSelectedPortfolio());\n    };\n  }, []);\n\n  useEffect(() => {\n    if (\n      isMounted.current === true &&\n      !state.isFetching &&\n      history.location.pathname === PORTFOLIO_ROUTE\n    ) {\n      fetchData(id);\n      scrollToTop();\n    }\n  }, [id, history.location.pathname]);\n\n  const handleCopyPortfolio = () => {\n    stateDispatch({ type: 'setCopyInProgress', payload: true });\n    return dispatch(copyPortfolio(id))\n      .then(({ id }) =>\n        history.push({\n          pathname: PORTFOLIO_ROUTE,\n          search: `?portfolio=${id}`\n        })\n      )\n      .then(() => stateDispatch({ type: 'setCopyInProgress', payload: false }))\n      .then(() => dispatch(fetchPortfolios()))\n      .catch(() =>\n        stateDispatch({ type: 'setCopyInProgress', payload: false })\n      );\n  };\n\n  const removeProducts = (products) => {\n    stateDispatch({ type: 'setRemoveInProgress', payload: true });\n    dispatch(removeProductsFromPortfolio(products, portfolio.name))\n      .then(() => stateDispatch({ type: 'removeSucessfull' }))\n      .catch(() =>\n        stateDispatch({ type: 'setRemoveInProgress', payload: false })\n      );\n  };\n\n  const handleFilterChange = (filter) => {\n    stateDispatch({ type: 'setFilterValue', payload: filter });\n    debouncedFilter(\n      id,\n      dispatch,\n      (isFiltering) =>\n        stateDispatch({ type: 'setFilteringFlag', payload: isFiltering }),\n      {\n        ...meta,\n        offset: 0,\n        filter\n      }\n    );\n  };\n\n  const routes = {\n    portfolioRoute: url,\n    addProductsRoute: `${url}/add-products`,\n    editPortfolioRoute: `${url}/edit-portfolio`,\n    removePortfolioRoute: `${url}/remove-portfolio`,\n    sharePortfolioRoute: `${url}/share-portfolio`,\n    workflowPortfolioRoute: `${url}/edit-workflow`,\n    portfolioItemRoute: `${url}/portfolio-item`\n  };\n\n  if (portfolio.metadata.user_capabilities.show === false) {\n    return <UnauthorizedRedirect />;\n  }\n\n  return (\n    <Suspense\n      fallback={\n        <PortfolioSuspenseFallback\n          title={portfolio.name}\n          description={portfolio.description}\n        />\n      }\n    >\n      <Switch>\n        <CatalogRoute\n          path={routes.addProductsRoute}\n          userCapabilities={portfolio.metadata.user_capabilities}\n          requiredCapabilities=\"update\"\n        >\n          <AddProductsToPortfolio portfolioRoute={routes.portfolioRoute} />\n        </CatalogRoute>\n        <Route path={routes.portfolioItemRoute}>\n          <PortfolioItemDetail portfolioLoaded={!state.isFetching} />\n        </Route>\n        <Route path={routes.portfolioRoute}>\n          <PortfolioItems\n            routes={routes}\n            handleFilterChange={handleFilterChange}\n            removeProducts={removeProducts}\n            copyPortfolio={handleCopyPortfolio}\n            state={state}\n            stateDispatch={stateDispatch}\n          />\n        </Route>\n      </Switch>\n    </Suspense>\n  );\n};\n\nexport default Portfolio;\n","export const toggleArraySelection = (items, item) =>\n  items.includes(item)\n    ? [\n        ...items.slice(0, items.indexOf(item)),\n        ...items.slice(items.indexOf(item) + 1)\n      ]\n    : [...items, item];\n"],"sourceRoot":""}