{"version":3,"sources":["webpack:///./src/redux/actions/portfolio-actions.js","webpack:///./src/helpers/portfolio/portfolio-helper.js","webpack:///./node_modules/@patternfly/react-styles/css/layouts/Split/split.js","webpack:///./node_modules/@patternfly/react-styles/css/layouts/Stack/stack.js","webpack:///./node_modules/@patternfly/react-core/dist/js/layouts/Split/Split.js","webpack:///./node_modules/@patternfly/react-core/dist/js/layouts/Split/SplitItem.js","webpack:///./src/routing/use-initial-uri-hash.js","webpack:///./node_modules/@patternfly/react-core/dist/js/layouts/Stack/Stack.js","webpack:///./node_modules/@patternfly/react-styles/css/layouts/Stack/stack.css?0734","webpack:///./node_modules/@patternfly/react-styles/css/layouts/Stack/stack.css","webpack:///./node_modules/@patternfly/react-styles/css/layouts/Split/split.css?8d13","webpack:///./node_modules/@patternfly/react-styles/css/layouts/Split/split.css","webpack:///./src/toolbar/helpers.js","webpack:///./node_modules/@patternfly/react-core/dist/js/layouts/Stack/StackItem.js","webpack:///./node_modules/@patternfly/react-icons/dist/js/icons/wrench-icon.js","webpack:///./src/presentational-components/styled-components/spinner-wrapper.js","webpack:///./src/smart-components/portfolio/remove-portfolio-modal.js","webpack:///./node_modules/@patternfly/react-icons/dist/js/icons/warning-triangle-icon.js","webpack:///./src/forms/portfolio-share-form.schema.js","webpack:///./src/helpers/share/share-helper.js","webpack:///./src/redux/actions/share-actions.js","webpack:///./src/helpers/rbac/rbac-helper.js","webpack:///./src/smart-components/portfolio/share-portfolio-modal.js","webpack:///./src/forms/portfolio-form.schema.js","webpack:///./src/smart-components/portfolio/add-portfolio-modal.js","webpack:///./src/presentational-components/portfolio/portfolio-card-header.js","webpack:///./src/presentational-components/portfolio/porfolio-card.js","webpack:///./src/toolbar/schemas/portfolios-toolbar.schema.js","webpack:///./src/smart-components/portfolio/portfolios.js"],"names":["doFetchPortfolios","defaultSettings","filter","options","type","ActionTypes","meta","payload","PortfolioHelper","fetchPortfolios","dispatch","fetchPortfoliosWithState","storeState","stateKey","fetchPortfolioItems","limit","offset","fetchPortfolioItemsWithPortfolio","portfolioId","fetchSelectedPortfolio","id","addPortfolio","portfolioData","notifications","fulfilled","variant","title","description","name","addToPortfolio","items","updatePortfolio","getState","then","ADD_NOTIFICATION","dismissable","error","undoRemovePortfolio","restoreKey","viewState","CLEAR_NOTIFICATIONS","portfolio","removePortfolio","restore_key","href","onClick","event","preventDefault","portfolioReducer","portfolios","data","length","removeProductsFromPortfolio","portfolioItems","portfolioName","selectedPortfolio","defaultMessage","values","count","undo","restoreData","err","undoRemoveProductsFromPortfolio","copyPortfolio","copyPortfolioItem","portfolioItemId","copyObject","newPortfolio","resetSelectedPortfolio","updatePortfolioItem","item","getPortfolioItemDetail","params","portfolioItem","source","axiosInstance","getAxiosInstance","portfolioApi","getPortfolioApi","portfolioItemApi","getPortfolioItemApi","listPortfolios","get","CATALOG_API_BASE","listPortfolioItems","portfolioReference","reduce","acc","curr","index","portfolio_id","Object","keys","map","join","forEach","portfolioItemIndex","getPortfolio","showPortfolio","getPortfolioItemsWithPortfolio","a","createPortfolio","Promise","all","createPortfolioItem","service_offering_ref","store","sanitizeValues","destroyPortfolio","removePortfolioItem","destroyPortfolioItem","removePortfolioItems","portfolioItemIds","itemId","fetchPortfolioByName","restorePortfolioItems","unDeletePortfolioItem","postCopyPortfolio","postCopyPortfolioItem","uploadPortfolioItemIcon","file","iconId","FormData","append","patch","post","headers","accept","_boundary","SOURCES_API_BASE","status","object","notFound","getPortfolioFromState","find","undeletePortfolio","defineProperty","exports","value","default","split","splitItem","modifiers","stack","stackItem","Split","_propTypes","_interopRequireDefault","React","obj","__esModule","cache","_getRequireWildcardCache","has","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","_interopRequireWildcard","_split","_gutters","_reactStyles","WeakMap","_extends","assign","target","i","arguments","apply","this","_objectWithoutProperties","excluded","sourceKeys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","_ref","_ref$gutter","gutter","_ref$className","className","_ref$children","children","_ref$component","component","props","Component","createElement","css","getGutterModifier","propTypes","oneOf","node","string","SplitItem","_ref$isFilled","isFilled","fill","bool","useInitialUriHash","decodeState","window","location","hash","substring","Stack","_stack","api","content","module","exported","locals","push","createSingleItemGroup","groupName","hidden","toolbarComponentTypes","TOOLBAR_GROUP","fields","TOOLBAR_ITEM","createLinkButton","pathname","preserveSearch","LINK","isDisabled","BUTTON","StackItem","WrenchIconConfig","_createIcon","height","width","svgPath","yOffset","xOffset","transform","_default","SpinnerWrapper","styled","Bullseye","RemovePortfolioModal","useQuery","useDispatch","useSelector","useHistory","goBack","metadata","user_capabilities","destroy","isOpen","isSmall","onClose","isFooterLeftAligned","actions","PORTFOLIOS_ROUTE","size","TextVariants","p","PropTypes","shape","number","defaultProps","WarningTriangleIconConfig","createPortfolioShareSchema","shareInfo","loadGroupOptions","permissionVerbs","canShare","canUnshare","validate","formSchema","inputName","selectName","loadOptions","isSearchable","permissions","newShareSchema","groupInfoFields","group","groupShareInfo","group_name","label","isClearable","groupShareSchema","shareListSchema","userApi","getShareInfo","sharePortfolio","policy","group_uuids","group_uuid","unsharePortfolio","getRbacGroupApi","SharePortfolioModal","closeUrl","removeQuery","useEnhancedHistory","keepHash","search","useState","isFetching","setFetching","initialValues","shareReducer","useEffect","ShareHelper","onCancel","share","unshare","Modal","TextContent","Text","h6","schema","inputValue","filterValue","RBAC_API_BASE","uuid","fetchFilterGroups","permissionOptions","schemaType","onSubmit","sharePromises","initialPerm","sort","sharePermissions","permission","permissionValues","errors","groupPermissions","perm","formContainer","buttonsLabels","submitLabel","isRequired","func","debouncedValidator","asyncFormValidator","trim","undefined","createPortfolioSchema","newRecord","openApiSchema","componentTypes","TEXT_FIELD","maxLength","components","schemas","Portfolio","properties","DEFAULT_MAX_LENGTH","TEXTAREA","AddPortfolioModal","closeTarget","submitting","setSubmitting","useContext","UserContext","onAddPortfolio","PORTFOLIO_ROUTE","editVariant","update","disableSubmit","Spinner","oneOfType","HeaderTitle","LevelItem","PortfolioCardHeader","to","headerActions","Level","h3","TO_DISPLAY","HeaderActions","userCapabilities","set_approval","setOpen","dropdownItems","DropdownItem","searchParams","SHARE_PORTFOLIO_ROUTE","preserveHash","EDIT_PORTFOLIO_WORKFLOW_ROUTE","EDIT_PORTFOLIO_ROUTE","REMOVE_PORTFOLIO_ROUTE","Dropdown","isPlain","onSelect","position","DropdownPosition","right","toggle","KebabToggle","onToggle","PortfolioCard","imageUrl","CardHeader","small","DateFormat","date","updated_at","created_at","owner","toDisplay","CardFooter","history","createPortfolioToolbarSchema","userPermissions","filterProps","searchValue","onFilterChange","placeholder","TOP_TOOLBAR","TOP_TOOLBAR_TITLE","noData","LEVEL","TOOLBAR","FILTER_TOOLBAR_ITEM","hasPermission","LEVEL_ITEM","AsyncPagination","isCompact","apiRequest","debouncedFilter","filteringCallback","initialState","isFiltering","portfoliosState","state","action","Portfolios","useReducer","stateDispatch","match","useRouteMatch","scrollToTop","insights","chrome","appNavClick","secondaryNav","itemName","handleFilterItems","emptyStateProps","PrimaryAction","url","ADD_PORTFOLIO_ROUTE","Button","Icon","WrenchIcon","SearchIcon","galleryItems","_","exact","path","querySelector","WORKFLOW_PORTFOLIO_ROUTE","pushParam","objectType","PORTFOLIO_RESOURCE_TYPE","objectName","isLoading","renderEmptyState","dropDirection"],"mappings":"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","file":"js/portfolios.js","sourcesContent":["import React, { Fragment } from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport {\n  ADD_NOTIFICATION,\n  CLEAR_NOTIFICATIONS\n} from '@redhat-cloud-services/frontend-components-notifications/';\n\nimport * as ActionTypes from '../action-types';\nimport * as PortfolioHelper from '../../helpers/portfolio/portfolio-helper';\nimport { defaultSettings } from '../../helpers/shared/pagination';\n\nexport const doFetchPortfolios = ({\n  filter,\n  ...options\n} = defaultSettings) => ({\n  type: ActionTypes.FETCH_PORTFOLIOS,\n  meta: { ...defaultSettings, filter, ...options },\n  payload: PortfolioHelper.listPortfolios(filter, options)\n});\n\nexport const fetchPortfolios = (options) => (dispatch) =>\n  dispatch(doFetchPortfolios(options));\n\nexport const fetchPortfoliosWithState = (options = defaultSettings) => (\n  dispatch\n) =>\n  dispatch(\n    doFetchPortfolios({ ...options, storeState: true, stateKey: 'portfolio' })\n  );\n\nexport const fetchPortfolioItems = (\n  filter = '',\n  options = defaultSettings\n) => ({\n  type: ActionTypes.FETCH_PORTFOLIO_ITEMS,\n  meta: { filter, storeState: true, stateKey: 'products' },\n  payload: PortfolioHelper.listPortfolioItems(\n    options.limit,\n    options.offset,\n    filter\n  )\n});\n\nexport const fetchPortfolioItemsWithPortfolio = (\n  portfolioId,\n  options = defaultSettings\n) => ({\n  type: ActionTypes.FETCH_PORTFOLIO_ITEMS_WITH_PORTFOLIO,\n  payload: PortfolioHelper.getPortfolioItemsWithPortfolio(portfolioId, options),\n  meta: {\n    ...options,\n    storeState: true,\n    stateKey: 'portfolioItems'\n  }\n});\n\nexport const fetchSelectedPortfolio = (id) => ({\n  type: ActionTypes.FETCH_PORTFOLIO,\n  payload: PortfolioHelper.getPortfolio(id)\n});\n\nexport const searchPortfolioItems = (value) => ({\n  type: ActionTypes.FILTER_PORTFOLIO_ITEMS,\n  payload: new Promise((resolve) => {\n    resolve(value);\n  })\n});\n\nexport const addPortfolio = (portfolioData) => ({\n  type: ActionTypes.ADD_PORTFOLIO,\n  payload: PortfolioHelper.addPortfolio(portfolioData),\n  meta: {\n    notifications: {\n      fulfilled: {\n        variant: 'success',\n        title: 'Success adding portfolio',\n        description: `Portfolio ${portfolioData.name} was added successfully.`\n      }\n    }\n  }\n});\n\nexport const addToPortfolio = (portfolioId, items) => ({\n  type: ActionTypes.ADD_TO_PORTFOLIO,\n  payload: PortfolioHelper.addToPortfolio(portfolioId, items),\n  meta: {\n    notifications: {\n      fulfilled: {\n        variant: 'success',\n        title: 'Success adding products',\n        description: 'Products were successfully added to portfolio.'\n      }\n    }\n  }\n});\n\nexport const updatePortfolio = (portfolioData, options) => (\n  dispatch,\n  getState\n) => {\n  dispatch({\n    type: ActionTypes.UPDATE_TEMPORARY_PORTFOLIO,\n    payload: portfolioData\n  });\n\n  return PortfolioHelper.updatePortfolio(portfolioData, { getState })\n    .then(() => dispatch(doFetchPortfolios(options)))\n    .then(() =>\n      dispatch({\n        type: ADD_NOTIFICATION,\n        payload: {\n          dismissable: true,\n          variant: 'success',\n          title: 'Success updating portfolio',\n          description: 'The portfolio was updated successfully.'\n        }\n      })\n    )\n    .catch((error) => {\n      dispatch({ type: ActionTypes.RESTORE_PORTFOLIO_PREV_STATE });\n      throw error;\n    })\n    .catch((error) =>\n      dispatch({\n        type: `${ActionTypes.UPDATE_TEMPORARY_PORTFOLIO}_REJECTED`,\n        payload: error\n      })\n    );\n};\n\nexport const undoRemovePortfolio = (portfolioId, restoreKey, viewState) => (\n  dispatch\n) => {\n  dispatch({ type: CLEAR_NOTIFICATIONS });\n  return PortfolioHelper.undeletePortfolio(portfolioId, restoreKey).then(\n    (portfolio) => {\n      dispatch({\n        type: ADD_NOTIFICATION,\n        payload: {\n          variant: 'success',\n          dismissable: true,\n          title: `Portfolio ${portfolio.name} has been restored`\n        }\n      });\n      return dispatch(fetchPortfolios(viewState));\n    }\n  );\n};\n\nexport const removePortfolio = (portfolioId, viewState = {}) => (\n  dispatch,\n  getState\n) => {\n  dispatch({\n    type: ActionTypes.DELETE_TEMPORARY_PORTFOLIO,\n    payload: portfolioId\n  });\n  return dispatch({\n    type: ActionTypes.REMOVE_PORTFOLIO,\n    payload: PortfolioHelper.removePortfolio(portfolioId)\n      .then(({ restore_key }) => {\n        dispatch({\n          type: ADD_NOTIFICATION,\n          payload: {\n            variant: 'success',\n            title: 'Success removing portfolio',\n            dismissable: true,\n            description: (\n              <Fragment>\n                The portfolio was removed successfully. You can&nbsp;\n                <a\n                  href=\"#\"\n                  id={`undo-delete-portfolio-${portfolioId}`}\n                  onClick={(event) => {\n                    event.preventDefault();\n                    dispatch(\n                      undoRemovePortfolio(portfolioId, restore_key, viewState)\n                    );\n                  }}\n                >\n                  Undo\n                </a>\n                &nbsp;this action if this was a mistake.\n              </Fragment>\n            )\n          }\n        });\n        const { meta, data } = getState().portfolioReducer.portfolios;\n        return dispatch(\n          fetchPortfolios({\n            ...viewState,\n            ...meta,\n            offset: data.length === 0 ? 0 : meta.offset\n          })\n        );\n      })\n      .catch((error) => {\n        dispatch({ type: ActionTypes.RESTORE_PORTFOLIO_PREV_STATE });\n        throw error;\n      })\n  });\n};\n\nexport const selectPortfolioItem = (portfolioItem) => ({\n  type: ActionTypes.SELECT_PORTFOLIO_ITEM,\n  payload: portfolioItem\n});\n\nexport const undoRemoveProductsFromPortfolio = (restoreData, portfolioId) => (\n  dispatch\n) => {\n  dispatch({ type: `${ActionTypes.RESTORE_PORTFOLIO_ITEMS}_PENDING` });\n  return PortfolioHelper.restorePortfolioItems(restoreData)\n    .then(() =>\n      dispatch({ type: `${ActionTypes.RESTORE_PORTFOLIO_ITEMS}_FULFILLED` })\n    )\n    .then(() => dispatch({ type: CLEAR_NOTIFICATIONS }))\n    .then(() => dispatch(fetchPortfolioItemsWithPortfolio(portfolioId)))\n    .then(() =>\n      dispatch({\n        type: ADD_NOTIFICATION,\n        payload: {\n          variant: 'success',\n          dismissable: true,\n          title: 'Products have been restored'\n        }\n      })\n    )\n    .catch((err) =>\n      dispatch({\n        type: `${ActionTypes.RESTORE_PORTFOLIO_ITEMS}_REJECTED`,\n        payload: err\n      })\n    );\n};\n\nexport const removeProductsFromPortfolio = (portfolioItems, portfolioName) => (\n  dispatch,\n  getState\n) => {\n  dispatch({\n    type: `${ActionTypes.REMOVE_PORTFOLIO_ITEMS}_PENDING`\n  });\n  const {\n    portfolioReducer: {\n      portfolioItems: { meta },\n      selectedPortfolio: { id: portfolioId }\n    }\n  } = getState();\n  return PortfolioHelper.removePortfolioItems(portfolioItems)\n    .then((data) =>\n      dispatch(\n        fetchPortfolioItemsWithPortfolio(portfolioId, {\n          offset: 0,\n          limit: meta.limit,\n          filter: ''\n        })\n      ).then(() => data)\n    )\n    .then((data) => {\n      return dispatch({\n        type: ADD_NOTIFICATION,\n        payload: {\n          variant: 'success',\n          title: 'Products removed',\n          dismissable: true,\n          description: (\n            <FormattedMessage\n              id=\"portfolio.remove-portfolio-items\"\n              defaultMessage={`You have removed {count, number} {count, plural,\n            one {product}\n            other {products}\n          } from the {portfolioName} portfolio. {undo} if this was a mistake.`}\n              values={{\n                count: portfolioItems.length,\n                portfolioName,\n                undo: (\n                  <a\n                    href=\"#\"\n                    id={`restore-portfolio-item-${portfolioId}`}\n                    onClick={(event) => {\n                      event.preventDefault();\n                      dispatch(\n                        undoRemoveProductsFromPortfolio(data, portfolioId)\n                      );\n                    }}\n                  >\n                    Undo\n                  </a>\n                )\n              }}\n            />\n          )\n        }\n      });\n    })\n    .then(() =>\n      dispatch({ type: `${ActionTypes.REMOVE_PORTFOLIO_ITEMS}_FULFILLED` })\n    )\n    .catch((err) =>\n      dispatch({\n        type: `${ActionTypes.REMOVE_PORTFOLIO_ITEMS}_REJECTED`,\n        payload: err\n      })\n    );\n};\n\nexport const copyPortfolio = (id) => (dispatch) => {\n  dispatch({ type: 'COPY_PORTFOLIO_PENDING' });\n  return PortfolioHelper.copyPortfolio(id)\n    .then((portfolio) => {\n      dispatch({ type: 'COPY_PORTFOLIO_FULFILLED' });\n      dispatch({\n        type: ADD_NOTIFICATION,\n        payload: {\n          variant: 'success',\n          title: 'You have successfully copied a portfolio',\n          description: `${portfolio.name} has been copied.`,\n          dismissable: true\n        }\n      });\n      return portfolio;\n    })\n    .catch((err) =>\n      dispatch({ type: 'COPY_PORTFOLIO_REJECTED', payload: err })\n    );\n};\n\nexport const copyPortfolioItem = (\n  portfolioItemId,\n  copyObject,\n  newPortfolio\n) => (dispatch) => {\n  return PortfolioHelper.copyPortfolioItem(portfolioItemId, copyObject)\n    .then((data) => {\n      dispatch({\n        type: ADD_NOTIFICATION,\n        payload: {\n          variant: 'success',\n          title: 'You have successfully copied a product',\n          description: `${data.name} has been copied into ${newPortfolio.name}`,\n          dismissable: true\n        }\n      });\n      return data;\n    })\n    .catch((err) =>\n      dispatch({ type: 'COPY_PORTFOLIO_ITEM_REJECTED', payload: err })\n    );\n};\n\nexport const resetSelectedPortfolio = () => ({\n  type: ActionTypes.RESET_SELECTED_PORTFOLIO\n});\n\nexport const updatePortfolioItem = (values) => (dispatch, getState) => {\n  dispatch({\n    type: ActionTypes.UPDATE_TEMPORARY_PORTFOLIO_ITEM,\n    payload: values\n  });\n  return PortfolioHelper.updatePortfolioItem(values, { getState })\n    .then(() => {\n      dispatch({ type: ActionTypes.UPDATE_PORTFOLIO_ITEM, payload: values });\n      return values;\n    })\n    .then((item) =>\n      dispatch({\n        type: ADD_NOTIFICATION,\n        payload: {\n          variant: 'success',\n          title: `Product \"${item.name}\" was successfully updated`,\n          dismissable: true\n        }\n      })\n    )\n    .catch((error) => {\n      dispatch({ type: ActionTypes.RESTORE_PORTFOLIO_ITEM_PREV_STATE });\n      throw error;\n    })\n    .catch((error) =>\n      dispatch({\n        type: `${ActionTypes.UPDATE_TEMPORARY_PORTFOLIO_ITEM}_REJECTED`,\n        payload: error\n      })\n    );\n};\n\nexport const getPortfolioItemDetail = (params) => (dispatch) => {\n  dispatch({ type: `${ActionTypes.SELECT_PORTFOLIO_ITEM}_PENDING` });\n  return PortfolioHelper.getPortfolioItemDetail(params).then(\n    ([portfolioItem, source]) =>\n      dispatch({\n        type: `${ActionTypes.SELECT_PORTFOLIO_ITEM}_FULFILLED`,\n        payload: {\n          portfolioItem,\n          source\n        }\n      })\n  );\n};\n","import {\n  getAxiosInstance,\n  getPortfolioApi,\n  getPortfolioItemApi\n} from '../shared/user-login';\nimport { CATALOG_API_BASE, SOURCES_API_BASE } from '../../utilities/constants';\nimport { sanitizeValues } from '../shared/helpers';\nimport { defaultSettings } from '../shared/pagination';\n\nconst axiosInstance = getAxiosInstance();\nconst portfolioApi = getPortfolioApi();\nconst portfolioItemApi = getPortfolioItemApi();\n\nexport function listPortfolios(\n  filter = '',\n  { limit, offset } = defaultSettings\n) {\n  return axiosInstance.get(\n    `${CATALOG_API_BASE}/portfolios?filter[name][contains_i]=${filter}&limit=${limit}&offset=${offset}`\n  );\n}\n\nexport function listPortfolioItems(limit = 50, offset = 0, filter = '') {\n  return axiosInstance\n    .get(\n      `${CATALOG_API_BASE}/portfolio_items?filter[name][contains_i]=${filter}&limit=${limit}&offset=${offset}`\n    )\n    .then((portfolioItems) => {\n      const portfolioReference = portfolioItems.data.reduce(\n        (acc, curr, index) =>\n          curr.portfolio_id\n            ? {\n                ...acc,\n                [curr.portfolio_id]: acc[curr.portfolio_id]\n                  ? [...acc[curr.portfolio_id], index]\n                  : [index]\n              }\n            : acc,\n        {}\n      );\n      return axiosInstance\n        .get(\n          `${CATALOG_API_BASE}/portfolios?${Object.keys(portfolioReference)\n            .map((id) => `filter[id][]=${id}`)\n            .join('&')}`\n        )\n        .then(({ data }) => ({\n          portfolioItems,\n          portfolioReference,\n          portfolios: data\n        }));\n    })\n    .then(({ portfolioItems, portfolioReference, portfolios }) => {\n      portfolios.forEach(\n        ({ id, name }) =>\n          portfolioReference[id] &&\n          portfolioReference[id].forEach((portfolioItemIndex) => {\n            portfolioItems.data[portfolioItemIndex].portfolioName = name;\n          })\n      );\n      return portfolioItems;\n    });\n}\n\nexport function getPortfolio(portfolioId) {\n  return portfolioApi.showPortfolio(portfolioId);\n}\n\nexport function getPortfolioItemsWithPortfolio(\n  portfolioId,\n  { limit, offset, filter = '' } = defaultSettings\n) {\n  return axiosInstance.get(\n    `${CATALOG_API_BASE}/portfolios/${portfolioId}/portfolio_items?filter[name][contains_i]=${filter}&limit=${limit}&offset=${offset}`\n  );\n}\n\n// TO DO - change to use the API call that adds multiple items to a portfolio when available\nexport async function addPortfolio(portfolioData, items) {\n  let portfolio = await portfolioApi.createPortfolio(portfolioData);\n  if (portfolio && items && items.length > 0) {\n    return addToPortfolio(portfolio, items);\n  }\n\n  return portfolio;\n}\n\nexport async function addToPortfolio(portfolioId, items) {\n  return Promise.all(\n    items.map((item) =>\n      portfolioItemApi.createPortfolioItem({\n        portfolio_id: portfolioId,\n        service_offering_ref: item\n      })\n    )\n  );\n}\n\nexport async function updatePortfolio({ id, ...portfolioData }, store) {\n  return await portfolioApi.updatePortfolio(\n    id,\n    sanitizeValues(portfolioData, 'Portfolio', store)\n  );\n}\n\nexport async function removePortfolio(portfolioId) {\n  return portfolioApi.destroyPortfolio(portfolioId);\n}\n\nexport async function removePortfolioItem(portfolioItemId) {\n  return portfolioItemApi.destroyPortfolioItem(portfolioItemId);\n}\n\nexport async function removePortfolioItems(portfolioItemIds) {\n  return Promise.all(\n    portfolioItemIds.map(async (itemId) => {\n      const { restore_key } = await removePortfolioItem(itemId);\n      return {\n        portfolioItemId: itemId,\n        restoreKey: restore_key\n      };\n    })\n  );\n}\n\nexport function fetchProviderControlParameters(portfolioItemId) {\n  return axiosInstance\n    .get(\n      `${CATALOG_API_BASE}/portfolio_items/${portfolioItemId}/provider_control_parameters`\n    )\n    .then((data) => ({\n      required: [],\n      ...data,\n      properties: {\n        ...data.properties,\n        namespace: {\n          ...data.properties.namespace,\n          enum: Array.from(new Set([...data.properties.namespace.enum]))\n        }\n      }\n    }));\n}\n\nexport async function updatePortfolioItem({ id, ...portfolioItem }, store) {\n  return await portfolioItemApi.updatePortfolioItem(\n    id,\n    sanitizeValues(portfolioItem, 'PortfolioItem', store)\n  );\n}\n\nexport function fetchPortfolioByName(name = '') {\n  return axiosInstance.get(`${CATALOG_API_BASE}/portfolios`, {\n    params: {\n      filter: {\n        name\n      }\n    }\n  });\n}\n\nexport const restorePortfolioItems = (restoreData) =>\n  Promise.all(\n    restoreData.map(({ portfolioItemId, restoreKey }) =>\n      portfolioItemApi.unDeletePortfolioItem(portfolioItemId, {\n        restore_key: restoreKey\n      })\n    )\n  );\n\nexport const copyPortfolio = (portfolioId) =>\n  portfolioApi.postCopyPortfolio(portfolioId);\n\nexport const copyPortfolioItem = (portfolioItemId, copyObject = {}) =>\n  portfolioItemApi.postCopyPortfolioItem(portfolioItemId, copyObject);\n\nexport const uploadPortfolioItemIcon = (portfolioItemId, file, iconId) => {\n  let data = new FormData();\n  data.append('content', file, file.name);\n  if (iconId) {\n    return axiosInstance.patch(`${CATALOG_API_BASE}/icons/${iconId}`, data);\n  }\n\n  data.append('portfolio_item_id', portfolioItemId);\n  return axiosInstance.post(`${CATALOG_API_BASE}/icons`, data, {\n    headers: {\n      accept: 'application/json',\n      'Content-Type': `multipart/form-data; boundary=${data._boundary}`\n    }\n  });\n};\n\nexport const getPortfolioItemDetail = (params) =>\n  Promise.all([\n    axiosInstance.get(\n      `${CATALOG_API_BASE}/portfolio_items/${params.portfolioItem}`\n    ),\n    axiosInstance\n      .get(`${SOURCES_API_BASE}/sources/${params.source}`)\n      .catch((error) => {\n        if (error.status === 404) {\n          return {\n            object: 'platform',\n            notFound: true\n          };\n        }\n\n        throw error;\n      })\n  ]);\n\nexport const getPortfolioFromState = (portfolioReducer, portfolioId) =>\n  portfolioReducer.selectedPortfolio &&\n  portfolioReducer.selectedPortfolio.id === portfolioId\n    ? portfolioReducer.selectedPortfolio\n    : portfolioReducer.portfolios.data.find(({ id }) => id === portfolioId);\n\nexport const undeletePortfolio = (portfolioId, restoreKey) =>\n  axiosInstance.post(`${CATALOG_API_BASE}/portfolios/${portfolioId}/undelete`, {\n    restore_key: restoreKey\n  });\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nrequire(\"./split.css\");\nexports.default = {\n    split: 'pf-l-split',\n    splitItem: 'pf-l-split__item',\n    modifiers: {\n        'fill': 'pf-m-fill',\n        'gutter': 'pf-m-gutter'\n    }\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nrequire(\"./stack.css\");\nexports.default = {\n    stack: 'pf-l-stack',\n    stackItem: 'pf-l-stack__item',\n    modifiers: {\n        'fill': 'pf-m-fill',\n        'gutter': 'pf-m-gutter'\n    }\n};\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Split = void 0;\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _split = _interopRequireDefault(require(\"@patternfly/react-styles/css/layouts/Split/split\"));\n\nvar _gutters = require(\"../../styles/gutters\");\n\nvar _reactStyles = require(\"@patternfly/react-styles\");\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function _getRequireWildcardCache() { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; if (obj != null) { var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } } newObj[\"default\"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nvar Split = function Split(_ref) {\n  var _ref$gutter = _ref.gutter,\n      gutter = _ref$gutter === void 0 ? null : _ref$gutter,\n      _ref$className = _ref.className,\n      className = _ref$className === void 0 ? '' : _ref$className,\n      _ref$children = _ref.children,\n      children = _ref$children === void 0 ? null : _ref$children,\n      _ref$component = _ref.component,\n      component = _ref$component === void 0 ? 'div' : _ref$component,\n      props = _objectWithoutProperties(_ref, [\"gutter\", \"className\", \"children\", \"component\"]);\n\n  var Component = component;\n  return React.createElement(Component, _extends({}, props, {\n    className: (0, _reactStyles.css)(_split[\"default\"].split, gutter && (0, _gutters.getGutterModifier)(_split[\"default\"], gutter, _split[\"default\"].modifiers.gutter), className)\n  }), children);\n};\n\nexports.Split = Split;\nSplit.propTypes = {\n  gutter: _propTypes[\"default\"].oneOf(['sm', 'md', 'lg']),\n  children: _propTypes[\"default\"].node,\n  className: _propTypes[\"default\"].string,\n  component: _propTypes[\"default\"].node\n};\n//# sourceMappingURL=Split.js.map","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SplitItem = void 0;\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _split = _interopRequireDefault(require(\"@patternfly/react-styles/css/layouts/Split/split\"));\n\nvar _reactStyles = require(\"@patternfly/react-styles\");\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function _getRequireWildcardCache() { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; if (obj != null) { var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } } newObj[\"default\"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nvar SplitItem = function SplitItem(_ref) {\n  var _ref$isFilled = _ref.isFilled,\n      isFilled = _ref$isFilled === void 0 ? false : _ref$isFilled,\n      _ref$className = _ref.className,\n      className = _ref$className === void 0 ? '' : _ref$className,\n      _ref$children = _ref.children,\n      children = _ref$children === void 0 ? null : _ref$children,\n      props = _objectWithoutProperties(_ref, [\"isFilled\", \"className\", \"children\"]);\n\n  return React.createElement(\"div\", _extends({}, props, {\n    className: (0, _reactStyles.css)(_split[\"default\"].splitItem, isFilled && _split[\"default\"].modifiers.fill, className)\n  }), children);\n};\n\nexports.SplitItem = SplitItem;\nSplitItem.propTypes = {\n  isFilled: _propTypes[\"default\"].bool,\n  children: _propTypes[\"default\"].node,\n  className: _propTypes[\"default\"].string\n};\n//# sourceMappingURL=SplitItem.js.map","import { decodeState } from './uri-state-manager';\n\nconst useInitialUriHash = () => decodeState(window.location.hash.substring(1));\n\nexport default useInitialUriHash;\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Stack = void 0;\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _stack = _interopRequireDefault(require(\"@patternfly/react-styles/css/layouts/Stack/stack\"));\n\nvar _reactStyles = require(\"@patternfly/react-styles\");\n\nvar _gutters = require(\"../../styles/gutters\");\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function _getRequireWildcardCache() { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; if (obj != null) { var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } } newObj[\"default\"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nvar Stack = function Stack(_ref) {\n  var _ref$gutter = _ref.gutter,\n      gutter = _ref$gutter === void 0 ? null : _ref$gutter,\n      _ref$className = _ref.className,\n      className = _ref$className === void 0 ? '' : _ref$className,\n      _ref$children = _ref.children,\n      children = _ref$children === void 0 ? null : _ref$children,\n      _ref$component = _ref.component,\n      component = _ref$component === void 0 ? 'div' : _ref$component,\n      props = _objectWithoutProperties(_ref, [\"gutter\", \"className\", \"children\", \"component\"]);\n\n  var Component = component;\n  return React.createElement(Component, _extends({}, props, {\n    className: (0, _reactStyles.css)(_stack[\"default\"].stack, gutter && (0, _gutters.getGutterModifier)(_stack[\"default\"], gutter, _stack[\"default\"].modifiers.gutter), className)\n  }), children);\n};\n\nexports.Stack = Stack;\nStack.propTypes = {\n  gutter: _propTypes[\"default\"].oneOf(['sm', 'md', 'lg']),\n  children: _propTypes[\"default\"].node,\n  className: _propTypes[\"default\"].string,\n  component: _propTypes[\"default\"].node\n};\n//# sourceMappingURL=Stack.js.map","var api = require(\"!../../../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../css-loader/dist/cjs.js!./stack.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","exports = module.exports = require(\"../../../../../css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".pf-l-stack {\\n  --pf-l-stack--m-gutter--MarginBottom: var(--pf-global--gutter);\\n  --pf-l-stack--m-gutter--md--MarginBottom: var(--pf-global--gutter--md);\\n  display: flex;\\n  flex-direction: column;\\n  height: 100%; }\\n  @media screen and (max-width: 768px) {\\n    .pf-l-stack {\\n      --pf-l-stack--m-gutter--MarginBottom: var(--pf-l-stack--m-gutter--md--MarginBottom); } }\\n\\n.pf-l-stack__item.pf-m-fill {\\n  flex-grow: 1; }\\n\\n.pf-l-stack.pf-m-gutter > *:not(:last-child) {\\n  margin-bottom: var(--pf-l-stack--m-gutter--MarginBottom); }\\n\", \"\"]);\n","var api = require(\"!../../../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../css-loader/dist/cjs.js!./split.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","exports = module.exports = require(\"../../../../../css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".pf-l-split {\\n  --pf-l-split--m-gutter--MarginRight: var(--pf-global--gutter);\\n  --pf-l-split--m-gutter--md--MarginRight: var(--pf-global--gutter--md);\\n  display: flex;\\n  flex-wrap: nowrap;\\n  padding: 0;\\n  margin: 0; }\\n  @media screen and (max-width: 768px) {\\n    .pf-l-split {\\n      --pf-l-split--m-gutter--MarginRight: var(--pf-l-split--m-gutter--md--MarginRight); } }\\n\\n.pf-l-split__item.pf-m-fill {\\n  flex-grow: 1; }\\n\\n.pf-l-split.pf-m-gutter > *:not(:last-child) {\\n  margin-right: var(--pf-l-split--m-gutter--MarginRight); }\\n\", \"\"]);\n","import { toolbarComponentTypes } from './toolbar-mapper';\n\nexport const createSingleItemGroup = ({\n  groupName,\n  hidden = false,\n  ...item\n}) => ({\n  component: toolbarComponentTypes.TOOLBAR_GROUP,\n  key: `${groupName}/single-toolbar-item-group`,\n  fields: hidden\n    ? []\n    : [\n        {\n          component: toolbarComponentTypes.TOOLBAR_ITEM,\n          key: `${groupName}/single-toolbar-item`,\n          fields: [item]\n        }\n      ]\n});\n\nexport const createLinkButton = ({ pathname, preserveSearch, ...item }) => ({\n  component: toolbarComponentTypes.LINK,\n  pathname,\n  preserveSearch,\n  key: `${item.key}/button-link`,\n  isDisabled: item.isDisabled,\n  fields: [\n    {\n      component: toolbarComponentTypes.BUTTON,\n      ...item\n    }\n  ]\n});\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.StackItem = void 0;\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _stack = _interopRequireDefault(require(\"@patternfly/react-styles/css/layouts/Stack/stack\"));\n\nvar _reactStyles = require(\"@patternfly/react-styles\");\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function _getRequireWildcardCache() { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; if (obj != null) { var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } } newObj[\"default\"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nvar StackItem = function StackItem(_ref) {\n  var _ref$isFilled = _ref.isFilled,\n      isFilled = _ref$isFilled === void 0 ? false : _ref$isFilled,\n      _ref$className = _ref.className,\n      className = _ref$className === void 0 ? '' : _ref$className,\n      _ref$children = _ref.children,\n      children = _ref$children === void 0 ? null : _ref$children,\n      props = _objectWithoutProperties(_ref, [\"isFilled\", \"className\", \"children\"]);\n\n  return React.createElement(\"div\", _extends({}, props, {\n    className: (0, _reactStyles.css)(_stack[\"default\"].stackItem, isFilled && _stack[\"default\"].modifiers.fill, className)\n  }), children);\n};\n\nexports.StackItem = StackItem;\nStackItem.propTypes = {\n  isFilled: _propTypes[\"default\"].bool,\n  children: _propTypes[\"default\"].node,\n  className: _propTypes[\"default\"].string\n};\n//# sourceMappingURL=StackItem.js.map","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = exports.WrenchIconConfig = void 0;\n\nvar _createIcon = _interopRequireDefault(require(\"../createIcon\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\n/* This file is generated by createIcons.js any changes will be lost. */\nvar WrenchIconConfig = {\n  name: 'WrenchIcon',\n  height: 512,\n  width: 512,\n  svgPath: 'M507.73 109.1c-2.24-9.03-13.54-12.09-20.12-5.51l-74.36 74.36-67.88-11.31-11.31-67.88 74.36-74.36c6.62-6.62 3.43-17.9-5.66-20.16-47.38-11.74-99.55.91-136.58 37.93-39.64 39.64-50.55 97.1-34.05 147.2L18.74 402.76c-24.99 24.99-24.99 65.51 0 90.5 24.99 24.99 65.51 24.99 90.5 0l213.21-213.21c50.12 16.71 107.47 5.68 147.37-34.22 37.07-37.07 49.7-89.32 37.91-136.73zM64 472c-13.25 0-24-10.75-24-24 0-13.26 10.75-24 24-24s24 10.74 24 24c0 13.25-10.75 24-24 24z',\n  yOffset: '',\n  xOffset: '',\n  transform: ''\n};\nexports.WrenchIconConfig = WrenchIconConfig;\n\nvar _default = (0, _createIcon[\"default\"])(WrenchIconConfig);\n\nexports[\"default\"] = _default;\n//# sourceMappingURL=wrench-icon.js.map","import styled from 'styled-components';\nimport { Bullseye } from '@patternfly/react-core/dist/js/layouts/Bullseye/Bullseye';\n\nconst SpinnerWrapper = styled(Bullseye)`\n  overflow: hidden;\n`;\n\nexport default SpinnerWrapper;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { useHistory } from 'react-router-dom';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { WarningTriangleIcon } from '@patternfly/react-icons';\nimport {\n  Modal,\n  Button,\n  Text,\n  TextVariants,\n  TextContent,\n  Split,\n  SplitItem\n} from '@patternfly/react-core';\nimport { removePortfolio } from '../../redux/actions/portfolio-actions';\nimport useQuery from '../../utilities/use-query';\nimport { getPortfolioFromState } from '../../helpers/portfolio/portfolio-helper';\nimport { PORTFOLIOS_ROUTE } from '../../constants/routes';\nimport { UnauthorizedRedirect } from '../error-pages/error-redirects';\nimport { defaultSettings } from '../../helpers/shared/pagination';\n\nconst RemovePortfolioModal = ({ viewState }) => {\n  const [{ portfolio: portfolioId }] = useQuery(['portfolio']);\n  const dispatch = useDispatch();\n  const portfolio = useSelector(({ portfolioReducer }) =>\n    getPortfolioFromState(portfolioReducer, portfolioId)\n  );\n  const { push, goBack } = useHistory();\n  const onSubmit = () => {\n    push(PORTFOLIOS_ROUTE);\n    return dispatch(removePortfolio(portfolioId, viewState));\n  };\n\n  if (!portfolio) {\n    return null;\n  }\n\n  const {\n    metadata: {\n      user_capabilities: { destroy }\n    }\n  } = portfolio;\n\n  return destroy === false ? (\n    <UnauthorizedRedirect />\n  ) : (\n    <Modal\n      title=\"Delete Portfolio?\"\n      isOpen\n      isSmall\n      onClose={goBack}\n      isFooterLeftAligned\n      actions={[\n        <Button\n          key=\"submit\"\n          variant=\"danger\"\n          type=\"button\"\n          id=\"confirm-delete-portfolio\"\n          onClick={onSubmit}\n        >\n          Confirm\n        </Button>,\n        <Button key=\"cancel\" variant=\"link\" type=\"button\" onClick={goBack}>\n          Cancel\n        </Button>\n      ]}\n    >\n      <Split gutter=\"md\">\n        <SplitItem>\n          <WarningTriangleIcon size=\"xl\" fill=\"#f0ab00\" />\n        </SplitItem>\n        <SplitItem>\n          <TextContent>\n            <Text component={TextVariants.p}>\n              This action will permanently delete portfolio {portfolio.name} and\n              its data.\n            </Text>\n          </TextContent>\n        </SplitItem>\n      </Split>\n    </Modal>\n  );\n};\n\nRemovePortfolioModal.propTypes = {\n  viewState: PropTypes.shape({\n    count: PropTypes.number,\n    limit: PropTypes.number,\n    offset: PropTypes.number,\n    filter: PropTypes.string\n  })\n};\n\nRemovePortfolioModal.defaultProps = {\n  viewState: defaultSettings\n};\n\nexport default RemovePortfolioModal;\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = exports.WarningTriangleIconConfig = void 0;\n\nvar _createIcon = _interopRequireDefault(require(\"../createIcon\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\n/* This file is generated by createIcons.js any changes will be lost. */\nvar WarningTriangleIconConfig = {\n  name: 'WarningTriangleIcon',\n  height: 1024,\n  width: 1024,\n  svgPath: 'M511.488 949.321c6.656 0 13.093-0.878 19.456-2.487s12.142-4.169 17.481-7.461c5.998-3.365 11.118-7.314 15.506-11.995s8.119-10.021 11.483-15.945l437.979-842.24c6.656-11.995 9.801-23.918 9.509-35.913s-3.877-23.918-10.459-35.913c-3.365-5.998-7.168-11.118-11.483-15.506s-9.509-8.192-15.506-11.483c-5.339-2.706-10.971-4.827-16.969-6.51s-12.288-2.487-18.944-2.487h-876.032c-6.656 0-12.946 0.805-18.944 2.487s-11.63 3.803-16.969 6.51c-5.998 3.291-11.118 7.095-15.506 11.483s-8.192 9.509-11.483 15.506c-6.656 11.995-10.094 23.918-10.459 35.913s2.779 23.918 9.509 35.913l437.979 842.24c3.291 5.998 7.095 11.264 11.483 15.945s9.509 8.631 15.506 11.995c5.339 3.291 11.118 5.778 17.481 7.461s12.8 2.487 19.456 2.487zM132.974 73.289h759.296l-380.782 741.595-378.514-741.595zM583.387 156.526c-2.121-5.632-7.534-9.509-13.97-9.509-14.263 0-28.526 0-42.715 0-21.138 0-42.277 0-63.415 0-11.045 0-24.576 0.585-24.576 14.994 0 0 0 44.325 0 44.544 0 8.558 6.437 14.994 14.994 14.994 0 0 115.712 0 115.785 0 8.485 0 14.994-6.437 14.994-14.994 0 0 0-44.544 0-44.544 0-1.975-0.366-3.803-1.024-5.486zM583.826 301.934c-2.121-5.632-7.534-9.509-13.97-9.509-14.263 0-28.526 0-42.715 0-21.138 0-42.277 0-63.415 0-11.045 0-24.576 0.585-24.576 14.994 0 0 0 224.914 0 225.134 0 8.558 6.437 14.994 14.994 14.994 0 0 115.712 0 115.785 0 8.485 0 14.994-6.437 14.994-14.994 0 0 0-225.134 0-225.134 0-1.975-0.366-3.803-1.024-5.486z',\n  yOffset: '64',\n  xOffset: '',\n  transform: 'rotate(180 0 512) scale(-1 1)'\n};\nexports.WarningTriangleIconConfig = WarningTriangleIconConfig;\n\nvar _default = (0, _createIcon[\"default\"])(WarningTriangleIconConfig);\n\nexports[\"default\"] = _default;\n//# sourceMappingURL=warning-triangle-icon.js.map","/**\n * Creates a data-driven-form schema for sharing/un-sharing portfolio\n */\nconst newShareSchema = (loadGroupOptions, permissionVerbs) => [\n  {\n    component: 'sub-form',\n    description: 'Invite group',\n    name: 'new_share',\n    key: '1',\n    fields: [\n      {\n        name: 'group-selection',\n        component: 'share-group-select',\n        inputName: 'group_uuid',\n        selectName: 'permissions',\n        loadOptions: loadGroupOptions,\n        isSearchable: true,\n        permissions: permissionVerbs\n      }\n    ]\n  }\n];\n\nconst groupListSchema = (groupFieldList) => [\n  {\n    component: 'sub-form',\n    description: 'Groups with access',\n    name: 'share_list',\n    key: 'share_list',\n    fields: groupFieldList\n  }\n];\n\nconst groupShareSchema = (groupShareInfo, permissionVerbs) => ({\n  component: 'sub-form',\n  name: `${groupShareInfo.group_name}`,\n  key: `${groupShareInfo.group_name}`,\n  fields: [\n    {\n      name: `${groupShareInfo.group_name}`,\n      label: `${groupShareInfo.group_name}`,\n      component: 'share-group-edit',\n      options: permissionVerbs,\n      isClearable: true\n    }\n  ]\n});\n\nexport const createPortfolioShareSchema = (\n  shareInfo,\n  loadGroupOptions,\n  permissionVerbs,\n  canShare,\n  canUnshare,\n  validate\n) => {\n  const formSchema = canShare\n    ? newShareSchema(loadGroupOptions, permissionVerbs, validate)\n    : [];\n  const groupInfoFields = shareInfo.map((group) =>\n    groupShareSchema(group, permissionVerbs)\n  );\n  const shareListSchema = canUnshare ? groupListSchema(groupInfoFields) : [];\n  const portfolioSchema = {\n    fields: [...formSchema, ...shareListSchema]\n  };\n  return portfolioSchema;\n};\n","import { getAxiosInstance, getPortfolioApi } from '../shared/user-login';\nimport { CATALOG_API_BASE } from '../../utilities/constants';\n\nconst axiosInstance = getAxiosInstance();\nconst userApi = getPortfolioApi();\n\nexport async function getShareInfo(portfolioId) {\n  return await axiosInstance.get(\n    `${CATALOG_API_BASE}/portfolios/${portfolioId}/share_info`\n  );\n}\n\nexport function sharePortfolio(data) {\n  let policy = {\n    permissions: data.permissions.split(','),\n    group_uuids: [data.group_uuid]\n  };\n  return userApi.sharePortfolio(data.id, policy);\n}\n\nexport function unsharePortfolio(data) {\n  let policy = {\n    permissions: data.permissions,\n    group_uuids: [data.group_uuid]\n  };\n  return userApi.unsharePortfolio(data.id, policy);\n}\n","import * as ShareHelper from '../../helpers/share/share-helper';\nimport * as ActionTypes from '../action-types';\n\nexport const fetchShareInfo = (portfolioId) => ({\n  type: ActionTypes.QUERY_PORTFOLIO,\n  payload: ShareHelper.getShareInfo(portfolioId)\n});\n\nexport const sharePortfolio = (portfolioData) => ({\n  type: ActionTypes.SHARE_PORTFOLIO,\n  payload: ShareHelper.sharePortfolio({\n    ...portfolioData\n  }),\n  meta: {\n    notifications: {\n      fulfilled: {\n        variant: 'success',\n        title: 'Success sharing portfolio',\n        description: 'The portfolio was shared successfully.'\n      }\n    }\n  }\n});\n\nexport const unsharePortfolio = (portfolioData) => ({\n  type: ActionTypes.UNSHARE_PORTFOLIO,\n  payload: ShareHelper.unsharePortfolio({\n    ...portfolioData\n  }),\n  meta: {\n    notifications: {\n      fulfilled: {\n        variant: 'success',\n        title: 'Success unsharing portfolio',\n        description: 'The portfolio was unshared successfully.'\n      }\n    }\n  }\n});\n","import { getAxiosInstance, getRbacGroupApi } from '../shared/user-login';\nimport { RBAC_API_BASE } from '../../utilities/constants';\n\nconst api = getRbacGroupApi();\n\nexport async function getRbacGroups() {\n  return await api.listGroups();\n}\n\nexport const fetchFilterGroups = (filterValue = '') =>\n  getAxiosInstance()\n    .get(\n      `${RBAC_API_BASE}/groups/${\n        filterValue.length > 0 ? `?name=${filterValue}` : ''\n      }`\n    )\n    .then(({ data }) =>\n      data.map(({ uuid, name }) => ({ label: name, value: uuid }))\n    );\n","import React, { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport FormRenderer from '../common/form-renderer';\nimport { useDispatch, useSelector } from 'react-redux';\nimport {\n  Modal,\n  TextContent,\n  Text,\n  TextVariants,\n  Stack,\n  StackItem\n} from '@patternfly/react-core';\nimport { createPortfolioShareSchema } from '../../forms/portfolio-share-form.schema';\nimport { fetchPortfolios } from '../../redux/actions/portfolio-actions';\nimport {\n  fetchShareInfo,\n  sharePortfolio,\n  unsharePortfolio\n} from '../../redux/actions/share-actions';\nimport { ShareLoader } from '../../presentational-components/shared/loader-placeholders';\nimport { permissionOptions, permissionValues } from '../../utilities/constants';\nimport { fetchFilterGroups } from '../../helpers/rbac/rbac-helper';\nimport useQuery from '../../utilities/use-query';\nimport useEnhancedHistory from '../../utilities/use-enhanced-history';\nimport { UnauthorizedRedirect } from '../error-pages/error-redirects';\n\nconst SharePortfolioModal = ({\n  closeUrl,\n  removeQuery,\n  viewState,\n  portfolioName = () => ''\n}) => {\n  const dispatch = useDispatch();\n  const { push } = useEnhancedHistory({ removeQuery, keepHash: true });\n  const [{ portfolio }, search] = useQuery(['portfolio']);\n  const [isFetching, setFetching] = useState(true);\n  const initialValues = useSelector(\n    ({ portfolioReducer: { selectedPortfolio } }) => selectedPortfolio\n  );\n  const { shareInfo } = useSelector(({ shareReducer: { shareInfo } }) => ({\n    shareInfo\n  }));\n  useEffect(() => {\n    setFetching(true);\n    dispatch(fetchShareInfo(portfolio))\n      .then(() => setFetching(false))\n      .catch(() => setFetching(false));\n  }, []);\n\n  const initialShares = () => {\n    let initialGroupShareList = shareInfo.map((group) => {\n      const groupPermissions = group.permissions.filter(\n        (permission) => permissionValues.indexOf(permission) > -1\n      );\n      const groupName = group.group_name;\n      let options = permissionOptions.find(\n        (perm) => perm.value === groupPermissions.sort().join(',')\n      );\n      return {\n        [groupName]: options ? options.value : 'Unknown'\n      };\n    });\n    let initialShareList = initialGroupShareList.reduce(\n      (acc, curr) => ({ ...acc, ...curr }),\n      {}\n    );\n    return initialShareList;\n  };\n\n  const loadGroupOptions = (inputValue) => fetchFilterGroups(inputValue);\n\n  const onSubmit = (data) => {\n    let sharePromises = [];\n    if (data.group_uuid && data.permissions) {\n      sharePromises.push(dispatch(sharePortfolio({ id: portfolio, ...data })));\n    }\n\n    shareInfo.forEach((share) => {\n      let initialPerm = share.permissions.sort().join(',');\n      if (data[share.group_name] !== initialPerm) {\n        if (!data[share.group_name]) {\n          const sharePermissions = share.permissions.filter(\n            (permission) => permissionValues.indexOf(permission) > -1\n          );\n          sharePromises.push(\n            dispatch(\n              unsharePortfolio({\n                id: portfolio,\n                permissions: sharePermissions,\n                group_uuid: share.group_uuid\n              })\n            )\n          );\n        } else {\n          if (\n            share.permissions.length > data[share.group_name].split(',').length\n          ) {\n            sharePromises.push(\n              dispatch(\n                unsharePortfolio({\n                  id: portfolio,\n                  permissions: ['update'],\n                  group_uuid: share.group_uuid\n                })\n              )\n            );\n          } else {\n            sharePromises.push(\n              dispatch(\n                sharePortfolio({\n                  id: portfolio,\n                  permissions: data[share.group_name],\n                  group_uuid: share.group_uuid\n                })\n              )\n            );\n          }\n        }\n      }\n    });\n    push({ pathname: closeUrl, search });\n\n    return Promise.all(sharePromises).then(() =>\n      dispatch(fetchPortfolios(viewState))\n    );\n  };\n\n  const onCancel = () => push({ pathname: closeUrl, search });\n\n  if (\n    initialValues?.metadata?.user_capabilities?.share === false &&\n    initialValues?.metadata?.user_capabilities?.unshare === false\n  ) {\n    return <UnauthorizedRedirect />;\n  }\n\n  const validateShares = (values) => {\n    const errors = {};\n    if (values.group_uuid && !values.permissions) {\n      errors.permissions = 'Select the share permissions';\n    }\n\n    if (values.permissions && !values.group_uuid) {\n      errors.group_uuid = 'Select a group';\n    }\n\n    return errors;\n  };\n\n  return (\n    <Modal title={'Share portfolio'} isOpen isSmall onClose={onCancel}>\n      {isFetching && <ShareLoader />}\n      {!isFetching && (\n        <Stack gutter=\"md\">\n          <StackItem>\n            <TextContent>\n              <Text component={TextVariants.h6}>\n                {`Share ${portfolioName(portfolio)} portfolio`}\n              </Text>\n            </TextContent>\n          </StackItem>\n          <StackItem>\n            <FormRenderer\n              schema={createPortfolioShareSchema(\n                shareInfo,\n                loadGroupOptions,\n                permissionOptions,\n                initialValues?.metadata?.user_capabilities?.share !== false,\n                initialValues?.metadata?.user_capabilities?.unshare !== false\n              )}\n              schemaType=\"default\"\n              onSubmit={onSubmit}\n              onCancel={onCancel}\n              validate={validateShares}\n              initialValues={{ ...initialValues, ...initialShares() }}\n              formContainer=\"modal\"\n              buttonsLabels={{ submitLabel: 'Apply' }}\n            />\n          </StackItem>\n        </Stack>\n      )}\n    </Modal>\n  );\n};\n\nSharePortfolioModal.propTypes = {\n  closeUrl: PropTypes.string.isRequired,\n  removeQuery: PropTypes.bool,\n  portfolioName: PropTypes.func,\n  viewState: PropTypes.shape({\n    count: PropTypes.number,\n    limit: PropTypes.number,\n    offset: PropTypes.number,\n    filter: PropTypes.string\n  })\n};\n\nexport default SharePortfolioModal;\n","import { componentTypes } from '@data-driven-forms/react-form-renderer';\nimport { DEFAULT_MAX_LENGTH } from '../utilities/constants';\n\nimport asyncFormValidator from '../utilities/async-form-validator';\nimport { fetchPortfolioByName } from '../helpers/portfolio/portfolio-helper';\n\nexport const validateName = (name, portfolioId) =>\n  fetchPortfolioByName(name)\n    .then(({ data }) => {\n      if (!name || name.trim().length === 0) {\n        return 'Required';\n      }\n\n      return data.find(\n        (portfolio) => portfolio.name === name && portfolio.id !== portfolioId\n      )\n        ? 'Name has already been taken'\n        : undefined;\n    })\n    .catch((error) => error.data);\n\nconst debouncedValidator = asyncFormValidator(validateName);\n\n/**\n * Creates a data-driven-form schema for adding/editing portfolio\n * @param {bool} newRecord sets the variant of portfolio form\n * @param openApiSchema\n * @param portfolioId\n */\nexport const createPortfolioSchema = (\n  newRecord,\n  openApiSchema,\n  portfolioId\n) => {\n  return {\n    fields: [\n      {\n        label: 'Name',\n        name: 'name',\n        component: componentTypes.TEXT_FIELD,\n        isRequired: true,\n        maxLength:\n          openApiSchema?.components?.schemas?.Portfolio?.properties?.name\n            ?.maxLength || DEFAULT_MAX_LENGTH,\n        validate: [(value) => debouncedValidator(value, portfolioId)]\n      },\n      {\n        label: 'Description',\n        component: componentTypes.TEXTAREA,\n        name: 'description'\n      }\n    ]\n  };\n};\n","import React, { useContext, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Modal } from '@patternfly/react-core';\nimport { Spinner } from '@patternfly/react-core/dist/js/components/Spinner/Spinner';\nimport FormRenderer from '../common/form-renderer';\nimport { createPortfolioSchema } from '../../forms/portfolio-form.schema';\nimport {\n  addPortfolio,\n  updatePortfolio\n} from '../../redux/actions/portfolio-actions';\nimport useQuery from '../../utilities/use-query';\nimport { getPortfolioFromState } from '../../helpers/portfolio/portfolio-helper';\nimport useEnhancedHistory from '../../utilities/use-enhanced-history';\nimport SpinnerWrapper from '../../presentational-components/styled-components/spinner-wrapper';\nimport { UnauthorizedRedirect } from '../error-pages/error-redirects';\nimport { PORTFOLIO_ROUTE } from '../../constants/routes';\nimport UserContext from '../../user-context';\n\nconst AddPortfolioModal = ({ removeQuery, closeTarget, viewState }) => {\n  const dispatch = useDispatch();\n  const [submitting, setSubmitting] = useState(false);\n  const { openApiSchema: openApiSchema } = useContext(UserContext);\n  const [{ portfolio: portfolioId }] = useQuery(['portfolio']);\n  const { push } = useEnhancedHistory({ removeQuery, keepHash: true });\n  const initialValues = useSelector(({ portfolioReducer }) =>\n    getPortfolioFromState(portfolioReducer, portfolioId)\n  );\n\n  const onAddPortfolio = async (data) => {\n    setSubmitting(true);\n    const newPortfolio = await dispatch(addPortfolio(data));\n    setSubmitting(false);\n    return newPortfolio && newPortfolio.value && newPortfolio.value.id\n      ? push({\n          pathname: PORTFOLIO_ROUTE,\n          search: `?portfolio=${newPortfolio.value.id}`\n        })\n      : push(closeTarget);\n  };\n\n  const onSubmit = (data) => {\n    if (initialValues) {\n      push(closeTarget);\n      return dispatch(updatePortfolio(data, viewState));\n    } else {\n      return onAddPortfolio(data, viewState);\n    }\n  };\n\n  const editVariant =\n    portfolioId && initialValues && Object.keys(initialValues).length > 0;\n\n  if (initialValues?.metadata?.user_capabilities?.update === false) {\n    return <UnauthorizedRedirect />;\n  }\n\n  return (\n    <Modal\n      title={portfolioId ? 'Edit portfolio' : 'Create portfolio'}\n      isOpen\n      onClose={() => push(closeTarget)}\n      isSmall\n    >\n      {!portfolioId || editVariant ? (\n        <FormRenderer\n          schema={createPortfolioSchema(\n            !initialValues,\n            openApiSchema,\n            portfolioId\n          )}\n          schemaType=\"default\"\n          onSubmit={onSubmit}\n          onCancel={() => push(closeTarget)}\n          initialValues={{ ...initialValues }}\n          formContainer=\"modal\"\n          buttonsLabels={{ submitLabel: portfolioId ? 'Save' : 'Create' }}\n          disableSubmit={submitting ? ['pristine', 'diry'] : []}\n        />\n      ) : (\n        <SpinnerWrapper className=\"pf-u-m-md\">\n          <Spinner />\n        </SpinnerWrapper>\n      )}\n    </Modal>\n  );\n};\n\nAddPortfolioModal.propTypes = {\n  removeQuery: PropTypes.bool,\n  closeTarget: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.shape({\n      pathname: PropTypes.string.isRequired,\n      search: PropTypes.string\n    })\n  ]).isRequired,\n  viewState: PropTypes.shape({\n    count: PropTypes.number,\n    limit: PropTypes.number,\n    offset: PropTypes.number,\n    filter: PropTypes.string\n  })\n};\n\nexport default AddPortfolioModal;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from 'react-router-dom';\nimport {\n  Level,\n  LevelItem,\n  Text,\n  TextContent,\n  TextVariants\n} from '@patternfly/react-core';\nimport EllipsisTextContainer from '../styled-components/ellipsis-text-container';\nimport styled from 'styled-components';\n\nconst HeaderTitle = styled(LevelItem)`\n  max-width: calc(100% - 44px);\n`;\n\nconst PortfolioCardHeader = ({ id, to, portfolioName, headerActions }) => (\n  <Level>\n    <HeaderTitle className=\"pf-m-grow\">\n      <TextContent>\n        <Link to={to} id={`portfolio-link-${id}`}>\n          <Text\n            title={portfolioName}\n            className=\"pf-u-mb-0\"\n            component={TextVariants.h3}\n          >\n            <EllipsisTextContainer>{portfolioName}</EllipsisTextContainer>\n          </Text>\n        </Link>\n      </TextContent>\n    </HeaderTitle>\n    <LevelItem onClick={(event) => event.preventDefault()}>\n      {headerActions}\n    </LevelItem>\n  </Level>\n);\n\nPortfolioCardHeader.propTypes = {\n  portfolioName: PropTypes.string.isRequired,\n  headerActions: PropTypes.node,\n  id: PropTypes.string,\n  to: PropTypes.shape({\n    pathname: PropTypes.string.isRequired,\n    search: PropTypes.string.isRequired\n  }).isRequired\n};\n\nPortfolioCardHeader.defaultProps = {\n  headerActions: []\n};\n\nexport default PortfolioCardHeader;\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport ItemDetails from '../shared/card-common';\nimport {\n  CardHeader,\n  CardFooter,\n  Dropdown,\n  DropdownItem,\n  DropdownPosition,\n  KebabToggle,\n  Text,\n  TextContent,\n  TextVariants\n} from '@patternfly/react-core';\nimport { DateFormat } from '@redhat-cloud-services/frontend-components/components/DateFormat';\nimport PortfolioCardHeader from './portfolio-card-header';\n\nimport CatalogLink from '../../smart-components/common/catalog-link';\nimport {\n  SHARE_PORTFOLIO_ROUTE,\n  EDIT_PORTFOLIO_WORKFLOW_ROUTE,\n  EDIT_PORTFOLIO_ROUTE,\n  REMOVE_PORTFOLIO_ROUTE,\n  PORTFOLIO_ROUTE\n} from '../../constants/routes';\nimport {\n  StyledCard,\n  StyledGalleryItem\n} from '../styled-components/styled-gallery';\nimport { StyledCardBody } from '../styled-components/card';\n\nconst TO_DISPLAY = ['description'];\n\nconst HeaderActions = ({\n  portfolioId,\n  userCapabilities: { share, unshare, update, destroy, set_approval }\n}) => {\n  const [isOpen, setOpen] = useState(false);\n  const dropdownItems = [];\n  if (share || unshare) {\n    dropdownItems.push(\n      <DropdownItem\n        key=\"share-portfolio-action\"\n        id=\"share-portfolio-action\"\n        component={\n          <CatalogLink\n            searchParams={{ portfolio: portfolioId }}\n            pathname={SHARE_PORTFOLIO_ROUTE}\n            preserveHash\n          >\n            Share\n          </CatalogLink>\n        }\n      />\n    );\n  }\n\n  if (set_approval) {\n    dropdownItems.push(\n      <DropdownItem\n        key=\"workflow-portfolio-action\"\n        id=\"workflow-portfolio-action\"\n        component={\n          <CatalogLink\n            searchParams={{ portfolio: portfolioId }}\n            pathname={EDIT_PORTFOLIO_WORKFLOW_ROUTE}\n            preserveHash\n          >\n            Set approval\n          </CatalogLink>\n        }\n      />\n    );\n  }\n\n  if (update) {\n    dropdownItems.push(\n      <DropdownItem\n        key=\"edit-portfolio-action\"\n        id=\"edit-portfolio-action\"\n        component={\n          <CatalogLink\n            searchParams={{ portfolio: portfolioId }}\n            pathname={EDIT_PORTFOLIO_ROUTE}\n            preserveHash\n          >\n            Edit\n          </CatalogLink>\n        }\n      />\n    );\n  }\n\n  if (destroy) {\n    dropdownItems.push(\n      <DropdownItem\n        key=\"remove-portfolio-action\"\n        id=\"remove-portfolio-action\"\n        component={\n          <CatalogLink\n            searchParams={{ portfolio: portfolioId }}\n            pathname={REMOVE_PORTFOLIO_ROUTE}\n            preserveHash\n          >\n            Delete\n          </CatalogLink>\n        }\n      />\n    );\n  }\n\n  return dropdownItems.length === 0 ? null : (\n    <Dropdown\n      key=\"portfolio-dropdown\"\n      id={`portfolio-${portfolioId}-dropdown`}\n      isOpen={isOpen}\n      isPlain\n      onSelect={() => setOpen(false)}\n      position={DropdownPosition.right}\n      toggle={\n        <KebabToggle\n          id={`portfolio-${portfolioId}-toggle`}\n          onToggle={(isOpen) => setOpen(isOpen)}\n        />\n      }\n      dropdownItems={dropdownItems}\n    />\n  );\n};\n\nHeaderActions.propTypes = {\n  portfolioId: PropTypes.string.isRequired,\n  userCapabilities: PropTypes.shape({\n    destroy: PropTypes.bool,\n    update: PropTypes.bool,\n    share: PropTypes.bool,\n    unshare: PropTypes.bool,\n    set_approval: PropTypes.bool\n  }).isRequired\n};\n\nconst PortfolioCard = ({\n  imageUrl,\n  isDisabled,\n  name,\n  id,\n  metadata: { user_capabilities },\n  ...props\n}) => {\n  const to = {\n    pathname: PORTFOLIO_ROUTE,\n    search: `?portfolio=${id}`\n  };\n  return (\n    <StyledGalleryItem isDisabled={isDisabled}>\n      <StyledCard>\n        <CardHeader>\n          <PortfolioCardHeader\n            id={id}\n            to={to}\n            portfolioName={name}\n            headerActions={\n              <HeaderActions\n                portfolioId={id}\n                userCapabilities={user_capabilities}\n              />\n            }\n          />\n        </CardHeader>\n        <StyledCardBody>\n          <TextContent className=\"pf-u-mb-md\">\n            <Text component={TextVariants.small} className=\"pf-i-mb-sm\">\n              Last updated&nbsp;\n              <DateFormat\n                date={props.updated_at || props.created_at}\n                type=\"relative\"\n              />\n            </Text>\n            <Text component={TextVariants.small}>{props.owner}</Text>\n          </TextContent>\n          <ItemDetails\n            {...{ name, imageUrl, ...props }}\n            toDisplay={TO_DISPLAY}\n          />\n        </StyledCardBody>\n        <CardFooter />\n      </StyledCard>\n    </StyledGalleryItem>\n  );\n};\n\nPortfolioCard.propTypes = {\n  history: PropTypes.object,\n  imageUrl: PropTypes.string,\n  name: PropTypes.string,\n  id: PropTypes.string.isRequired,\n  updated_at: PropTypes.string,\n  created_at: PropTypes.string.isRequired,\n  owner: PropTypes.string,\n  isDisabled: PropTypes.bool,\n  metadata: PropTypes.shape({ user_capabilities: PropTypes.object.isRequired })\n    .isRequired\n};\n\nexport default PortfolioCard;\n","import { toolbarComponentTypes } from '../toolbar-mapper';\nimport { createSingleItemGroup, createLinkButton } from '../helpers';\nimport { hasPermission } from '../../helpers/shared/helpers';\n\nimport AsyncPagination from '../../smart-components/common/async-pagination';\n\nconst createPortfolioToolbarSchema = ({\n  meta,\n  fetchPortfolios,\n  userPermissions,\n  filterProps: { searchValue, onFilterChange, placeholder }\n}) => ({\n  fields: [\n    {\n      component: toolbarComponentTypes.TOP_TOOLBAR,\n      key: 'portfolios-top-toolbar',\n      fields: [\n        {\n          component: toolbarComponentTypes.TOP_TOOLBAR_TITLE,\n          key: 'portfolios-toolbar-title',\n          title: 'Portfolios',\n          noData: meta.noData\n        },\n        {\n          component: toolbarComponentTypes.LEVEL,\n          key: 'portfolios-actions',\n          fields: meta.noData\n            ? []\n            : [\n                {\n                  component: toolbarComponentTypes.TOOLBAR,\n                  key: 'main-portfolio-toolbar',\n                  fields: [\n                    createSingleItemGroup({\n                      groupName: 'filter-group',\n                      component: toolbarComponentTypes.FILTER_TOOLBAR_ITEM,\n                      key: 'filter-input',\n                      searchValue,\n                      onFilterChange,\n                      placeholder,\n                      isClearable: true\n                    }),\n                    createSingleItemGroup({\n                      hidden:\n                        meta.count === 0 ||\n                        !hasPermission(userPermissions, [\n                          'catalog:portfolios:create'\n                        ]),\n                      groupName: 'portfolio-button-group',\n                      key: 'create-portfolio',\n                      ...createLinkButton({\n                        pathname: '/portfolios/add-portfolio',\n                        variant: 'primary',\n                        key: 'create-portfolio-button',\n                        'aria-label': 'Create portfolio',\n                        title: 'Create'\n                      })\n                    })\n                  ]\n                },\n                {\n                  component: toolbarComponentTypes.LEVEL_ITEM,\n                  key: 'pagination-item',\n                  fields:\n                    meta.count > 0\n                      ? [\n                          {\n                            component: AsyncPagination,\n                            isCompact: true,\n                            key: 'portfolios-pagination',\n                            meta,\n                            apiRequest: fetchPortfolios\n                          }\n                        ]\n                      : []\n                }\n              ]\n        }\n      ]\n    }\n  ]\n});\n\nexport default createPortfolioToolbarSchema;\n","import React, { Fragment, useEffect, useReducer, useContext } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Route, useRouteMatch } from 'react-router-dom';\nimport { SearchIcon, WrenchIcon } from '@patternfly/react-icons';\nimport { Button } from '@patternfly/react-core';\n\nimport AddPortfolio from './add-portfolio-modal';\nimport SharePortfolio from './share-portfolio-modal';\nimport RemovePortfolio from './remove-portfolio-modal';\nimport EditApprovalWorkflow from '../../smart-components/common/edit-approval-workflow';\nimport { scrollToTop } from '../../helpers/shared/helpers';\nimport ToolbarRenderer from '../../toolbar/toolbar-renderer';\nimport ContentGallery from '../content-gallery/content-gallery';\nimport { defaultSettings } from '../../helpers/shared/pagination';\nimport { fetchPortfoliosWithState } from '../../redux/actions/portfolio-actions';\nimport PortfolioCard from '../../presentational-components/portfolio/porfolio-card';\nimport createPortfolioToolbarSchema from '../../toolbar/schemas/portfolios-toolbar.schema';\nimport ContentGalleryEmptyState, {\n  EmptyStatePrimaryAction\n} from '../../presentational-components/shared/content-gallery-empty-state';\nimport asyncFormValidator from '../../utilities/async-form-validator';\nimport { PORTFOLIO_RESOURCE_TYPE } from '../../utilities/constants';\nimport AsyncPagination from '../common/async-pagination';\nimport BottomPaginationContainer from '../../presentational-components/shared/bottom-pagination-container';\nimport {\n  PORTFOLIOS_ROUTE,\n  ADD_PORTFOLIO_ROUTE,\n  EDIT_PORTFOLIO_ROUTE,\n  REMOVE_PORTFOLIO_ROUTE,\n  SHARE_PORTFOLIO_ROUTE,\n  WORKFLOW_PORTFOLIO_ROUTE\n} from '../../constants/routes';\nimport UserContext from '../../user-context';\nimport { hasPermission } from '../../helpers/shared/helpers';\nimport useInitialUriHash from '../../routing/use-initial-uri-hash';\n\nconst debouncedFilter = asyncFormValidator(\n  (filter, dispatch, filteringCallback, meta = defaultSettings) => {\n    filteringCallback(true);\n    dispatch(fetchPortfoliosWithState({ ...meta, filter })).then(() =>\n      filteringCallback(false)\n    );\n  },\n  1000\n);\n\nconst initialState = {\n  filterValue: '',\n  isOpen: false,\n  isFetching: true,\n  isFiltering: false\n};\n\nconst portfoliosState = (state, action) => {\n  switch (action.type) {\n    case 'setFetching':\n      return { ...state, isFetching: action.payload };\n    case 'setFilterValue':\n      return { ...state, filterValue: action.payload };\n    case 'setFilteringFlag':\n      return { ...state, isFiltering: action.payload };\n  }\n\n  return state;\n};\n\nconst Portfolios = () => {\n  const viewState = useInitialUriHash();\n  const [{ filterValue, isFetching, isFiltering }, stateDispatch] = useReducer(\n    portfoliosState,\n    {\n      ...initialState,\n      filterValue: viewState?.portfolio?.filter || ''\n    }\n  );\n  const { data, meta } = useSelector(\n    ({ portfolioReducer: { portfolios } }) => portfolios\n  );\n  const match = useRouteMatch(PORTFOLIOS_ROUTE);\n  const dispatch = useDispatch();\n  const { permissions: userPermissions } = useContext(UserContext);\n\n  useEffect(() => {\n    dispatch(fetchPortfoliosWithState(viewState?.portfolio)).then(() =>\n      stateDispatch({ type: 'setFetching', payload: false })\n    );\n    scrollToTop();\n    insights.chrome.appNavClick({ id: 'portfolios', secondaryNav: true });\n  }, []);\n\n  const itemName = (id) =>\n    data.find((item) => item.id === id)?.name || 'portfolio';\n\n  const handleFilterItems = (value) => {\n    stateDispatch({ type: 'setFilterValue', payload: value });\n    debouncedFilter(\n      value,\n      dispatch,\n      (isFiltering) =>\n        stateDispatch({ type: 'setFilteringFlag', payload: isFiltering }),\n      {\n        ...meta,\n        offset: 0\n      }\n    );\n  };\n\n  const NoDataAction = () => (\n    <EmptyStatePrimaryAction\n      url={ADD_PORTFOLIO_ROUTE}\n      id=\"create-portfolio\"\n      label=\"Create portfolio\"\n      hasPermission={hasPermission(userPermissions, [\n        'catalog:portfolios:create'\n      ])}\n    />\n  );\n\n  const FilterAction = () => (\n    <Button variant=\"link\" onClick={() => handleFilterItems('')}>\n      Clear all filters\n    </Button>\n  );\n\n  const emptyStateProps = {\n    PrimaryAction: meta.noData ? NoDataAction : FilterAction,\n    title: meta.noData ? 'No portfolios' : 'No results found',\n    description: meta.noData\n      ? 'No portfolios match your filter criteria.'\n      : 'No results match the filter criteria. Remove all filters or clear all filters to show results.',\n    Icon: meta.noData ? WrenchIcon : SearchIcon\n  };\n\n  const galleryItems = data.map((item) => (\n    <PortfolioCard key={item.id} {...item} />\n  ));\n\n  return (\n    <Fragment>\n      <ToolbarRenderer\n        schema={createPortfolioToolbarSchema({\n          meta,\n          userPermissions,\n          fetchPortfolios: (_, options) =>\n            dispatch(\n              fetchPortfoliosWithState({ filter: filterValue, ...options })\n            ),\n          filterProps: {\n            searchValue: filterValue,\n            onFilterChange: handleFilterItems,\n            placeholder: 'Filter by portfolio'\n          }\n        })}\n      />\n      <Route exact path={[ADD_PORTFOLIO_ROUTE, EDIT_PORTFOLIO_ROUTE]}>\n        <AddPortfolio\n          removeQuery\n          viewState={viewState?.portfolio}\n          closeTarget={PORTFOLIOS_ROUTE}\n        />\n      </Route>\n      <Route exact path={REMOVE_PORTFOLIO_ROUTE}>\n        <RemovePortfolio viewState={viewState?.portfolio} />\n      </Route>\n      <Route exact path={SHARE_PORTFOLIO_ROUTE}>\n        <SharePortfolio\n          closeUrl={match.url}\n          querySelector=\"portfolio\"\n          removeQuery\n          viewState={viewState?.portfolio}\n          portfolioName={itemName}\n        />\n      </Route>\n      <Route exact path={WORKFLOW_PORTFOLIO_ROUTE}>\n        <EditApprovalWorkflow\n          pushParam={{ pathname: match.url }}\n          objectType={PORTFOLIO_RESOURCE_TYPE}\n          objectName={itemName}\n          querySelector=\"portfolio\"\n          removeQuery\n          keepHash\n        />\n      </Route>\n      <ContentGallery\n        items={galleryItems}\n        isLoading={isFetching || isFiltering}\n        renderEmptyState={() => (\n          <ContentGalleryEmptyState {...emptyStateProps} />\n        )}\n      />\n      {meta.count > 0 && (\n        <BottomPaginationContainer>\n          <AsyncPagination\n            meta={meta}\n            apiRequest={(_, options) =>\n              dispatch(\n                fetchPortfoliosWithState({ filter: filterValue, ...options })\n              )\n            }\n            dropDirection=\"up\"\n          />\n        </BottomPaginationContainer>\n      )}\n    </Fragment>\n  );\n};\n\nexport default Portfolios;\n"],"sourceRoot":""}