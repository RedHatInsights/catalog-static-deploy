{"version":3,"sources":["webpack:///./node_modules/@babel/runtime/helpers/extends.js","webpack:///./node_modules/awesome-imperative-promise/dist/index.es.js","webpack:///./node_modules/awesome-debounce-promise/dist/index.es.js","webpack:///./node_modules/awesome-only-resolves-last-promise/dist/index.es.js","webpack:///./src/utilities/async-form-validator.js","webpack:///./node_modules/debounce-promise/dist/index.js","webpack:///./node_modules/@babel/runtime/helpers/typeof.js","webpack:///./src/utilities/use-enhanced-history.js","webpack:///./src/presentational-components/styled-components/spinner-wrapper.js","webpack:///./src/forms/portfolio-form.schema.js","webpack:///./src/smart-components/portfolio/add-portfolio-modal.js"],"names":["_extends","module","exports","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","createImperativePromise","promiseArg","resolve","reject","wrappedPromise","Promise","_resolve","_reject","then","val","error","promise","value","reason","cancel","__assign","t","s","n","p","DefaultOptions","_args","_i","onlyResolvesLast","DebounceCache","config","debounceSingleton","debounceCache","_createDebouncedFunction","asyncFunction","cancelPrevious","debouncedFunc","func","wait","options","args","initialPromise","_a","getDebouncedFunction","finalOptions","debouncedFn","debounceTime","awesomeDebouncePromise","getWait","defer","deferred","fn","undefined","lastCallAt","timer","pendingArgs","currentWait","currentTime","Date","getTime","isCold","_len","Array","_key","leading","accumulate","result","concat","clearTimeout","push","setTimeout","flush","bind","argsIndex","results","thisDeferred","_typeof","obj","Symbol","iterator","constructor","removeSearchQuery","split","search","useEnhancedHistory","removeSearch","keepHash","history","useHistory","internalTarget","location","hash","SpinnerWrapper","styled","Bullseye","debouncedValidator","asyncFormValidator","name","portfolioId","fetchPortfolioByName","data","trim","find","portfolio","id","createPortfolioSchema","newRecord","openApiSchema","fields","label","component","componentTypes","TEXT_FIELD","isRequired","maxLength","components","schemas","Portfolio","properties","DEFAULT_MAX_LENGTH","validate","TEXTAREA","AddPortfolioModal","removeQuery","closeTarget","viewState","dispatch","useDispatch","useState","submitting","setSubmitting","isOpen","setIsOpen","useContext","UserContext","useQuery","initialValues","useSelector","portfolioReducer","getPortfolioFromState","onAddPortfolio","a","addPortfolio","newPortfolio","pathname","PORTFOLIO_ROUTE","editVariant","keys","metadata","user_capabilities","update","Modal","title","onClose","isSmall","schema","schemaType","onSubmit","updatePortfolio","onCancel","formContainer","buttonsLabels","submitLabel","disableSubmit","className","Spinner","propTypes","PropTypes","bool","oneOfType","string","shape","count","number","limit","offset","filter"],"mappings":"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","file":"js/add-portfolio~31ecd969.911c10e0097f02f78533.js","sourcesContent":["function _extends() {\n  module.exports = _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nmodule.exports = _extends;","function createImperativePromise(promiseArg) {\r\n    var resolve = null;\r\n    var reject = null;\r\n    var wrappedPromise = new Promise(function (_resolve, _reject) {\r\n        resolve = _resolve;\r\n        reject = _reject;\r\n    });\r\n    promiseArg && promiseArg.then(function (val) {\r\n        resolve && resolve(val);\r\n    }, function (error) {\r\n        reject && reject(error);\r\n    });\r\n    return {\r\n        promise: wrappedPromise,\r\n        resolve: function (value) {\r\n            resolve && resolve(value);\r\n        },\r\n        reject: function (reason) {\r\n            reject && reject(reason);\r\n        },\r\n        cancel: function () {\r\n            resolve = null;\r\n            reject = null;\r\n        }\r\n    };\r\n}\n\nexport { createImperativePromise };\n//# sourceMappingURL=index.es.js.map\n","import DebouncePromise from 'debounce-promise';\nimport { onlyResolvesLast } from 'awesome-only-resolves-last-promise';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\n\nvar DefaultOptions = {\r\n    // One distinct debounced function is created per key and added to an internal cache\r\n    // By default, the key is null, which means that all the calls\r\n    // will share the same debounced function\r\n    key: function () {\r\n        var _args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            _args[_i] = arguments[_i];\r\n        }\r\n        return null;\r\n    },\r\n    // By default, a debounced function will only resolve\r\n    // the last promise it returned\r\n    // Former calls will stay unresolved, so that you don't have\r\n    // to handle concurrency issues in your code\r\n    // Setting this to false means all returned promises will resolve to the last result\r\n    onlyResolvesLast: true,\r\n};\r\n// We create a debouncing function cache, because when wrapping the original function,\r\n// we may actually want to route the function call to different debounced functions depending function paameters\r\nvar DebounceCache = /** @class */ (function () {\r\n    function DebounceCache(config) {\r\n        this.config = config;\r\n        this.debounceSingleton = null;\r\n        this.debounceCache = {}; // when key feature is used\r\n    }\r\n    DebounceCache.prototype._createDebouncedFunction = function () {\r\n        var debouncedFunc = DebouncePromise(this.config.func, this.config.wait, this.config.options); // TODO TS\r\n        if (this.config.options.onlyResolvesLast) {\r\n            debouncedFunc = onlyResolvesLast(debouncedFunc);\r\n        }\r\n        return {\r\n            func: debouncedFunc,\r\n        };\r\n    };\r\n    DebounceCache.prototype.getDebouncedFunction = function (args) {\r\n        var _a;\r\n        var key = (_a = this.config.options).key.apply(_a, args);\r\n        if (key === null || typeof key === 'undefined') {\r\n            if (!this.debounceSingleton) {\r\n                this.debounceSingleton = this._createDebouncedFunction();\r\n            }\r\n            return this.debounceSingleton;\r\n        }\r\n        else {\r\n            if (!this.debounceCache[key]) {\r\n                this.debounceCache[key] = this._createDebouncedFunction();\r\n            }\r\n            return this.debounceCache[key];\r\n        }\r\n    };\r\n    return DebounceCache;\r\n}());\r\nfunction AwesomeDebouncePromise(func, wait, options) {\r\n    var finalOptions = __assign({}, DefaultOptions, options);\r\n    var debounceCache = new DebounceCache({\r\n        func: func,\r\n        wait: wait,\r\n        options: finalOptions,\r\n    });\r\n    var AwesomeDebouncePromiseWrapper = (function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        var debouncedFn = debounceCache.getDebouncedFunction(args).func;\r\n        return debouncedFn.apply(void 0, args);\r\n    }); // TODO fix TS\r\n    /*\r\n    AwesomeDebouncePromiseWrapper.cancel = (key?: string) => {\r\n  \n    };\r\n    */\r\n    return AwesomeDebouncePromiseWrapper;\r\n}\n\nexport default AwesomeDebouncePromise;\n//# sourceMappingURL=index.es.js.map\n","import { createImperativePromise } from 'awesome-imperative-promise';\n\n// see https://stackoverflow.com/a/54825370/82609\r\nfunction onlyResolvesLast(asyncFunction) {\r\n    var cancelPrevious = null;\r\n    var wrappedFunction = function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        cancelPrevious && cancelPrevious();\r\n        var initialPromise = asyncFunction.apply(void 0, args);\r\n        var _a = createImperativePromise(initialPromise), promise = _a.promise, cancel = _a.cancel;\r\n        cancelPrevious = cancel;\r\n        return promise;\r\n    };\r\n    return wrappedFunction; // TODO fix TS\r\n}\n\nexport { onlyResolvesLast };\n//# sourceMappingURL=index.es.js.map\n","import awesomeDebouncePromise from 'awesome-debounce-promise';\n\nexport default (\n  asyncFunction,\n  debounceTime = 250,\n  options = { onlyResolvesLast: false }\n) => awesomeDebouncePromise(asyncFunction, debounceTime, options);\n","'use strict';\n\n/* global setTimeout, clearTimeout */\n\nmodule.exports = function debounce(fn) {\n  var wait = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n  var lastCallAt = void 0;\n  var deferred = void 0;\n  var timer = void 0;\n  var pendingArgs = [];\n  return function debounced() {\n    var currentWait = getWait(wait);\n    var currentTime = new Date().getTime();\n\n    var isCold = !lastCallAt || currentTime - lastCallAt > currentWait;\n\n    lastCallAt = currentTime;\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    if (isCold && options.leading) {\n      return options.accumulate ? Promise.resolve(fn.call(this, [args])).then(function (result) {\n        return result[0];\n      }) : Promise.resolve(fn.call.apply(fn, [this].concat(args)));\n    }\n\n    if (deferred) {\n      clearTimeout(timer);\n    } else {\n      deferred = defer();\n    }\n\n    pendingArgs.push(args);\n    timer = setTimeout(flush.bind(this), currentWait);\n\n    if (options.accumulate) {\n      var argsIndex = pendingArgs.length - 1;\n      return deferred.promise.then(function (results) {\n        return results[argsIndex];\n      });\n    }\n\n    return deferred.promise;\n  };\n\n  function flush() {\n    var thisDeferred = deferred;\n    clearTimeout(timer);\n\n    Promise.resolve(options.accumulate ? fn.call(this, pendingArgs) : fn.apply(this, pendingArgs[pendingArgs.length - 1])).then(thisDeferred.resolve, thisDeferred.reject);\n\n    pendingArgs = [];\n    deferred = null;\n  }\n};\n\nfunction getWait(wait) {\n  return typeof wait === 'function' ? wait() : wait;\n}\n\nfunction defer() {\n  var deferred = {};\n  deferred.promise = new Promise(function (resolve, reject) {\n    deferred.resolve = resolve;\n    deferred.reject = reject;\n  });\n  return deferred;\n}\n//# sourceMappingURL=index.js.map","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;","import { useHistory } from 'react-router-dom';\n\nconst removeSearchQuery = (target) => {\n  if (typeof target === 'string') {\n    return target.split('?')[0];\n  }\n\n  if (typeof target === 'object') {\n    return {\n      ...target,\n      search: undefined\n    };\n  }\n\n  return target;\n};\n\n/**\n * Wrapper around useHistory hook which adds aditional settings to standard history methods\n * @param {Boolean} removeSearch if true, using history navigation methods will remove search string from path\n * @param {Boolean} keepHash if true, using history navigation methods will not remove hash from URL\n */\nconst useEnhancedHistory = ({ removeSearch, keepHash } = {}) => {\n  const history = useHistory();\n  return {\n    ...history,\n    push: (target) => {\n      let internalTarget = target;\n      if (keepHash && history.location.hash.length > 0) {\n        internalTarget =\n          typeof internalTarget === 'object'\n            ? { ...internalTarget, hash: history.location.hash }\n            : `${internalTarget}${history.location.hash}`;\n      }\n\n      if (removeSearch) {\n        return history.push(removeSearchQuery(internalTarget));\n      }\n\n      return history.push(internalTarget);\n    }\n  };\n};\n\nexport default useEnhancedHistory;\n","import styled from 'styled-components';\nimport { Bullseye } from '@patternfly/react-core/dist/js/layouts/Bullseye/Bullseye';\n\nconst SpinnerWrapper = styled(Bullseye)`\n  overflow: hidden;\n`;\n\nexport default SpinnerWrapper;\n","import componentTypes from '@data-driven-forms/react-form-renderer/dist/cjs/component-types';\nimport { DEFAULT_MAX_LENGTH } from '../utilities/constants';\n\nimport asyncFormValidator from '../utilities/async-form-validator';\nimport { fetchPortfolioByName } from '../helpers/portfolio/portfolio-helper';\n\nexport const validateName = (name, portfolioId) =>\n  fetchPortfolioByName(name).then(({ data }) => {\n    if (!name || name.trim().length === 0) {\n      throw 'Required';\n    }\n\n    const conflict = data.find(\n      (portfolio) => portfolio.name === name && portfolio.id !== portfolioId\n    );\n    if (conflict) {\n      throw 'Name has already been taken';\n    }\n  });\n\nconst debouncedValidator = asyncFormValidator(validateName);\n\n/**\n * Creates a data-driven-form schema for adding/editing portfolio\n * @param {bool} newRecord sets the variant of portfolio form\n * @param openApiSchema\n * @param portfolioId\n */\nexport const createPortfolioSchema = (\n  newRecord,\n  openApiSchema,\n  portfolioId\n) => {\n  return {\n    fields: [\n      {\n        label: 'Name',\n        name: 'name',\n        component: componentTypes.TEXT_FIELD,\n        isRequired: true,\n        maxLength:\n          openApiSchema?.components?.schemas?.Portfolio?.properties?.name\n            ?.maxLength || DEFAULT_MAX_LENGTH,\n        validate: [(value) => debouncedValidator(value, portfolioId)]\n      },\n      {\n        label: 'Description',\n        component: componentTypes.TEXTAREA,\n        name: 'description'\n      }\n    ]\n  };\n};\n","import React, { useContext, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Modal } from '@patternfly/react-core';\nimport { Spinner } from '@patternfly/react-core/dist/js/components/Spinner/Spinner';\nimport FormRenderer from '../common/form-renderer';\nimport { createPortfolioSchema } from '../../forms/portfolio-form.schema';\nimport {\n  addPortfolio,\n  updatePortfolio\n} from '../../redux/actions/portfolio-actions';\nimport useQuery from '../../utilities/use-query';\nimport { getPortfolioFromState } from '../../helpers/portfolio/portfolio-helper';\nimport useEnhancedHistory from '../../utilities/use-enhanced-history';\nimport SpinnerWrapper from '../../presentational-components/styled-components/spinner-wrapper';\nimport { UnauthorizedRedirect } from '../error-pages/error-redirects';\nimport { PORTFOLIO_ROUTE } from '../../constants/routes';\nimport UserContext from '../../user-context';\n\nconst AddPortfolioModal = ({ removeQuery, closeTarget, viewState }) => {\n  const dispatch = useDispatch();\n  const [submitting, setSubmitting] = useState(false);\n  const [isOpen, setIsOpen] = useState(true);\n  const { openApiSchema: openApiSchema } = useContext(UserContext);\n  const [{ portfolio: portfolioId }] = useQuery(['portfolio']);\n  const { push } = useEnhancedHistory({ removeQuery, keepHash: true });\n  const initialValues = useSelector(({ portfolioReducer }) =>\n    getPortfolioFromState(portfolioReducer, portfolioId)\n  );\n\n  const onAddPortfolio = async (data) => {\n    setSubmitting(true);\n    const newPortfolio = await dispatch(addPortfolio(data));\n    setSubmitting(false);\n    return newPortfolio && newPortfolio.value && newPortfolio.value.id\n      ? push({\n          pathname: PORTFOLIO_ROUTE,\n          search: `?portfolio=${newPortfolio.value.id}`\n        })\n      : push(closeTarget);\n  };\n\n  const onSubmit = (data) => {\n    if (initialValues) {\n      /**\n       * Fake the redirect by closing the modal\n       */\n      setIsOpen(false);\n      return dispatch(updatePortfolio(data, viewState)).then(() =>\n        /**\n         * Redirect only after the update was finished.\n         * This will ensure that API requests are triggered in correct order when chaning the router pathname\n         * */\n        push(closeTarget)\n      );\n    } else {\n      return onAddPortfolio(data, viewState);\n    }\n  };\n\n  const editVariant =\n    portfolioId && initialValues && Object.keys(initialValues).length > 0;\n\n  if (initialValues?.metadata?.user_capabilities?.update === false) {\n    return <UnauthorizedRedirect />;\n  }\n\n  return (\n    <Modal\n      title={portfolioId ? 'Edit portfolio' : 'Create portfolio'}\n      isOpen={isOpen}\n      onClose={() => push(closeTarget)}\n      isSmall\n    >\n      {!portfolioId || editVariant ? (\n        <FormRenderer\n          schema={createPortfolioSchema(\n            !initialValues,\n            openApiSchema,\n            portfolioId\n          )}\n          schemaType=\"default\"\n          onSubmit={onSubmit}\n          onCancel={() => push(closeTarget)}\n          initialValues={{ ...initialValues }}\n          formContainer=\"modal\"\n          buttonsLabels={{ submitLabel: portfolioId ? 'Save' : 'Create' }}\n          disableSubmit={submitting ? ['pristine', 'diry'] : []}\n        />\n      ) : (\n        <SpinnerWrapper className=\"pf-u-m-md\">\n          <Spinner />\n        </SpinnerWrapper>\n      )}\n    </Modal>\n  );\n};\n\nAddPortfolioModal.propTypes = {\n  removeQuery: PropTypes.bool,\n  closeTarget: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.shape({\n      pathname: PropTypes.string.isRequired,\n      search: PropTypes.string\n    })\n  ]).isRequired,\n  viewState: PropTypes.shape({\n    count: PropTypes.number,\n    limit: PropTypes.number,\n    offset: PropTypes.number,\n    filter: PropTypes.string\n  })\n};\n\nexport default AddPortfolioModal;\n"],"sourceRoot":""}