{"version":3,"sources":["webpack:///./src/utilities/async-form-validator.js","webpack:///./node_modules/awesome-imperative-promise/dist/index.es.js","webpack:///./node_modules/awesome-debounce-promise/dist/index.es.js","webpack:///./node_modules/awesome-only-resolves-last-promise/dist/index.es.js","webpack:///./node_modules/@patternfly/react-core/dist/js/components/TextInput/TextInput.js","webpack:///./node_modules/@babel/runtime/helpers/typeof.js","webpack:///./src/utilities/use-enhanced-history.js","webpack:///./node_modules/debounce-promise/dist/index.js","webpack:///./src/presentational-components/styled-components/spinner-wrapper.js","webpack:///./src/forms/portfolio-form.schema.js","webpack:///./src/smart-components/portfolio/add-portfolio-modal.js"],"names":["asyncFunction","debounceTime","options","onlyResolvesLast","awesomeDebouncePromise","createImperativePromise","promiseArg","resolve","reject","wrappedPromise","Promise","_resolve","_reject","then","val","error","promise","value","reason","cancel","__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","this","DefaultOptions","key","_args","_i","DebounceCache","config","debounceSingleton","debounceCache","_createDebouncedFunction","cancelPrevious","debouncedFunc","func","wait","args","initialPromise","_a","getDebouncedFunction","finalOptions","debouncedFn","defineProperty","exports","tslib_1","React","__importStar","form_control_1","__importDefault","react_styles_1","constants_1","TextInputTypes","TextInputBase","Component","props","super","handleChange","event","onChange","currentTarget","id","console","innerRef","className","type","validated","isReadOnly","isRequired","isDisabled","__rest","createElement","css","default","formControl","ValidatedOptions","success","modifiers","warning","required","disabled","readOnly","ref","displayName","defaultProps","text","TextInput","forwardRef","_typeof","obj","Symbol","iterator","module","constructor","removeSearchQuery","target","split","search","undefined","useEnhancedHistory","removeSearch","keepHash","history","useHistory","push","internalTarget","location","hash","getWait","defer","deferred","fn","lastCallAt","timer","pendingArgs","currentWait","currentTime","Date","getTime","isCold","_len","Array","_key","leading","accumulate","result","concat","clearTimeout","setTimeout","flush","bind","argsIndex","results","thisDeferred","SpinnerWrapper","styled","Bullseye","debouncedValidator","asyncFormValidator","name","portfolioId","fetchPortfolioByName","data","trim","find","portfolio","createPortfolioSchema","newRecord","openApiSchema","fields","label","component","componentTypes","TEXT_FIELD","maxLength","components","schemas","Portfolio","properties","DEFAULT_MAX_LENGTH","validate","TEXTAREA","AddPortfolioModal","removeQuery","closeTarget","viewState","formatMessage","useFormatMessage","dispatch","useDispatch","useState","submitting","setSubmitting","isOpen","setIsOpen","useContext","UserContext","useQuery","initialValues","useSelector","portfolioReducer","getPortfolioFromState","onAddPortfolio","a","notification","variant","title","portfolioMessages","addSuccessTitle","description","addSuccessDescription","b","chunks","addPortfolio","newPortfolio","pathname","PORTFOLIO_ROUTE","editVariant","keys","metadata","user_capabilities","update","Modal","modalEditTitle","modalCreateTitle","onClose","schema","schemaType","onSubmit","updatePortfolio","onCancel","formContainer","templateProps","submitLabel","actionMessages","save","labelMessages","create","disableSubmit","Spinner","propTypes","PropTypes","bool","oneOfType","string","shape","count","number","limit","offset","filter"],"mappings":"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","file":"js/add-portfolio~31ecd969.562ad953a630b7a38aa1.js","sourcesContent":["import awesomeDebouncePromise from 'awesome-debounce-promise';\n\nexport default (\n  asyncFunction,\n  debounceTime = 250,\n  options = { onlyResolvesLast: false }\n) => awesomeDebouncePromise(asyncFunction, debounceTime, options);\n","function createImperativePromise(promiseArg) {\r\n    var resolve = null;\r\n    var reject = null;\r\n    var wrappedPromise = new Promise(function (_resolve, _reject) {\r\n        resolve = _resolve;\r\n        reject = _reject;\r\n    });\r\n    promiseArg && promiseArg.then(function (val) {\r\n        resolve && resolve(val);\r\n    }, function (error) {\r\n        reject && reject(error);\r\n    });\r\n    return {\r\n        promise: wrappedPromise,\r\n        resolve: function (value) {\r\n            resolve && resolve(value);\r\n        },\r\n        reject: function (reason) {\r\n            reject && reject(reason);\r\n        },\r\n        cancel: function () {\r\n            resolve = null;\r\n            reject = null;\r\n        }\r\n    };\r\n}\n\nexport { createImperativePromise };\n//# sourceMappingURL=index.es.js.map\n","import DebouncePromise from 'debounce-promise';\nimport { onlyResolvesLast } from 'awesome-only-resolves-last-promise';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\n\nvar DefaultOptions = {\r\n    // One distinct debounced function is created per key and added to an internal cache\r\n    // By default, the key is null, which means that all the calls\r\n    // will share the same debounced function\r\n    key: function () {\r\n        var _args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            _args[_i] = arguments[_i];\r\n        }\r\n        return null;\r\n    },\r\n    // By default, a debounced function will only resolve\r\n    // the last promise it returned\r\n    // Former calls will stay unresolved, so that you don't have\r\n    // to handle concurrency issues in your code\r\n    // Setting this to false means all returned promises will resolve to the last result\r\n    onlyResolvesLast: true,\r\n};\r\n// We create a debouncing function cache, because when wrapping the original function,\r\n// we may actually want to route the function call to different debounced functions depending function paameters\r\nvar DebounceCache = /** @class */ (function () {\r\n    function DebounceCache(config) {\r\n        this.config = config;\r\n        this.debounceSingleton = null;\r\n        this.debounceCache = {}; // when key feature is used\r\n    }\r\n    DebounceCache.prototype._createDebouncedFunction = function () {\r\n        var debouncedFunc = DebouncePromise(this.config.func, this.config.wait, this.config.options); // TODO TS\r\n        if (this.config.options.onlyResolvesLast) {\r\n            debouncedFunc = onlyResolvesLast(debouncedFunc);\r\n        }\r\n        return {\r\n            func: debouncedFunc,\r\n        };\r\n    };\r\n    DebounceCache.prototype.getDebouncedFunction = function (args) {\r\n        var _a;\r\n        var key = (_a = this.config.options).key.apply(_a, args);\r\n        if (key === null || typeof key === 'undefined') {\r\n            if (!this.debounceSingleton) {\r\n                this.debounceSingleton = this._createDebouncedFunction();\r\n            }\r\n            return this.debounceSingleton;\r\n        }\r\n        else {\r\n            if (!this.debounceCache[key]) {\r\n                this.debounceCache[key] = this._createDebouncedFunction();\r\n            }\r\n            return this.debounceCache[key];\r\n        }\r\n    };\r\n    return DebounceCache;\r\n}());\r\nfunction AwesomeDebouncePromise(func, wait, options) {\r\n    var finalOptions = __assign({}, DefaultOptions, options);\r\n    var debounceCache = new DebounceCache({\r\n        func: func,\r\n        wait: wait,\r\n        options: finalOptions,\r\n    });\r\n    var AwesomeDebouncePromiseWrapper = (function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        var debouncedFn = debounceCache.getDebouncedFunction(args).func;\r\n        return debouncedFn.apply(void 0, args);\r\n    }); // TODO fix TS\r\n    /*\r\n    AwesomeDebouncePromiseWrapper.cancel = (key?: string) => {\r\n  \n    };\r\n    */\r\n    return AwesomeDebouncePromiseWrapper;\r\n}\n\nexport default AwesomeDebouncePromise;\n//# sourceMappingURL=index.es.js.map\n","import { createImperativePromise } from 'awesome-imperative-promise';\n\n// see https://stackoverflow.com/a/54825370/82609\r\nfunction onlyResolvesLast(asyncFunction) {\r\n    var cancelPrevious = null;\r\n    var wrappedFunction = function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        cancelPrevious && cancelPrevious();\r\n        var initialPromise = asyncFunction.apply(void 0, args);\r\n        var _a = createImperativePromise(initialPromise), promise = _a.promise, cancel = _a.cancel;\r\n        cancelPrevious = cancel;\r\n        return promise;\r\n    };\r\n    return wrappedFunction; // TODO fix TS\r\n}\n\nexport { onlyResolvesLast };\n//# sourceMappingURL=index.es.js.map\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst tslib_1 = require(\"tslib\");\nconst React = tslib_1.__importStar(require(\"react\"));\nconst form_control_1 = tslib_1.__importDefault(require(\"@patternfly/react-styles/css/components/FormControl/form-control\"));\nconst react_styles_1 = require(\"@patternfly/react-styles\");\nconst constants_1 = require(\"../../helpers/constants\");\nvar TextInputTypes;\n(function (TextInputTypes) {\n    TextInputTypes[\"text\"] = \"text\";\n    TextInputTypes[\"date\"] = \"date\";\n    TextInputTypes[\"datetimeLocal\"] = \"datetime-local\";\n    TextInputTypes[\"email\"] = \"email\";\n    TextInputTypes[\"month\"] = \"month\";\n    TextInputTypes[\"number\"] = \"number\";\n    TextInputTypes[\"password\"] = \"password\";\n    TextInputTypes[\"search\"] = \"search\";\n    TextInputTypes[\"tel\"] = \"tel\";\n    TextInputTypes[\"time\"] = \"time\";\n    TextInputTypes[\"url\"] = \"url\";\n})(TextInputTypes = exports.TextInputTypes || (exports.TextInputTypes = {}));\nclass TextInputBase extends React.Component {\n    constructor(props) {\n        super(props);\n        this.handleChange = (event) => {\n            if (this.props.onChange) {\n                this.props.onChange(event.currentTarget.value, event);\n            }\n        };\n        if (!props.id && !props['aria-label'] && !props['aria-labelledby']) {\n            // eslint-disable-next-line no-console\n            console.error('Text input:', 'Text input requires either an id or aria-label to be specified');\n        }\n    }\n    render() {\n        const _a = this.props, { innerRef, className, type, value, \n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        onChange, validated, isReadOnly, isRequired, isDisabled } = _a, props = tslib_1.__rest(_a, [\"innerRef\", \"className\", \"type\", \"value\", \"onChange\", \"validated\", \"isReadOnly\", \"isRequired\", \"isDisabled\"]);\n        return (React.createElement(\"input\", Object.assign({}, props, { className: react_styles_1.css(form_control_1.default.formControl, validated === constants_1.ValidatedOptions.success && form_control_1.default.modifiers.success, validated === constants_1.ValidatedOptions.warning && form_control_1.default.modifiers.warning, className), onChange: this.handleChange, type: type, value: value, \"aria-invalid\": validated === constants_1.ValidatedOptions.error, required: isRequired, disabled: isDisabled, readOnly: isReadOnly, ref: innerRef })));\n    }\n}\nexports.TextInputBase = TextInputBase;\nTextInputBase.displayName = 'TextInputBase';\nTextInputBase.defaultProps = {\n    'aria-label': null,\n    className: '',\n    isRequired: false,\n    validated: 'default',\n    isDisabled: false,\n    isReadOnly: false,\n    type: TextInputTypes.text,\n    onChange: () => undefined\n};\nexports.TextInput = React.forwardRef((props, ref) => (React.createElement(TextInputBase, Object.assign({}, props, { innerRef: ref }))));\n//# sourceMappingURL=TextInput.js.map","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;","import { useHistory } from 'react-router-dom';\n\nconst removeSearchQuery = (target) => {\n  if (typeof target === 'string') {\n    return target.split('?')[0];\n  }\n\n  if (typeof target === 'object') {\n    return {\n      ...target,\n      search: undefined\n    };\n  }\n\n  return target;\n};\n\n/**\n * Wrapper around useHistory hook which adds aditional settings to standard history methods\n * @param {Boolean} removeSearch if true, using history navigation methods will remove search string from path\n * @param {Boolean} keepHash if true, using history navigation methods will not remove hash from URL\n */\nconst useEnhancedHistory = ({ removeSearch, keepHash } = {}) => {\n  const history = useHistory();\n  return {\n    ...history,\n    push: (target) => {\n      let internalTarget = target;\n      if (keepHash && history.location.hash.length > 0) {\n        internalTarget =\n          typeof internalTarget === 'object'\n            ? { ...internalTarget, hash: history.location.hash }\n            : `${internalTarget}${history.location.hash}`;\n      }\n\n      if (removeSearch) {\n        return history.push(removeSearchQuery(internalTarget));\n      }\n\n      return history.push(internalTarget);\n    }\n  };\n};\n\nexport default useEnhancedHistory;\n","'use strict';\n\n/* global setTimeout, clearTimeout */\n\nmodule.exports = function debounce(fn) {\n  var wait = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n  var lastCallAt = void 0;\n  var deferred = void 0;\n  var timer = void 0;\n  var pendingArgs = [];\n  return function debounced() {\n    var currentWait = getWait(wait);\n    var currentTime = new Date().getTime();\n\n    var isCold = !lastCallAt || currentTime - lastCallAt > currentWait;\n\n    lastCallAt = currentTime;\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    if (isCold && options.leading) {\n      return options.accumulate ? Promise.resolve(fn.call(this, [args])).then(function (result) {\n        return result[0];\n      }) : Promise.resolve(fn.call.apply(fn, [this].concat(args)));\n    }\n\n    if (deferred) {\n      clearTimeout(timer);\n    } else {\n      deferred = defer();\n    }\n\n    pendingArgs.push(args);\n    timer = setTimeout(flush.bind(this), currentWait);\n\n    if (options.accumulate) {\n      var argsIndex = pendingArgs.length - 1;\n      return deferred.promise.then(function (results) {\n        return results[argsIndex];\n      });\n    }\n\n    return deferred.promise;\n  };\n\n  function flush() {\n    var thisDeferred = deferred;\n    clearTimeout(timer);\n\n    Promise.resolve(options.accumulate ? fn.call(this, pendingArgs) : fn.apply(this, pendingArgs[pendingArgs.length - 1])).then(thisDeferred.resolve, thisDeferred.reject);\n\n    pendingArgs = [];\n    deferred = null;\n  }\n};\n\nfunction getWait(wait) {\n  return typeof wait === 'function' ? wait() : wait;\n}\n\nfunction defer() {\n  var deferred = {};\n  deferred.promise = new Promise(function (resolve, reject) {\n    deferred.resolve = resolve;\n    deferred.reject = reject;\n  });\n  return deferred;\n}\n//# sourceMappingURL=index.js.map","import styled from 'styled-components';\nimport { Bullseye } from '@patternfly/react-core/dist/js/layouts/Bullseye/Bullseye';\n\nconst SpinnerWrapper = styled(Bullseye)`\n  overflow: hidden;\n`;\n\nexport default SpinnerWrapper;\n","import componentTypes from '@data-driven-forms/react-form-renderer/dist/cjs/component-types';\nimport { DEFAULT_MAX_LENGTH } from '../utilities/constants';\n\nimport asyncFormValidator from '../utilities/async-form-validator';\nimport { fetchPortfolioByName } from '../helpers/portfolio/portfolio-helper';\n\nexport const validateName = (name, portfolioId) =>\n  fetchPortfolioByName(name).then(({ data }) => {\n    if (!name || name.trim().length === 0) {\n      throw 'Required';\n    }\n\n    const conflict = data.find(\n      (portfolio) => portfolio.name === name && portfolio.id !== portfolioId\n    );\n    if (conflict) {\n      throw 'Name has already been taken';\n    }\n  });\n\nconst debouncedValidator = asyncFormValidator(validateName);\n\n/**\n * Creates a data-driven-form schema for adding/editing portfolio\n * @param {bool} newRecord sets the variant of portfolio form\n * @param openApiSchema\n * @param portfolioId\n */\nexport const createPortfolioSchema = (\n  newRecord,\n  openApiSchema,\n  portfolioId\n) => {\n  return {\n    fields: [\n      {\n        label: 'schemas.portfolio.name',\n        name: 'name',\n        component: componentTypes.TEXT_FIELD,\n        isRequired: true,\n        maxLength:\n          openApiSchema?.components?.schemas?.Portfolio?.properties?.name\n            ?.maxLength || DEFAULT_MAX_LENGTH,\n        validate: [(value) => debouncedValidator(value, portfolioId)]\n      },\n      {\n        label: 'schemas.portfolio.description',\n        component: componentTypes.TEXTAREA,\n        name: 'description'\n      }\n    ]\n  };\n};\n","import React, { useContext, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Modal } from '@patternfly/react-core';\nimport { Spinner } from '@patternfly/react-core/dist/js/components/Spinner/Spinner';\nimport FormRenderer from '../common/form-renderer';\nimport { createPortfolioSchema } from '../../forms/portfolio-form.schema';\nimport {\n  addPortfolio,\n  updatePortfolio\n} from '../../redux/actions/portfolio-actions';\nimport useQuery from '../../utilities/use-query';\nimport { getPortfolioFromState } from '../../helpers/portfolio/portfolio-helper';\nimport useEnhancedHistory from '../../utilities/use-enhanced-history';\nimport SpinnerWrapper from '../../presentational-components/styled-components/spinner-wrapper';\nimport { UnauthorizedRedirect } from '../error-pages/error-redirects';\nimport { PORTFOLIO_ROUTE } from '../../constants/routes';\nimport UserContext from '../../user-context';\nimport actionMessages from '../../messages/actions.messages';\nimport portfolioMessages from '../../messages/portfolio.messages';\nimport labelMessages from '../../messages/labels.messages';\nimport useFormatMessage from '../../utilities/use-format-message';\n\nconst AddPortfolioModal = ({ removeQuery, closeTarget, viewState }) => {\n  const formatMessage = useFormatMessage();\n  const dispatch = useDispatch();\n  const [submitting, setSubmitting] = useState(false);\n  const [isOpen, setIsOpen] = useState(true);\n  const { openApiSchema: openApiSchema } = useContext(UserContext);\n  const [{ portfolio: portfolioId }] = useQuery(['portfolio']);\n  const { push } = useEnhancedHistory({ removeQuery, keepHash: true });\n  const initialValues = useSelector(({ portfolioReducer }) =>\n    getPortfolioFromState(portfolioReducer, portfolioId)\n  );\n\n  const onAddPortfolio = async (data) => {\n    setSubmitting(true);\n    const notification = {\n      variant: 'success',\n      title: formatMessage(portfolioMessages.addSuccessTitle),\n      description: formatMessage(portfolioMessages.addSuccessDescription, {\n        name: data.name,\n        // eslint-disable-next-line react/display-name\n        b: (chunks) => <b key=\"strong\">{chunks}</b>\n      })\n    };\n    const newPortfolio = await dispatch(addPortfolio(data, notification));\n    setSubmitting(false);\n    return newPortfolio && newPortfolio.value && newPortfolio.value.id\n      ? push({\n          pathname: PORTFOLIO_ROUTE,\n          search: `?portfolio=${newPortfolio.value.id}`\n        })\n      : push(closeTarget);\n  };\n\n  const onSubmit = (data) => {\n    if (initialValues) {\n      /**\n       * Fake the redirect by closing the modal\n       */\n      setIsOpen(false);\n      return dispatch(updatePortfolio(data, viewState)).then(() =>\n        /**\n         * Redirect only after the update was finished.\n         * This will ensure that API requests are triggered in correct order when chaning the router pathname\n         * */\n        push(closeTarget)\n      );\n    } else {\n      return onAddPortfolio(data, viewState);\n    }\n  };\n\n  const editVariant =\n    portfolioId && initialValues && Object.keys(initialValues).length > 0;\n\n  if (initialValues?.metadata?.user_capabilities?.update === false) {\n    return <UnauthorizedRedirect />;\n  }\n\n  return (\n    <Modal\n      title={\n        portfolioId\n          ? formatMessage(portfolioMessages.modalEditTitle)\n          : formatMessage(portfolioMessages.modalCreateTitle)\n      }\n      isOpen={isOpen}\n      onClose={() => push(closeTarget)}\n      variant=\"small\"\n    >\n      {!portfolioId || editVariant ? (\n        <FormRenderer\n          schema={createPortfolioSchema(\n            !initialValues,\n            openApiSchema,\n            portfolioId\n          )}\n          schemaType=\"default\"\n          onSubmit={onSubmit}\n          onCancel={() => push(closeTarget)}\n          initialValues={{ ...initialValues }}\n          formContainer=\"modal\"\n          templateProps={{\n            submitLabel: portfolioId\n              ? formatMessage(actionMessages.save)\n              : formatMessage(labelMessages.create)\n          }}\n          disableSubmit={submitting ? ['pristine', 'diry'] : []}\n        />\n      ) : (\n        <SpinnerWrapper className=\"pf-u-m-md\">\n          <Spinner />\n        </SpinnerWrapper>\n      )}\n    </Modal>\n  );\n};\n\nAddPortfolioModal.propTypes = {\n  removeQuery: PropTypes.bool,\n  closeTarget: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.shape({\n      pathname: PropTypes.string.isRequired,\n      search: PropTypes.string\n    })\n  ]).isRequired,\n  viewState: PropTypes.shape({\n    count: PropTypes.number,\n    limit: PropTypes.number,\n    offset: PropTypes.number,\n    filter: PropTypes.string\n  })\n};\n\nexport default AddPortfolioModal;\n"],"sourceRoot":""}