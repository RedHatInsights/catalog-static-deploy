{"version":3,"sources":["webpack:///./src/forms/portfolio-share-form.schema.ts","webpack:///./src/helpers/share/share-helper.ts","webpack:///./src/redux/actions/share-actions.ts","webpack:///./src/helpers/rbac/rbac-helper.ts","webpack:///./src/helpers/portfolio/share-portfolio-message.ts","webpack:///./src/smart-components/portfolio/share-portfolio-modal.tsx","webpack:///./src/utilities/use-enhanced-history.ts","webpack:///./src/messages/filtering.messages.ts","webpack:///./node_modules/lodash/isEqual.js","webpack:///./node_modules/lodash/_assocIndexOf.js","webpack:///./node_modules/lodash/eq.js","webpack:///./node_modules/lodash/_baseIsEqual.js","webpack:///./node_modules/lodash/_Stack.js","webpack:///./node_modules/lodash/_overArg.js","webpack:///./node_modules/lodash/isBuffer.js","webpack:///./node_modules/lodash/isTypedArray.js","webpack:///./node_modules/lodash/_baseIsEqualDeep.js","webpack:///./node_modules/lodash/_listCacheClear.js","webpack:///./node_modules/lodash/_listCacheDelete.js","webpack:///./node_modules/lodash/_listCacheGet.js","webpack:///./node_modules/lodash/_listCacheHas.js","webpack:///./node_modules/lodash/_listCacheSet.js","webpack:///./node_modules/lodash/_equalArrays.js","webpack:///./node_modules/lodash/_arraySome.js","webpack:///./node_modules/lodash/_equalByTag.js","webpack:///./node_modules/lodash/_equalObjects.js","webpack:///./node_modules/lodash/_getAllKeys.js","webpack:///./node_modules/lodash/_getTag.js"],"names":["newShareSchema","loadGroupOptions","permissionVerbs","component","description","name","key","fields","loadOptions","isSearchable","permissions","groupShareSchema","createPortfolioShareSchema","canShare","canUnshare","axiosInstance","userApi","getShareInfo","portfolioId","get","portfolioData","type","payload","data","policy","split","group_uuids","group_uuid","sharePortfolio","id","unsharePortfolio","groupMessage","groupNames","formatMessage","length","shareSuccessTwoGroup","group1","group2","shareSuccessMultipleGroups","count","shareData","initialGroups","removedGroups","newGroups","portfolioName","title","shareSuccessTitle","changedPermissions","filter","originalGroup","find","group","unshared","shared","shareSuccessTitleOnlyUnsharing","shareSuccessDescriptionOnlyUnsharing","map","b","shareSuccessTitleOnlySharing","shareSuccessDescriptionOnlySharing","shareSuccessTitleOnlyChaningPermissions","shareSuccessDescriptionOnlyChaningPermissions","closeUrl","removeSearch","viewState","dispatch","push","keepHash","portfolio","search","isFetching","setFetching","portfolioReducer","selectedPortfolio","isLoading","initialValues","shareInfo","then","catch","onCancel","pathname","metadata","user_capabilities","share","unshare","isLoadingFinal","Modal","portfolioShareTitle","isOpen","variant","onClose","Stack","hasGutter","StackItem","TextContent","Text","portfolioShareDescription","strong","chunks","schema","inputValue","filterValue","uuid","label","value","onSubmit","formApi","getState","item","forEach","initialEntry","groupName","createSharePromise","sharePromises","rest","join","Promise","all","dismissable","validate","values","errors","portfolioSharePermissions","portfolioShareGroups","groupPermissions","permission","indexOf","group_name","options","perm","sort","unknown","templateProps","disableSubmit","submitLabel","portfolioShareApply","history","target","internalTarget","location","hash","undefined","removeSearchQuery","filteringMessages","noItems","defaultMessage","filterByProduct","noResults","noResultsDescription","clearFilters","noProducts","noRecords","filterByTitle","noResultsFound","noResult","baseIsEqual","module","exports","other","eq","array","baseIsEqualDeep","isObjectLike","bitmask","customizer","stack","listCacheClear","listCacheDelete","listCacheGet","listCacheHas","listCacheSet","ListCache","entries","index","this","clear","entry","set","prototype","has","func","transform","arg","equalArrays","equalByTag","equalObjects","getTag","isArray","isBuffer","isTypedArray","objectTag","hasOwnProperty","Object","object","equalFunc","objIsArr","othIsArr","objTag","othTag","objIsObj","othIsObj","isSameTag","objIsWrapped","call","othIsWrapped","objUnwrapped","othUnwrapped","__data__","size","assocIndexOf","splice","Array","pop","SetCache","arraySome","cacheHas","isPartial","arrLength","othLength","stacked","result","seen","arrValue","othValue","compared","othIndex","predicate","getAllKeys","objProps","objLength","skipCtor","objValue","objCtor","constructor","othCtor","nativeKeys","overArg","keys","nativeObjectToString","toString"],"mappings":"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","file":"js/share-portfolio~31ecd969.469527599368549b5508.js","sourcesContent":["import Field from '@data-driven-forms/react-form-renderer/dist/cjs/field';\nimport Schema from '@data-driven-forms/react-form-renderer/dist/cjs/schema';\nimport { SelectOptions } from '../types/common-types';\n\n/**\n * Creates a data-driven-form schema for sharing/un-sharing portfolio\n */\nconst newShareSchema = (\n  loadGroupOptions: (inputValue?: string) => Promise<SelectOptions>,\n  permissionVerbs: SelectOptions\n): Field[] => [\n  {\n    component: 'sub-form',\n    description: 'share.new.description',\n    name: 'new_share',\n    key: '1',\n    fields: [\n      {\n        name: 'group-selection',\n        component: 'share-group-select',\n        loadOptions: loadGroupOptions,\n        isSearchable: true,\n        permissions: permissionVerbs\n      }\n    ]\n  }\n];\n\nconst groupShareSchema = (permissionVerbs: SelectOptions): Field[] => [\n  {\n    component: 'sub-form',\n    name: 'current-groups-sub-form',\n    fields: [\n      {\n        name: 'shared-groups',\n        permissionVerbs,\n        component: 'share-group-edit'\n      }\n    ]\n  }\n];\n\nexport const createPortfolioShareSchema = (\n  loadGroupOptions: (inputValue?: string) => Promise<SelectOptions>,\n  permissionVerbs: SelectOptions,\n  canShare: boolean,\n  canUnshare: boolean\n): Schema => {\n  const portfolioSchema = {\n    fields: [\n      ...(canShare ? newShareSchema(loadGroupOptions, permissionVerbs) : []),\n      ...(canUnshare ? groupShareSchema(permissionVerbs) : [])\n    ]\n  };\n  return portfolioSchema;\n};\n","import { getAxiosInstance, getPortfolioApi } from '../shared/user-login';\nimport { CATALOG_API_BASE } from '../../utilities/constants';\nimport {\n  ShareInfo,\n  SharePolicy,\n  SharePolicyPermissionsEnum,\n  UnsharePolicyPermissionsEnum,\n  UnsharePolicy\n} from '@redhat-cloud-services/catalog-client';\n\nconst axiosInstance = getAxiosInstance();\nconst userApi = getPortfolioApi();\n\nexport const getShareInfo = (portfolioId: string): Promise<ShareInfo> =>\n  axiosInstance.get(`${CATALOG_API_BASE}/portfolios/${portfolioId}/share_info`);\n\nexport interface ShareData<T = SharePolicyPermissionsEnum> {\n  permissions: T;\n  group_uuid: string;\n  id: string;\n}\nexport const sharePortfolio = (data: ShareData): Promise<void> => {\n  const policy: SharePolicy = {\n    permissions: data.permissions.split(',') as SharePolicyPermissionsEnum[],\n    group_uuids: [data.group_uuid]\n  };\n  return (userApi.sharePortfolio(data.id, policy) as unknown) as Promise<void>;\n};\n\nexport const unsharePortfolio = (\n  data: ShareData<UnsharePolicyPermissionsEnum[]>\n): Promise<void> => {\n  const policy: UnsharePolicy = {\n    permissions: data.permissions,\n    group_uuids: [data.group_uuid]\n  };\n  return (userApi.unsharePortfolio(data.id, policy) as unknown) as Promise<\n    void\n  >;\n};\n","import {\n  ShareInfo,\n  UnsharePolicyPermissionsEnum\n} from '@redhat-cloud-services/catalog-client';\nimport * as ShareHelper from '../../helpers/share/share-helper';\nimport { AsyncMiddlewareAction } from '../../types/redux';\nimport * as ActionTypes from '../action-types';\n\nexport const fetchShareInfo = (\n  portfolioId: string\n): AsyncMiddlewareAction<ShareInfo> => ({\n  type: ActionTypes.QUERY_PORTFOLIO,\n  payload: ShareHelper.getShareInfo(portfolioId)\n});\n\nexport const sharePortfolio = (\n  portfolioData: ShareHelper.ShareData\n): AsyncMiddlewareAction<void> => ({\n  type: ActionTypes.SHARE_PORTFOLIO,\n  payload: ShareHelper.sharePortfolio({\n    ...portfolioData\n  })\n});\n\nexport const unsharePortfolio = (\n  portfolioData: ShareHelper.ShareData<UnsharePolicyPermissionsEnum[]>\n): AsyncMiddlewareAction<void> => ({\n  type: ActionTypes.UNSHARE_PORTFOLIO,\n  payload: ShareHelper.unsharePortfolio({\n    ...portfolioData\n  })\n});\n","import { getAxiosInstance, getRbacGroupApi } from '../shared/user-login';\nimport { RBAC_API_BASE } from '../../utilities/constants';\nimport { GroupPagination } from '@redhat-cloud-services/rbac-client';\nimport { SelectOptions } from '../../types/common-types';\n\nconst api = getRbacGroupApi();\n\nexport const getRbacGroups = (): Promise<GroupPagination> =>\n  (api.listGroups() as unknown) as Promise<GroupPagination>;\n\nexport const fetchFilterGroups = (filterValue = ''): Promise<SelectOptions> =>\n  getAxiosInstance()\n    .get(\n      `${RBAC_API_BASE}/groups/${\n        filterValue.length > 0 ? `?name=${filterValue}` : ''\n      }`\n    )\n    .then(({ data }: GroupPagination) =>\n      data.map(({ uuid, name }) => ({ label: name, value: uuid }))\n    );\n","import portfolioMessages from '../../messages/portfolio.messages';\nimport { Bold } from '../../presentational-components/shared/intl-rich-text-components';\nimport { ReactNode } from 'react';\nimport { MessageDescriptor } from 'react-intl';\nimport { AnyObject } from '../../types/common-types';\n\nconst groupMessage = (\n  groupNames: string[],\n  formatMessage: (message: MessageDescriptor, values?: AnyObject) => ReactNode\n) => {\n  switch (groupNames.length) {\n    case 1:\n      return groupNames[0];\n    case 2:\n      return formatMessage(portfolioMessages.shareSuccessTwoGroup, {\n        group1: groupNames[0],\n        group2: groupNames[1]\n      });\n    default:\n      return formatMessage(portfolioMessages.shareSuccessMultipleGroups, {\n        count: groupNames.length\n      });\n  }\n};\n\n// TODO This will be the form type\nexport interface SharePortfolioData {\n  id?: string;\n  group_uuid: string;\n  permissions: string;\n  groupName: string;\n}\nconst sharePorfolioMessage = ({\n  shareData,\n  initialGroups,\n  removedGroups,\n  newGroups,\n  formatMessage,\n  portfolioName\n}: {\n  shareData: SharePortfolioData[];\n  initialGroups: SharePortfolioData[];\n  removedGroups: SharePortfolioData[];\n  newGroups: SharePortfolioData[];\n  formatMessage: (message: MessageDescriptor, values?: AnyObject) => ReactNode;\n  portfolioName: (...args: any[]) => string | undefined;\n}): { title: ReactNode; description: ReactNode } => {\n  let title = formatMessage(portfolioMessages.shareSuccessTitle);\n  let description;\n\n  const changedPermissions = shareData.filter(({ permissions, group_uuid }) => {\n    const originalGroup = initialGroups.find(\n      (group) => group.group_uuid === group_uuid\n    );\n\n    return (\n      originalGroup &&\n      permissions?.split(',').length !==\n        originalGroup.permissions?.split(',').length\n    );\n  });\n  const unshared =\n    removedGroups.filter(\n      ({ group_uuid }) =>\n        !changedPermissions.find((group) => group.group_uuid === group_uuid)\n    ).length > 0;\n  const shared =\n    newGroups.filter(\n      ({ group_uuid }) =>\n        !initialGroups.find((group) => group.group_uuid === group_uuid)\n    ).length > 0;\n\n  if (unshared && !shared && changedPermissions.length === 0) {\n    title = formatMessage(portfolioMessages.shareSuccessTitleOnlyUnsharing);\n    description = formatMessage(\n      portfolioMessages.shareSuccessDescriptionOnlyUnsharing,\n      {\n        name: portfolioName(),\n        group: groupMessage(\n          removedGroups.map(({ groupName }) => groupName),\n          formatMessage\n        ),\n        b: Bold\n      }\n    );\n  }\n\n  if (!unshared && shared && changedPermissions.length === 0) {\n    title = formatMessage(portfolioMessages.shareSuccessTitleOnlySharing);\n    description = formatMessage(\n      portfolioMessages.shareSuccessDescriptionOnlySharing,\n      {\n        name: portfolioName(),\n        group: groupMessage(\n          newGroups.map(({ groupName }) => groupName),\n          formatMessage\n        ),\n        b: Bold\n      }\n    );\n  }\n\n  if (!unshared && !shared && changedPermissions.length > 0) {\n    title = formatMessage(\n      portfolioMessages.shareSuccessTitleOnlyChaningPermissions\n    );\n    description = formatMessage(\n      portfolioMessages.shareSuccessDescriptionOnlyChaningPermissions,\n      {\n        group: groupMessage(\n          changedPermissions.map(({ groupName }) => groupName),\n          formatMessage\n        ),\n        b: Bold\n      }\n    );\n  }\n\n  return { title, description };\n};\n\nexport default sharePorfolioMessage;\n","/* eslint-disable react/prop-types */\nimport React, { ReactNode, useEffect, useState } from 'react';\nimport FormRenderer from '../common/form-renderer';\nimport { useDispatch, useSelector } from 'react-redux';\nimport isEqual from 'lodash/isEqual';\nimport {\n  Modal,\n  TextContent,\n  Text,\n  Stack,\n  StackItem\n} from '@patternfly/react-core';\nimport { createPortfolioShareSchema } from '../../forms/portfolio-share-form.schema';\nimport {\n  fetchPortfolios,\n  resetSelectedPortfolio\n} from '../../redux/actions/portfolio-actions';\nimport {\n  fetchShareInfo,\n  sharePortfolio,\n  unsharePortfolio\n} from '../../redux/actions/share-actions';\nimport { ShareLoader } from '../../presentational-components/shared/loader-placeholders';\nimport { permissionOptions, permissionValues } from '../../utilities/constants';\nimport { fetchFilterGroups } from '../../helpers/rbac/rbac-helper';\nimport useQuery from '../../utilities/use-query';\nimport useEnhancedHistory from '../../utilities/use-enhanced-history';\nimport { UnauthorizedRedirect } from '../error-pages/error-redirects';\nimport portfolioMessages from '../../messages/portfolio.messages';\nimport { ADD_NOTIFICATION } from '@redhat-cloud-services/frontend-components-notifications/redux';\nimport filteringMessages from '../../messages/filtering.messages';\nimport useFormatMessage from '../../utilities/use-format-message';\nimport sharePorfolioMessage, {\n  SharePortfolioData\n} from '../../helpers/portfolio/share-portfolio-message';\nimport { CatalogRootState } from '../../types/redux';\nimport {\n  ShareInfo,\n  SharePolicyPermissionsEnum,\n  UnsharePolicyPermissionsEnum\n} from '@redhat-cloud-services/catalog-client';\nimport { FormApi, Full, InternalPortfolio } from '../../types/common-types';\n\nexport type UniversalSharePolicy =\n  | (UnsharePolicyPermissionsEnum[] & SharePolicyPermissionsEnum.Read)\n  | (UnsharePolicyPermissionsEnum[] & SharePolicyPermissionsEnum.Update)\n  | (UnsharePolicyPermissionsEnum[] & SharePolicyPermissionsEnum.Delete)\n  | (UnsharePolicyPermissionsEnum[] & SharePolicyPermissionsEnum.Order);\n\nexport interface SharePortfolioModalProps {\n  closeUrl: string;\n  removeSearch?: boolean;\n  portfolioName?: (portfolio: string) => string | undefined;\n  viewState?: {\n    count: number;\n    limit: number;\n    offset: number;\n    filter: string;\n  };\n}\nconst SharePortfolioModal: React.ComponentType<SharePortfolioModalProps> = ({\n  closeUrl,\n  removeSearch,\n  viewState,\n  portfolioName = () => ''\n}) => {\n  const formatMessage = useFormatMessage();\n  const dispatch = useDispatch();\n  const { push } = useEnhancedHistory({ removeSearch, keepHash: true });\n  const [{ portfolio }, search] = useQuery(['portfolio']);\n  const [isFetching, setFetching] = useState(true);\n\n  const { selectedPortfolio: initialValues, isLoading } = useSelector<\n    CatalogRootState,\n    {\n      selectedPortfolio: InternalPortfolio;\n      isLoading: boolean;\n    }\n  >(({ portfolioReducer: { selectedPortfolio, isLoading } }) => ({\n    selectedPortfolio: selectedPortfolio as InternalPortfolio,\n    isLoading\n  }));\n\n  const { shareInfo } = useSelector<\n    CatalogRootState,\n    {\n      shareInfo: ShareInfo[];\n    }\n  >(({ shareReducer: { shareInfo } }) => ({\n    shareInfo\n  }));\n  useEffect(() => {\n    setFetching(true);\n    dispatch(fetchShareInfo(portfolio) as Promise<any>)\n      .then(() => setFetching(false))\n      .catch(() => setFetching(false));\n  }, []);\n\n  const onCancel = () => {\n    dispatch(resetSelectedPortfolio());\n    push({ pathname: closeUrl, search });\n  };\n\n  const initialShares = () => {\n    const initialGroupShareList = (shareInfo as Full<ShareInfo>[]).map(\n      (group) => {\n        const groupPermissions = group.permissions.filter(\n          (permission) => permissionValues.indexOf(permission) > -1\n        );\n        const groupName = group.group_name;\n        const options = permissionOptions.find(\n          (perm) => perm.value === groupPermissions.sort().join(',')\n        );\n        return {\n          groupName,\n          group_uuid: group.group_uuid,\n          permissions: options\n            ? options.value\n            : formatMessage(filteringMessages.unknown)\n        };\n      }\n    );\n    return initialGroupShareList;\n  };\n\n  const loadGroupOptions = (inputValue?: string) =>\n    fetchFilterGroups(inputValue);\n\n  const onSubmit = (\n    data: { 'shared-groups': SharePortfolioData[] },\n    formApi: FormApi\n  ) => {\n    const shareData = data['shared-groups'];\n    const newGroups: SharePortfolioData[] = [];\n    const initialGroups: SharePortfolioData[] = formApi.getState()\n      .initialValues['shared-groups'];\n    const removedGroups = initialGroups\n      .filter(\n        (group) =>\n          !shareData.find((item) => item.group_uuid === group.group_uuid)\n      )\n      .map(({ permissions, ...group }) => ({\n        ...group,\n        permissions: permissions.split(',')\n      }));\n    shareData.forEach((group) => {\n      const initialEntry = initialGroups.find(\n        (item) => item.group_uuid === group.group_uuid\n      );\n      if (initialEntry && !isEqual(initialEntry, group)) {\n        if (initialEntry.permissions!.length > group.permissions.length) {\n          removedGroups.push({\n            id: portfolio,\n            permissions: ['update'],\n            group_uuid: group.group_uuid,\n            groupName: group.groupName\n          });\n        } else {\n          newGroups.push(group);\n        }\n      }\n\n      if (!initialEntry) {\n        newGroups.push(group);\n      }\n    });\n\n    const createSharePromise = (group: SharePortfolioData, unshare = false) => {\n      const action = unshare ? unsharePortfolio : sharePortfolio;\n      return dispatch(\n        action({\n          id: portfolio,\n          permissions: (group.permissions as unknown) as UniversalSharePolicy,\n          group_uuid: group.group_uuid\n        })\n      );\n    };\n\n    const sharePromises = [\n      ...newGroups.map((group) => createSharePromise(group)),\n      ...removedGroups.map((group) =>\n        createSharePromise((group as unknown) as Full<SharePortfolioData>, true)\n      )\n    ];\n\n    onCancel();\n\n    const { title, description } = sharePorfolioMessage({\n      shareData,\n      initialGroups,\n      removedGroups: removedGroups.map(({ permissions, ...rest }) => ({\n        ...rest,\n        permissions: permissions.join(',')\n      })),\n      newGroups,\n      formatMessage,\n      portfolioName\n    });\n\n    return Promise.all(sharePromises).then(() => {\n      dispatch({\n        type: ADD_NOTIFICATION,\n        payload: {\n          dismissable: true,\n          variant: 'success',\n          title,\n          description\n        }\n      });\n      return dispatch(fetchPortfolios(viewState));\n    });\n  };\n\n  if (\n    initialValues?.metadata?.user_capabilities?.share === false &&\n    initialValues?.metadata?.user_capabilities?.unshare === false\n  ) {\n    return <UnauthorizedRedirect />;\n  }\n\n  const validateShares = (values: {\n    group_uuid?: string;\n    permissions?: string[];\n  }) => {\n    const errors: {\n      permissions?: ReactNode;\n      group_uuid?: ReactNode;\n    } = {};\n    if (values.group_uuid && !values.permissions) {\n      errors.permissions = formatMessage(\n        portfolioMessages.portfolioSharePermissions\n      );\n    }\n\n    if (values.permissions && !values.group_uuid) {\n      errors.group_uuid = formatMessage(portfolioMessages.portfolioShareGroups);\n    }\n\n    return errors;\n  };\n\n  const isLoadingFinal = isFetching || isLoading;\n\n  return (\n    <Modal\n      title={formatMessage(portfolioMessages.portfolioShareTitle) as string}\n      isOpen\n      variant=\"small\"\n      onClose={onCancel}\n    >\n      {isLoadingFinal && <ShareLoader />}\n      {!isLoadingFinal && (\n        <Stack hasGutter>\n          <StackItem>\n            <TextContent>\n              <Text>\n                {formatMessage(portfolioMessages.portfolioShareDescription, {\n                  name: portfolioName(portfolio),\n                  // eslint-disable-next-line react/display-name\n                  strong: (chunks: ReactNode) => (\n                    <strong key=\"strong\">{chunks}</strong>\n                  )\n                })}\n              </Text>\n            </TextContent>\n          </StackItem>\n          <StackItem>\n            <FormRenderer\n              schema={createPortfolioShareSchema(\n                loadGroupOptions,\n                permissionOptions,\n                initialValues?.metadata?.user_capabilities?.share !== false,\n                initialValues?.metadata?.user_capabilities?.unshare !== false\n              )}\n              onSubmit={onSubmit}\n              onCancel={onCancel}\n              validate={validateShares}\n              initialValues={{\n                ...initialValues,\n                'shared-groups': initialShares()\n              }}\n              templateProps={{\n                disableSubmit: ['pristine', 'validating'],\n                submitLabel: formatMessage(\n                  portfolioMessages.portfolioShareApply\n                )\n              }}\n            />\n          </StackItem>\n        </Stack>\n      )}\n    </Modal>\n  );\n};\n\nexport default SharePortfolioModal;\n","import { useHistory } from 'react-router-dom';\nimport { History, Path } from 'history';\nimport { AnyObject } from '@data-driven-forms/react-form-renderer';\n\nexport type EnhancedHistoryPushtarget =\n  | Path\n  | { pathname: string; hash?: string; search?: string; state?: AnyObject };\n\nconst removeSearchQuery = (target: EnhancedHistoryPushtarget) => {\n  if (typeof target === 'string') {\n    return target.split('?')[0];\n  }\n\n  if (typeof target === 'object') {\n    return {\n      ...target,\n      search: undefined\n    };\n  }\n\n  return target;\n};\n\n/**\n * Wrapper around useHistory hook which adds aditional settings to standard history methods\n * @param {Boolean} removeSearch if true, using history navigation methods will remove search string from path\n * @param {Boolean} keepHash if true, using history navigation methods will not remove hash from URL\n */\nconst useEnhancedHistory = ({\n  removeSearch,\n  keepHash\n}: {\n  removeSearch?: boolean;\n  keepHash?: boolean;\n} = {}): History<History.UnknownFacade> => {\n  const history = useHistory();\n  return {\n    ...history,\n    push: (target: EnhancedHistoryPushtarget) => {\n      let internalTarget = target;\n      if (keepHash && history.location.hash.length > 0) {\n        internalTarget =\n          typeof internalTarget === 'object'\n            ? { ...internalTarget, hash: history.location.hash }\n            : `${internalTarget}${history.location.hash}`;\n      }\n\n      if (removeSearch) {\n        return history.push(removeSearchQuery(internalTarget));\n      }\n\n      return history.push(internalTarget);\n    }\n  };\n};\n\nexport default useEnhancedHistory;\n","import { defineMessages } from 'react-intl';\n\nconst filteringMessages = defineMessages({\n  noItems: {\n    id: 'common.filtering.noItems',\n    defaultMessage: 'No items found'\n  },\n  filterByProduct: {\n    id: 'common.filtering.filterByProduct',\n    defaultMessage: 'Filter by product'\n  },\n  noResults: {\n    id: 'common.filtering.noResults',\n    defaultMessage: 'No results found'\n  },\n  noResultsDescription: {\n    id: 'common.filtering.noResultsDescription',\n    defaultMessage:\n      'No results match the filter criteria. Remove all filters or clear all filters to show results.'\n  },\n  clearFilters: {\n    id: 'common.filtering.clear-filters',\n    defaultMessage: 'Clear all filters'\n  },\n  noProducts: {\n    id: 'common.filtering.no-products',\n    defaultMessage: 'No products yet'\n  },\n  noRecords: {\n    id: 'commonMessages.noRecords',\n    defaultMessage: 'No records'\n  },\n  filterByTitle: {\n    id: 'tableToolbar.filterByTitle',\n    defaultMessage: 'Filter by {title}'\n  },\n  noResultsFound: {\n    id: 'tableToolbar.noResultsFound',\n    defaultMessage: 'No results found'\n  },\n  noResult: {\n    id: 'tableToolbar.noResult',\n    defaultMessage: 'No {results}'\n  },\n  unknown: {\n    id: 'commonMessages.unknown',\n    defaultMessage: 'Unknown'\n  }\n});\n\nexport default filteringMessages;\n","var baseIsEqual = require('./_baseIsEqual');\n\n/**\n * Performs a deep comparison between two values to determine if they are\n * equivalent.\n *\n * **Note:** This method supports comparing arrays, array buffers, booleans,\n * date objects, error objects, maps, numbers, `Object` objects, regexes,\n * sets, strings, symbols, and typed arrays. `Object` objects are compared\n * by their own, not inherited, enumerable properties. Functions and DOM\n * nodes are compared by strict equality, i.e. `===`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.isEqual(object, other);\n * // => true\n *\n * object === other;\n * // => false\n */\nfunction isEqual(value, other) {\n  return baseIsEqual(value, other);\n}\n\nmodule.exports = isEqual;\n","var eq = require('./eq');\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\nmodule.exports = assocIndexOf;\n","/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\nmodule.exports = eq;\n","var baseIsEqualDeep = require('./_baseIsEqualDeep'),\n    isObjectLike = require('./isObjectLike');\n\n/**\n * The base implementation of `_.isEqual` which supports partial comparisons\n * and tracks traversed objects.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Unordered comparison\n *  2 - Partial comparison\n * @param {Function} [customizer] The function to customize comparisons.\n * @param {Object} [stack] Tracks traversed `value` and `other` objects.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n */\nfunction baseIsEqual(value, other, bitmask, customizer, stack) {\n  if (value === other) {\n    return true;\n  }\n  if (value == null || other == null || (!isObjectLike(value) && !isObjectLike(other))) {\n    return value !== value && other !== other;\n  }\n  return baseIsEqualDeep(value, other, bitmask, customizer, baseIsEqual, stack);\n}\n\nmodule.exports = baseIsEqual;\n","var listCacheClear = require('./_listCacheClear'),\n    listCacheDelete = require('./_listCacheDelete'),\n    listCacheGet = require('./_listCacheGet'),\n    listCacheHas = require('./_listCacheHas'),\n    listCacheSet = require('./_listCacheSet');\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\nmodule.exports = ListCache;\n","/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\nmodule.exports = overArg;\n","/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = stubFalse;\n","/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = stubFalse;\n","var Stack = require('./_Stack'),\n    equalArrays = require('./_equalArrays'),\n    equalByTag = require('./_equalByTag'),\n    equalObjects = require('./_equalObjects'),\n    getTag = require('./_getTag'),\n    isArray = require('./isArray'),\n    isBuffer = require('./isBuffer'),\n    isTypedArray = require('./isTypedArray');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * A specialized version of `baseIsEqual` for arrays and objects which performs\n * deep comparisons and tracks traversed objects enabling objects with circular\n * references to be compared.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} [stack] Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction baseIsEqualDeep(object, other, bitmask, customizer, equalFunc, stack) {\n  var objIsArr = isArray(object),\n      othIsArr = isArray(other),\n      objTag = objIsArr ? arrayTag : getTag(object),\n      othTag = othIsArr ? arrayTag : getTag(other);\n\n  objTag = objTag == argsTag ? objectTag : objTag;\n  othTag = othTag == argsTag ? objectTag : othTag;\n\n  var objIsObj = objTag == objectTag,\n      othIsObj = othTag == objectTag,\n      isSameTag = objTag == othTag;\n\n  if (isSameTag && isBuffer(object)) {\n    if (!isBuffer(other)) {\n      return false;\n    }\n    objIsArr = true;\n    objIsObj = false;\n  }\n  if (isSameTag && !objIsObj) {\n    stack || (stack = new Stack);\n    return (objIsArr || isTypedArray(object))\n      ? equalArrays(object, other, bitmask, customizer, equalFunc, stack)\n      : equalByTag(object, other, objTag, bitmask, customizer, equalFunc, stack);\n  }\n  if (!(bitmask & COMPARE_PARTIAL_FLAG)) {\n    var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),\n        othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');\n\n    if (objIsWrapped || othIsWrapped) {\n      var objUnwrapped = objIsWrapped ? object.value() : object,\n          othUnwrapped = othIsWrapped ? other.value() : other;\n\n      stack || (stack = new Stack);\n      return equalFunc(objUnwrapped, othUnwrapped, bitmask, customizer, stack);\n    }\n  }\n  if (!isSameTag) {\n    return false;\n  }\n  stack || (stack = new Stack);\n  return equalObjects(object, other, bitmask, customizer, equalFunc, stack);\n}\n\nmodule.exports = baseIsEqualDeep;\n","/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n  this.size = 0;\n}\n\nmodule.exports = listCacheClear;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype;\n\n/** Built-in value references. */\nvar splice = arrayProto.splice;\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  --this.size;\n  return true;\n}\n\nmodule.exports = listCacheDelete;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\nmodule.exports = listCacheGet;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\nmodule.exports = listCacheHas;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    ++this.size;\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\nmodule.exports = listCacheSet;\n","var SetCache = require('./_SetCache'),\n    arraySome = require('./_arraySome'),\n    cacheHas = require('./_cacheHas');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * A specialized version of `baseIsEqualDeep` for arrays with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Array} array The array to compare.\n * @param {Array} other The other array to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `array` and `other` objects.\n * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.\n */\nfunction equalArrays(array, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      arrLength = array.length,\n      othLength = other.length;\n\n  if (arrLength != othLength && !(isPartial && othLength > arrLength)) {\n    return false;\n  }\n  // Assume cyclic values are equal.\n  var stacked = stack.get(array);\n  if (stacked && stack.get(other)) {\n    return stacked == other;\n  }\n  var index = -1,\n      result = true,\n      seen = (bitmask & COMPARE_UNORDERED_FLAG) ? new SetCache : undefined;\n\n  stack.set(array, other);\n  stack.set(other, array);\n\n  // Ignore non-index properties.\n  while (++index < arrLength) {\n    var arrValue = array[index],\n        othValue = other[index];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, arrValue, index, other, array, stack)\n        : customizer(arrValue, othValue, index, array, other, stack);\n    }\n    if (compared !== undefined) {\n      if (compared) {\n        continue;\n      }\n      result = false;\n      break;\n    }\n    // Recursively compare arrays (susceptible to call stack limits).\n    if (seen) {\n      if (!arraySome(other, function(othValue, othIndex) {\n            if (!cacheHas(seen, othIndex) &&\n                (arrValue === othValue || equalFunc(arrValue, othValue, bitmask, customizer, stack))) {\n              return seen.push(othIndex);\n            }\n          })) {\n        result = false;\n        break;\n      }\n    } else if (!(\n          arrValue === othValue ||\n            equalFunc(arrValue, othValue, bitmask, customizer, stack)\n        )) {\n      result = false;\n      break;\n    }\n  }\n  stack['delete'](array);\n  stack['delete'](other);\n  return result;\n}\n\nmodule.exports = equalArrays;\n","/**\n * A specialized version of `_.some` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {boolean} Returns `true` if any element passes the predicate check,\n *  else `false`.\n */\nfunction arraySome(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (predicate(array[index], index, array)) {\n      return true;\n    }\n  }\n  return false;\n}\n\nmodule.exports = arraySome;\n","/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\nmodule.exports = eq;\n","var getAllKeys = require('./_getAllKeys');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1;\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * A specialized version of `baseIsEqualDeep` for objects with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalObjects(object, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      objProps = getAllKeys(object),\n      objLength = objProps.length,\n      othProps = getAllKeys(other),\n      othLength = othProps.length;\n\n  if (objLength != othLength && !isPartial) {\n    return false;\n  }\n  var index = objLength;\n  while (index--) {\n    var key = objProps[index];\n    if (!(isPartial ? key in other : hasOwnProperty.call(other, key))) {\n      return false;\n    }\n  }\n  // Assume cyclic values are equal.\n  var stacked = stack.get(object);\n  if (stacked && stack.get(other)) {\n    return stacked == other;\n  }\n  var result = true;\n  stack.set(object, other);\n  stack.set(other, object);\n\n  var skipCtor = isPartial;\n  while (++index < objLength) {\n    key = objProps[index];\n    var objValue = object[key],\n        othValue = other[key];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, objValue, key, other, object, stack)\n        : customizer(objValue, othValue, key, object, other, stack);\n    }\n    // Recursively compare objects (susceptible to call stack limits).\n    if (!(compared === undefined\n          ? (objValue === othValue || equalFunc(objValue, othValue, bitmask, customizer, stack))\n          : compared\n        )) {\n      result = false;\n      break;\n    }\n    skipCtor || (skipCtor = key == 'constructor');\n  }\n  if (result && !skipCtor) {\n    var objCtor = object.constructor,\n        othCtor = other.constructor;\n\n    // Non `Object` object instances with different constructors are not equal.\n    if (objCtor != othCtor &&\n        ('constructor' in object && 'constructor' in other) &&\n        !(typeof objCtor == 'function' && objCtor instanceof objCtor &&\n          typeof othCtor == 'function' && othCtor instanceof othCtor)) {\n      result = false;\n    }\n  }\n  stack['delete'](object);\n  stack['delete'](other);\n  return result;\n}\n\nmodule.exports = equalObjects;\n","var overArg = require('./_overArg');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeKeys = overArg(Object.keys, Object);\n\nmodule.exports = nativeKeys;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nmodule.exports = objectToString;\n"],"sourceRoot":""}