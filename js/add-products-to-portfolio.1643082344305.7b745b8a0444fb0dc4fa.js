"use strict";(self.webpackChunkcatalog=self.webpackChunkcatalog||[]).push([[7781],{8755:(e,t,r)=>{t._t={name:"FilterIcon",height:512,width:512,svgPath:"M487.976 0H24.028C2.71 0-8.047 25.866 7.058 40.971L192 225.941V432c0 7.831 3.821 15.17 10.237 19.662l80 55.98C298.02 518.69 320 507.493 320 487.98V225.941l184.947-184.97C520.021 25.896 509.338 0 487.976 0z",yOffset:0,xOffset:0},t.k1=r(35183).createIcon(t._t),t.ZP=t.k1},55251:(e,t,r)=>{r.r(t),r.d(t,{default:()=>ee});var n=r(93433),o=r(29439),a=r(4942),i=r(87462),c=r(30624),l=r.n(c),s=r(45697),p=r.n(s),u=r(45987),f=r(48794),d=r(8755),m=r(59837),g=r(33188),y=r(97881),O=r(64466),h=r(23349),b=["platform"],v=function(e){var t=e.platform,r=(0,h.Z)();return l().createElement(g.Z,{Icon:t?f.ZP:d.ZP,title:r(t?O.Z.addProducstFilterTitle:O.Z.addProducstPlatformTitle),description:r(t?y.Z.noResultsDescription:O.Z.addProducstPlatformDescription)})};v.propTypes={platform:p().any};var P=function(e){var t=e.platform,r=(0,u.Z)(e,b);return l().createElement(m.Z,(0,i.Z)({editMode:!0},r,{renderEmptyState:function(){return l().createElement(v,{platform:t})}}))};P.propTypes={checkedItems:p().arrayOf(p().string),platform:p().any},P.defaultProps={checkedItems:[]};const j=P;var w=r(66678),S=r(7247),Z=r(44056),k=r(91703),E=r(56824),I=r(28359),F=r(18446),T=r.n(F),D=function(){return(D=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},R=function(e){var t=e.onChange,r=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}(e,["onChange"]),n=(0,c.useState)(void 0),o=n[0],a=n[1];return l().createElement("div",{key:"filter-select",id:"filter-select",className:"filter-select"},l().createElement(I.M,D({isDisabled:!r.options||0===r.options.length,name:"filter-select",simpleValue:!1,onChange:function(e){t&&t(e||o),a(e||o)},value:o},r)))};R.propTypes={options:p().array,onChange:p().func.isRequired};const C=(0,c.memo)(R,(function(e,t){return T()(e.options,t.options)}));var V=r(68212),_=r(77172);function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function L(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach((function(t){(0,a.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const A=function(e){var t=e.options,r=e.isFetching,n=e.searchValue,o=e.portfolioName,a=e.itemsSelected,i=e.onOptionSelect,c=e.onFilterChange,l=e.portfolioRoute,s=e.onClickAddToPortfolio,p=e.meta,u=e.platformId,f=e.fetchPlatformItems;return{fields:[{component:k.H.TOP_TOOLBAR,key:"add-products-toolbar",fields:[{component:k.H.TOP_TOOLBAR_TITLE,title:"Add products: ".concat(o),key:"add-products-title"},{component:k.H.LEVEL,key:"add-products-actions",fields:[{component:k.H.TOOLBAR,key:"add-products-actions-toolbar",fields:[{component:k.H.TOOLBAR_GROUP,key:"products-filter-group",fields:[{component:C,key:"select-platforms",id:"products-platform-select",isMulti:!1,isSearchable:!0,placeholder:"Filter by Platform",options:t,onChange:i},{component:k.H.FILTER_TOOLBAR_ITEM,key:"filter-products-input",onFilterChange:c,searchValue:n,isDisabled:!u,placeholder:"Filter products"}]},L({groupName:"cancel-group-item"},(0,E.g)({key:"add-products-cancel-button",pathname:l,variant:"link","aria-label":"Cancel Add products to Portfolio",preserveSearch:!0,title:"Cancel"})),{component:k.H.TOOLBAR_ITEM,key:"add-group-item",fields:[{key:"portfolio-items-add-group",component:V.Z,variant:"primary","aria-label":"Add products to Portfolio",title:"Add",type:"button",onClick:s,isDisabled:!a||r,showSpinner:r,children:"Add",id:"add-products-to-portfolio"}]}]},{component:k.H.LEVEL_ITEM,key:"pagination-item",fields:p?[{component:_.Z,key:"add-products-pagination",meta:p,apiProps:u,apiRequest:f,isCompact:!0}]:[]}]}]}]}};var H=r(11608),B=r(49827),N=r(89231),M=r(77503),q=r(74798),z=r(14494),U=r(92183),G=r(81624);function J(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function K(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?J(Object(r),!0).forEach((function(t){(0,a.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):J(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;return e.map((function(e){return l().createElement(Z.Z,(0,i.Z)({key:e.id},e,{editMode:!0,onToggleItemSelect:function(){return t(e.id)},checked:r.includes(e.id)}))}))},Q={filterValue:"",isFetching:!1,isFiltering:!1},X=function(e,t){switch(t.type){case"setFetching":return K(K({},e),{},{isFetching:t.payload});case"setFilterValue":return K(K({},e),{},{filterValue:t.payload});case"setFilteringFlag":return K(K({},e),{},{isFiltering:t.payload})}return e},Y=(0,G.Z)((function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:S.he;n(!0),r(localStorage.getItem("catalog_standalone")?(0,B.Vx)(e,t,K(K({},o),{},{filter:t})):(0,H.Vx)(e,t,K(K({},o),{},{filter:t}))).then((function(){return n(!1)}))}),1e3),$=function(e){var t=e.portfolioRoute,r=(0,c.useState)(void 0),a=(0,o.Z)(r,2),i=a[0],s=a[1],p=(0,c.useState)([]),u=(0,o.Z)(p,2),f=u[0],d=u[1],m=(0,c.useReducer)(X,Q),g=(0,o.Z)(m,2),y=g[0],O=y.filterValue,h=y.isFetching,b=g[1],v=(0,q.Z)().push,P=(0,z.I0)(),Z=(0,z.v9)((function(e){var t=e.portfolioReducer.selectedPortfolio,r=e.platformReducer;return{platforms:r.platforms,platformItems:r.platformItems,isLoading:r.isPlatformDataLoading,portfolio:t}})),k=Z.portfolio,E=Z.platforms,I=Z.platformItems,F=Z.isLoading;(0,c.useEffect)((function(){P(localStorage.getItem("catalog_standalone")?(0,B.dw)():(0,H.dw)())}),[]);var T=function(){return i&&I[i.id]?localStorage.getItem("catalog_standalone")?I[i.id].results:I[i.id].data:[]},D=i&&I[i.id]&&(localStorage.getItem("catalog_standalone")?I[i.id].meta:{count:I[i.id].count}),R=E.results&&E.results.length>0?E.results.map((function(e){return{value:e.id,label:e.name,id:e.id}})):[];return l().createElement(c.Fragment,null,l().createElement(w.Z,{schema:A({options:R,isFetching:h,portfolioName:k&&k.name||"",itemsSelected:f.length>0,onOptionSelect:function(e){s(e),P(localStorage.getItem("catalog_standalone")?(0,B.Vx)(e.id,O,S.he):(0,H.Vx)(e.id,O,S.he))},onFilterChange:function(e){return function(e){b({type:"setFilterValue",payload:e}),Y(i.id,e,P,(function(e){return b({type:"setFilteringFlag",payload:e})}),K(K({},D),{},{offset:0}))}(e)},portfolioRoute:t,onClickAddToPortfolio:function(){return P({type:"setFetching",payload:!0}),P(localStorage.getItem("catalog_standalone")?(0,M.Zm)(k.id,T().filter((function(e){return f.includes(e.id)}))):(0,N.Zm)(k.id,f)).then((function(){return P({type:"setFetching",payload:!1})})).then((function(){return v({pathname:t,search:"?portfolio=".concat(k.id)})})).then((function(){return P(localStorage.getItem("catalog_standalone")?(0,M.cP)(k.id):(0,N.cP)(k.id))})).catch((function(){return P({type:"setFetching",payload:!1})}))},meta:D,platformId:i&&i.id,searchValue:O,fetchPlatformItems:function(e,t){return P(localStorage.getItem("catalog_standalone")?(0,B.Vx)(e,O,t):(0,H.Vx)(e,O,t))}})}),l().createElement(j,{platform:!!i,checkedItems:f,isLoading:F,items:W(T(),(function(e){return d(function(e){var t=f.indexOf(e);return t>-1?[].concat((0,n.Z)(f.slice(0,t)),(0,n.Z)(f.slice(t+1))):[].concat((0,n.Z)(f),[e])}(e))}),f)}),D&&D.count>0&&l().createElement(U.Z,null,l().createElement(_.Z,{meta:D,apiProps:i&&i.id,apiRequest:function(e,t){return localStorage.getItem("catalog_standalone")?(0,B.Vx)(e,O,t):(0,H.Vx)(e,O,t)},dropDirection:"up"})))};$.propTypes={portfolioRoute:p().string.isRequired};const ee=$},56824:(e,t,r)=>{r.d(t,{g:()=>s});var n=r(4942),o=r(45987),a=r(91703),i=["pathname","preserveSearch","id"];function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var s=function(e){var t=e.pathname,r=e.preserveSearch,n=e.id,c=(0,o.Z)(e,i);return{component:a.H.TOOLBAR_ITEM,key:"".concat(c.key,"/button-link"),fields:[{component:a.H.LINK,pathname:t,preserveSearch:r,key:"".concat(c.key,"/button-link"),isDisabled:c.isDisabled,id:n,fields:[l({component:a.H.BUTTON},c)]}]}}},68212:(e,t,r)=>{r.d(t,{Z:()=>d});var n=r(30624),o=r.n(n),a=r(29163),i=r(65832),c=r(67463),l=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},s=function(){return(s=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},p=(0,a.ZP)(i.Button)(m||(m=l(["\n  display: flex !important;\n  align-items: center;\n"],["\n  display: flex !important;\n  align-items: center;\n"]))),u=a.ZP.span(g||(g=l(["\n  margin-right: ",";\n"],["\n  margin-right: ",";\n"])),(function(e){return e.showSpinner?"8px":"0"})),f=(0,n.forwardRef)((function(e,t){var r=e.children,n=e.showSpinner,a=void 0!==n&&n,i=e.isDisabled,l=void 0!==i&&i,f=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}(e,["children","showSpinner","isDisabled"]);return o().createElement(p,s({ref:t},f,{isDisabled:l}),o().createElement(u,{showSpinner:a},r),a&&o().createElement(c.Spinner,{size:"md"}))}));f.displayName="ButtonWithSpinner";const d=f;var m,g},77172:(e,t,r)=>{r.d(t,{Z:()=>s});var n=r(30624),o=r.n(n),a=r(99166),i=r(65832),c=r(7247),l=function(){return(l=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};const s=function(e){var t=e.meta,r=t.limit,n=void 0===r?50:r,s=t.count,p=void 0===s?0:s,u=t.offset,f=void 0===u?0:u,d=e.apiProps,m=e.apiRequest,g=e.className,y=void 0===g?"":g,O=e.isCompact,h=void 0!==O&&O,b=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}(e,["meta","apiProps","apiRequest","className","isCompact"]);return o().createElement("div",{className:y},o().createElement(i.Pagination,l({perPage:n||50,itemCount:p||0,onPerPageSelect:function(e,t){return m(d,{offset:f,limit:t})},page:(0,c.FZ)(n,f),onSetPage:function(e,t,r){var o={offset:(0,c.SJ)(t,n),limit:n},i=function(){return m(d,o)};return r?(0,a.Z)(i,250)():i()},dropDirection:"down",isCompact:h},b)))}}}]);
//# sourceMappingURL=../sourcemaps/add-products-to-portfolio.5556fca822612a616cd02d83efeddec5.js.map