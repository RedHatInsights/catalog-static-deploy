(window.webpackJsonp=window.webpackJsonp||[]).push([[64],{753:function(e,t,o){"use strict";var r=o(0),n=o.n(r),c=o(67),i=o(754),a=o.n(i),l=o(56),s=o(610),u=o(28);t.a=function(){var e=Object(u.a)();return n.a.createElement("div",{className:"pf-u-mb-md"},n.a.createElement(a.a,{className:"pf-u-mr-sm"}),n.a.createElement(c.a,{variant:"link",ouiaId:"back-to-products",component:function(){return n.a.createElement(s.a,{pathname:"/products"},e(l.a.backToProducts))}}))}},754:function(e,t,o){"use strict";t.__esModule=!0,t.AngleLeftIconConfig={name:"AngleLeftIcon",height:512,width:256,svgPath:"M31.7 239l136-136c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9L127.9 256l96.4 96.4c9.4 9.4 9.4 24.6 0 33.9L201.7 409c-9.4 9.4-24.6 9.4-33.9 0l-136-136c-9.5-9.4-9.5-24.6-.1-34z",yOffset:0,xOffset:0},t.AngleLeftIcon=o(98).createIcon(t.AngleLeftIconConfig),t.default=t.AngleLeftIcon},770:function(e,t,o){"use strict";var r=o(0);t.a=function(){var e=Object(r.useRef)(!1);return Object(r.useEffect)((function(){return e.current=!0,function(){return e.current=!1}}),[]),e}},949:function(e,t,o){"use strict";o.r(t);var r=o(99),n=o.n(r),c=o(26),i=o.n(c),a=o(0),l=o.n(a),s=o(27),u=o(107),f=o(5),p=o.n(f),d=o(136),m=function(){for(var e=0,t=0,o=arguments.length;t<o;t++)e+=arguments[t].length;var r=Array(e),n=0;for(t=0;t<o;t++)for(var c=arguments[t],i=0,a=c.length;i<a;i++,n++)r[n]=c[i];return r},b=o(618),O=o(155),h=o(154),y=o(112),g=o(822),P=o(14),v=o(246),j=o(55),I=o(770),E=o(243),R=o(620),w=o(614),F=o(753);function k(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function A(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?k(Object(o),!0).forEach((function(t){i()(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):k(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var L=function(e){var t=e.fromProducts,o=e.title,r=e.description;return l.a.createElement(R.a,{schema:{fields:[{component:w.b.TOP_TOOLBAR,breadcrumbs:!t,key:"portfolio-top-toolbar",fields:[{component:F.a,key:"back-to-products",hidden:!t},{component:w.b.TOP_TOOLBAR_TITLE,key:"portfolio-toolbar-title",title:o,description:r}]}]}})};L.propTypes={title:p.a.node,description:p.a.node,fromProducts:p.a.bool};var C=Object(a.lazy)((function(){return Promise.all([o.e(0),o.e(4),o.e(14),o.e(15),o.e(71)]).then(o.bind(null,943))})),S=Object(a.lazy)((function(){return Promise.all([o.e(0),o.e(9),o.e(14),o.e(61)]).then(o.bind(null,937))})),T=Object(a.lazy)((function(){return Promise.all([o.e(0),o.e(4),o.e(15),o.e(18)]).then(o.bind(null,941))})),_={selectedItems:[],firstSelectedProduct:void 0,removeInProgress:!1,filterValue:"",copyInProgress:!1,isFetching:!0,isFiltering:!1},D=Object(h.a)((function(e,t,o,r){o(!0),t(Object(O.f)(e,r)).then((function(){return o(!1)}))}),1e3),V=function(e,t){var o,r,n=t.type,c=t.payload,i=void 0===c?{}:c;return{selectItem:A(A({},e),{},{selectedItems:(o=e.selectedItems,r=i.selectedItem,o.includes(r)?m(o.slice(0,o.indexOf(r)),o.slice(o.indexOf(r)+1)):m(o,[r])),firstSelectedProduct:i.product||e.firstSelectedProduct}),setRemoveInProgress:A(A({},e),{},{removeInProgress:i}),removeSucessfull:A(A({},e),{},{selectedItems:[],removeInProgress:!1}),setFilterValue:A(A({},e),{},{filterValue:i,isFiltering:!0}),setCopyInProgress:A(A({},e),{},{copyInProgress:i}),setIsFetching:A(A({},e),{},{isFetching:i}),setFilteringFlag:A(A({},e),{},{isFiltering:i})}[n]};t.default=function(){var e,t=Object(E.a)(),o=Object(a.useReducer)(V,A(A({},_),{},{filterValue:(null==t||null===(e=t.portfolioItems)||void 0===e?void 0:e.filter)||""})),r=n()(o,2),c=r[0],i=r[1],f=Object(y.a)(["portfolio","from-products"]),p=n()(f,1)[0],m=p.portfolio,h=p["from-products"],R=Object(u.i)(P.A).url,w=Object(u.g)(),F=Object(s.d)(),k=Object(I.a)(),z=Object(s.e)((function(e){var t=e.portfolioReducer;return{portfolio:t.selectedPortfolio,portfolioItem:t.portfolioItem,meta:t.portfolioItems.meta}})),N=z.portfolio,x=z.portfolioItem,B=z.meta,J=Object(g.a)([N,x]),M=function(e){return i({type:"setIsFetching",payload:!0}),Promise.all([F(Object(b.c)()),F(Object(O.i)(e)),F(Object(O.f)(e,null==t?void 0:t.portfolioItems))]).then((function(e){return k.current&&i({type:"setIsFetching",payload:!1}),e})).catch((function(){return i({type:"setIsFetching",payload:!1})}))};Object(a.useEffect)((function(){return insights.chrome.appNavClick({id:"true"===h?"products":"portfolios",secondaryNav:!0}),M(m),Object(d.e)(),function(){J(),F(Object(O.m)())}}),[]),Object(a.useEffect)((function(){!0!==k.current||c.isFetching||w.location.pathname!==P.A||(M(m),Object(d.e)())}),[m,w.location.pathname]);var q={portfolioRoute:R,addProductsRoute:"".concat(R,"/add-products"),editPortfolioRoute:"".concat(R,"/edit-portfolio"),removePortfolioRoute:"".concat(R,"/remove-portfolio"),sharePortfolioRoute:"".concat(R,"/share-portfolio"),workflowPortfolioRoute:"".concat(R,"/edit-workflow"),portfolioItemRoute:"".concat(R,"/portfolio-item")};return!1===N.metadata.user_capabilities.show?l.a.createElement(v.a,null):l.a.createElement(a.Suspense,{fallback:l.a.createElement(L,{fromProducts:"true"===h,title:N.name,description:N.description})},l.a.createElement(u.d,null,l.a.createElement(j.a,{path:q.addProductsRoute,userCapabilities:N.metadata.user_capabilities,requiredCapabilities:"update"},l.a.createElement(T,{portfolioRoute:q.portfolioRoute})),l.a.createElement(u.b,{path:q.portfolioItemRoute},l.a.createElement(S,{portfolioLoaded:!c.isFetching})),l.a.createElement(u.b,{path:q.portfolioRoute},l.a.createElement(C,{routes:q,fromProducts:"true"===h,handleFilterChange:function(e){i({type:"setFilterValue",payload:e}),D(m,F,(function(e){return i({type:"setFilteringFlag",payload:e})}),A(A({},B),{},{offset:0,filter:e}))},removeProducts:function(e){i({type:"setRemoveInProgress",payload:!0}),F(Object(O.l)(e,N.name,c.firstSelectedProduct)).then((function(){return i({type:"removeSucessfull"})})).catch((function(){return i({type:"setRemoveInProgress",payload:!1})}))},copyPortfolio:function(){return i({type:"setCopyInProgress",payload:!0}),F(Object(O.c)(m)).then((function(e){var t=e.id;return w.push({pathname:P.A,search:"?portfolio=".concat(t)})})).then((function(){return i({type:"setCopyInProgress",payload:!1})})).then((function(){return F(Object(O.g)())})).catch((function(){return i({type:"setCopyInProgress",payload:!1})}))},state:c,stateDispatch:i}))))}}}]);
//# sourceMappingURL=../sourcemaps/portfolio~31ecd969.js.map