"use strict";(self.webpackChunkcatalog=self.webpackChunkcatalog||[]).push([[5868],{5693:(e,t,n)=>{n.r(t),n.d(t,{default:()=>T});var o=n(30624),a=n.n(o),r=n(14494),i=n(30137),l=n(96354),u=n(35388),c=n(81624),s=n(83629),f=n(73712),h=(0,c.Z)((function(e,t){localStorage.getItem("catalog_standalone")?(0,f.IE)(e).then((function(n){var o=n.results;if(!e||0===e.trim().length)throw"Required";if(o.find((function(n){return n.name===e&&n.id!==t})))throw"Name has already been taken"})):(0,s.IE)(e).then((function(n){var o=n.data;if(!e||0===e.trim().length)throw"Required";if(o.find((function(n){return n.name===e&&n.id!==t})))throw"Name has already been taken"}))})),d=n(89231),p=n(77503),v=n(47786),m=n(74798),b=n(9456),g=n(36722),y=n(72510),w=n(7579),Z=n(64466),k=n(56682),S=n(23349),E=function(){return(E=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};const T=function(e){var t,n,c=e.removeQuery,T=e.closeTarget,j=e.viewState,x=(0,S.Z)(),I=(0,r.I0)(),O=(0,o.useState)(!0),P=O[0],C=O[1],_=(0,o.useContext)(y.Z).openApiSchema,R=(0,v.Z)(["portfolio"])[0].portfolio,L=(0,m.Z)({removeSearch:c,keepHash:!0}).push,M=(0,r.v9)((function(e){var t=e.portfolioReducer;return localStorage.getItem("catalog_standalone")?(0,f.nX)(t,R):(0,s.nX)(t,R)}));if(R&&M&&Object.keys(M).length,!1===(null===(n=null===(t=null==M?void 0:M.metadata)||void 0===t?void 0:t.user_capabilities)||void 0===n?void 0:n.update))return a().createElement(b.M,null);var X=function(e,t){var n,o,a,r,i;return{fields:[{label:"schemas.portfolio.name",name:"name",component:l.Z.TEXT_FIELD,isRequired:!0,maxLength:(null===(i=null===(r=null===(a=null===(o=null===(n=null==e?void 0:e.components)||void 0===n?void 0:n.schemas)||void 0===o?void 0:o.Portfolio)||void 0===a?void 0:a.properties)||void 0===r?void 0:r.name)||void 0===i?void 0:i.maxLength)||u.Nb,validate:[function(e){return h(e,t)}]},{label:"schemas.portfolio.description",component:l.Z.TEXTAREA,name:"description"}]}}(_,R);return a().createElement(i.ZP,{schema:X,onSubmit:function(e){return M?(C(!1),I(localStorage.getItem("catalog_standalone")?(0,p.o9)(e,j):(0,d.o9)(e,j)).then((function(){return L(T)}))):function(e){return t=void 0,n=void 0,r=function(){var t,n;return function(e,t){var n,o,a,r,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(r){return function(l){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,o&&(a=2&r[0]?o.return:r[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,r[1])).done)return a;switch(o=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return i.label++,{value:r[1],done:!1};case 5:i.label++,o=r[1],r=[0];continue;case 7:r=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==r[0]&&2!==r[0])){i=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){i.label=r[1];break}if(6===r[0]&&i.label<a[1]){i.label=a[1],a=r;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(r);break}a[2]&&i.ops.pop(),i.trys.pop();continue}r=t.call(e,i)}catch(e){r=[6,e],o=0}finally{n=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}}(this,(function(o){switch(o.label){case 0:return t={variant:"success",title:x(Z.Z.addSuccessTitle),description:x(Z.Z.addSuccessDescription,{name:e.name,b:function(e){return a().createElement("b",{key:"strong"},e)}})},[4,I(localStorage.getItem("catalog_standalone")?(0,p.jM)(e,t):(0,d.jM)(e,t))];case 1:return[2,(n=o.sent())&&n.value&&n.value.id?L({pathname:g.hT,search:"?portfolio="+n.value.id}):L(T)]}}))},new((o=void 0)||(o=Promise))((function(e,a){function i(e){try{u(r.next(e))}catch(e){a(e)}}function l(e){try{u(r.throw(e))}catch(e){a(e)}}function u(t){var n;t.done?e(t.value):(n=t.value,n instanceof o?n:new o((function(e){e(n)}))).then(i,l)}u((r=r.apply(t,n||[])).next())}));var t,n,o,r}(e)},onCancel:function(){return L(T)},initialValues:E({},M),isModal:!0,modalProps:{title:x(R?Z.Z.modalEditTitle:Z.Z.modalCreateTitle),isOpen:P,onClose:function(){return L(T)},variant:"small"},templateProps:{submitLabel:x(R?w.Z.save:k.Z.create)}})}},74798:(e,t,n)=>{n.d(t,{Z:()=>r});var o=n(334),a=function(){return(a=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};const r=function(e){var t=void 0===e?{}:e,n=t.removeSearch,r=t.keepHash,i=(0,o.useHistory)();return a(a({},i),{push:function(e){var t=e;return r&&i.location.hash.length>0&&(t="object"==typeof t?a(a({},t),{hash:i.location.hash}):""+t+i.location.hash),n?i.push(function(e){return"string"==typeof e?e.split("?")[0]:"object"==typeof e?a(a({},e),{search:void 0}):e}(t)):i.push(t)}})}}}]);
//# sourceMappingURL=../sourcemaps/add-portfolio.92d11a84b3496069f04d844137da9ea6.js.map