"use strict";(self.webpackChunkcatalog=self.webpackChunkcatalog||[]).push([[3452],{3452:(e,o,t)=>{t.r(o),t.d(o,{default:()=>G});var r=t(4942),i=t(87462),n=t(29439),l=t(30624),a=t.n(l),s=t(45697),c=t.n(s),p=t(334),u=t(45237),d=t(66678),f=t(22910),m=t(92512),P=t(60396),h=t(96823),y=t(91703),b=t(56824),g=t(77172),v=t(20697),O=t(21976),R=t(23349),k=t(29751),E=t(36722);function I(e,o){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);o&&(r=r.filter((function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable}))),t.push.apply(t,r)}return t}function Z(e){for(var o=1;o<arguments.length;o++){var t=null!=arguments[o]?arguments[o]:{};o%2?I(Object(t),!0).forEach((function(o){(0,r.Z)(e,o,t[o])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):I(Object(t)).forEach((function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(t,o))}))}return e}var w=function(e){var o=e.editPortfolioRoute,t=e.workflowPortfolioRoute,r=e.removePortfolioRoute,i=e.copyInProgress,s=e.copyPortfolio,c=e.userCapabilities,p=e.canLinkOrderProcesses,u=(0,l.useState)(!1),d=(0,n.Z)(u,2),y=d[0],b=d[1],g=(0,R.Z)(),O=[];if(null!=c&&c.update&&O.push(a().createElement(h.h,{"aria-label":"Edit Portfolio",key:"edit-portfolio",id:"edit-portfolio",component:a().createElement(v.Z,{id:"edit-portfolio",preserveSearch:!0,pathname:o},"Edit"),role:"link"})),null!=c&&c.copy&&O.push(a().createElement(h.h,{component:"button","aria-label":"Copy Portfolio",key:"copy-portfolio",id:"copy-portfolio",onClick:s},"Copy")),null!=c&&c.set_approval&&O.push(a().createElement(h.h,{"aria-label":"Set approval workflow",key:"set-approval-portfolio-action",id:"set-approval-portfolio-action",component:a().createElement(v.Z,{preserveSearch:!0,pathname:t},"Set approval"),role:"link"})),null!=c&&c.update&&p){var I=g(k.Z.setOrderProcess);O.push(a().createElement(h.h,{"aria-label":I,key:"attach-order-processes",id:"attach-order-processes",component:a().createElement(v.Z,{preserveSearch:!0,pathname:E.OI},I),role:"link"}))}return null!=c&&c.destroy&&O.push(a().createElement(h.h,{"aria-label":"Remove Portfolio",key:"delete-portfolio",id:"delete-portfolio",component:a().createElement(v.Z,{preserveSearch:!0,pathname:r},"Delete"),role:"link",className:"pf-c-dropdown__menu-item"})),0===O.length?null:a().createElement(f.L,{className:"pf-u-ml-md",onSelect:function(){return b(!1)},position:m.DropdownPosition.right,toggle:a().createElement(P.a,{id:"toggle-portfolio-actions",onToggle:b,isDisabled:i}),isOpen:y,isPlain:!0,dropdownItems:O})};w.propTypes={removePortfolioRoute:c().string.isRequired,editPortfolioRoute:c().string.isRequired,workflowPortfolioRoute:c().string.isRequired,copyPortfolio:c().func.isRequired,copyInProgress:c().bool,userCapabilities:c().shape({copy:c().bool,update:c().bool,destroy:c().bool,set_approval:c().bool}).isRequired,canLinkOrderProcesses:c().bool};const C=function(e){var o=e.title,t=e.addProductsRoute,r=e.copyPortfolio,i=e.sharePortfolioRoute,n=e.editPortfolioRoute,l=e.workflowPortfolioRoute,a=e.removePortfolioRoute,s=e.copyInProgress,c=e.isLoading,p=e.removeProducts,u=e.itemsSelected,d=e.meta,f=e.fetchPortfolioItemsWithPortfolio,m=e.portfolioId,P=e.description,h=e.fromProducts,v=e.filterProps,R=v.searchValue,k=v.onFilterChange,E=v.placeholder,I=e.userCapabilities,C=e.canLinkOrderProcesses;return{fields:[{component:y.H.TOP_TOOLBAR,breadcrumbs:!h,key:"portfolio-top-toolbar",fields:[{key:"back-to-products",hidden:!h,component:O.Z},{component:y.H.TOP_TOOLBAR_TITLE,key:"portfolio-toolbar-title",noData:null==d?void 0:d.noData,title:o,description:P,fields:[{component:y.H.TOOLBAR,key:"portfolio-actions",noWrap:!0,fields:[(0,b.g)({pathname:i,preserveSearch:!0,variant:"secondary",title:"Share",isDisabled:s,key:"portfolio-share-button",id:"portfolio-share-button",hidden:!(null!=I&&I.share||null!=I&&I.unshare)}),{component:y.H.TOOLBAR_ITEM,key:"portfolio-actions-dropdown-item",fields:[{component:w,editPortfolioRoute:n,workflowPortfolioRoute:l,removePortfolioRoute:a,copyPortfolio:r,copyInProgress:s,userCapabilities:I,canLinkOrderProcesses:C,key:"portfolio-actions-dropdown"}]}]}]},{component:y.H.LEVEL,key:"portfolio-items-actions",fields:null!=d&&d.noData?[]:[{component:y.H.TOOLBAR,key:"portfolio-items-actions",fields:[{groupName:"filter-portfolio-items",component:y.H.FILTER_TOOLBAR_ITEM,isClearable:!0,key:"portfolio-items-filter",searchValue:R,onFilterChange:k,placeholder:E},Z({hidden:!(null!=I&&I.update),groupName:"add-portfolio-items",key:"portfolio-items-add-group"},(0,b.g)({preserveSearch:!0,pathname:t,isDisabled:c||s,variant:"primary",title:"Add",id:"add-products-button",key:"add-products-button"})),{component:y.H.TOOLBAR_ITEM,key:"remove-products-item",hidden:0===d.count||!(null!=I&&I.update),fields:[{component:y.H.BUTTON,groupName:"remove-portfolio-items",variant:"link",title:"Remove",key:"remove-products-button",id:"remove-products-button",isDisabled:!u,onClick:p}]}]},{component:y.H.LEVEL_ITEM,key:"pagination-item",fields:d.count>0?[{component:g.Z,key:"portfolio-items-pagination",meta:d,apiRequest:f,apiProps:m,isCompact:!0}]:[]}]}]}]}};var D=t(48794),S=t(20777),T=t(33188),j=t(6202),L=t(97881),q=t(64466),F=function(e){var o=e.url,t=e.handleFilterChange,r=e.meta,i=e.userCapabilities,n=(0,R.Z)(),l={PrimaryAction:null!=r&&r.noData?function(){return a().createElement(T._,{url:o,label:n(q.Z.addProducts),id:"add-products-to-portfolio",hasPermission:null==i?void 0:i.update})}:function(){return a().createElement(j.Button,{id:"clear-portfolio-filter",ouiaId:"clear-portfolio-filter",variant:"link",onClick:function(){return t("")}},n(L.Z.clearFilters))},title:null!=r&&r.noData?n(L.Z.noProducts):n(L.Z.noResults),description:null!=r&&r.noData?n(q.Z.emptyNoProducts):n(L.Z.noResultsDescription),Icon:null!=r&&r.noData?S.ZP:D.ZP};return a().createElement(T.Z,l)};F.propTypes={url:c().string.isRequired,handleFilterChange:c().func.isRequired,meta:c().shape({noData:c().bool}).isRequired,userCapabilities:c().shape({update:c().bool}).isRequired};const _=F;var B=t(59837),H=t(59797),A=t(89231),V=t(92183),N=t(47786),M=t(72510),W=t(63035);function x(e,o){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);o&&(r=r.filter((function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable}))),t.push.apply(t,r)}return t}function U(e){for(var o=1;o<arguments.length;o++){var t=null!=arguments[o]?arguments[o]:{};o%2?x(Object(t),!0).forEach((function(o){(0,r.Z)(e,o,t[o])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):x(Object(t)).forEach((function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(t,o))}))}return e}var z=function(e){var o=e.routes,t=e.handleFilterChange,r=e.removeProducts,s=e.copyPortfolio,c=e.stateDispatch,f=e.fromProducts,m=e.state,P=m.removeInProgress,h=m.isFetching,y=m.isFiltering,b=m.copyInProgress,v=m.selectedItems,O=m.filterValue,k=(0,R.Z)(),I=(0,u.useSelector)((function(e){var o=e.portfolioReducer,t=o.portfolioItems,r=t.data,i=t.meta,n=o.selectedPortfolio;return{data:r,meta:i,name:n.name,description:n.description,userCapabilities:n.metadata.user_capabilities}})),Z=I.data,w=I.meta,D=I.name,S=I.description,T=I.userCapabilities,j=(0,p.useRouteMatch)(E.hT).url,q=(0,N.Z)(["portfolio"]),F=(0,n.Z)(q,1)[0].portfolio,x=(0,u.useDispatch)(),z=(0,l.useContext)(M.Z).permissions,G=(0,W.Fs)(z,["catalog:order_processes:link"]),J=Z.map((function(e){return a().createElement(H.Z,(0,i.Z)({key:e.id},e,{pathname:"".concat(j,"/portfolio-item"),searchParams:{source:e.service_offering_source_ref,"portfolio-item":e.id},preserveSearch:!0,isSelectable:T.update,onSelect:function(o){return c({type:"selectItem",payload:{selectedItem:o,product:e}})},isSelected:v.includes(e.id),removeInProgress:P}))}));return a().createElement(l.Fragment,null,a().createElement(d.Z,{schema:C(U(U({fromProducts:f,filterProps:{searchValue:O,onFilterChange:t,placeholder:k(L.Z.filterByProduct)},title:D,description:S},o),{},{copyPortfolio:s,isLoading:h||y,copyInProgress:b,removeProducts:function(){return r(v)},itemsSelected:v.length>0,meta:w,fetchPortfolioItemsWithPortfolio:function(){return x(A.cP.apply(void 0,arguments))},portfolioId:F,userCapabilities:T,canLinkOrderProcesses:G}))}),a().createElement(B.Z,{items:J,isLoading:h||y,renderEmptyState:function(){return a().createElement(_,{handleFilterChange:t,meta:w,userCapabilities:T,url:o.addProductsRoute})}}),w.count>0&&a().createElement(V.Z,null,a().createElement(g.Z,{dropDirection:"up",meta:w,apiProps:F,apiRequest:function(){return x(A.cP.apply(void 0,arguments))}})))};z.propTypes={routes:c().shape({addProductsRoute:c().string.isRequired,portfolioRoute:c().string.isRequired}).isRequired,handleFilterChange:c().func.isRequired,removeProducts:c().func.isRequired,copyPortfolio:c().func.isRequired,stateDispatch:c().func.isRequired,state:c().shape({removeInProgress:c().bool,isFetching:c().bool,isFiltering:c().bool,copyInProgress:c().bool,selectedItems:c().arrayOf(c().string),filterValue:c().string}).isRequired,fromProducts:c().bool},z.defaultProps={state:{removeInProgress:!1,isFetching:!1,isFiltering:!1,copyInProgress:!1,selectedItems:[],filterValue:void 0}};const G=z}}]);
//# sourceMappingURL=../sourcemaps/3452.3ff61587d05984d61af99294ae2ec69f.js.map