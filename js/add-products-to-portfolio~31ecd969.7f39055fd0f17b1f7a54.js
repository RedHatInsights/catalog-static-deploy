(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{433:function(e,t,n){"use strict";var r=n(89),a=n.n(r),o=n(29),i=n.n(o),c=n(0),s=n.n(c),l=n(12),p=n.n(l),u=n(432),d=n(212),f=n(23),m=function(e){var t=e.meta,n=t.limit,r=t.count,o=t.offset,c=e.apiProps,l=e.apiRequest,p=e.className,m=e.isCompact,b=i()(e,["meta","apiProps","apiRequest","className","isCompact"]);return s.a.createElement("div",{className:p},s.a.createElement(d.Pagination,a()({perPage:n||50,itemCount:r||0,onPerPageSelect:function(e,t){return l(c,{offset:o,limit:t})},page:Object(f.b)(n,o),onSetPage:function(e,t,r){var a={offset:Object(f.c)(t,n),limit:n},o=function(){return l(c,a)};return r?Object(u.a)(o,250)():o()},direction:"down",isCompact:m},b)))};m.propTypes={meta:p.a.shape({count:p.a.number,limit:p.a.number.isRequired,offset:p.a.number.isRequired}),apiRequest:p.a.func.isRequired,apiProps:p.a.any,className:p.a.string,isCompact:p.a.bool},m.defaultProps={meta:{count:0,limit:50,offset:0},className:"",isCompact:!1},t.a=m},451:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(12),i=n.n(o),c=function(e){var t=e.children;return a.a.createElement("div",{className:"pf-u-p-lg pf-u-pt-md pf-u-pb-md global-primary-background pf-u-mt-auto"},t)};c.propTypes={children:i.a.oneOfType([i.a.node,i.a.arrayOf(i.a.node)])},t.a=c},482:function(e,t,n){"use strict";t.__esModule=!0,t.FilterIconConfig={name:"FilterIcon",height:512,width:512,svgPath:"M487.976 0H24.028C2.71 0-8.047 25.866 7.058 40.971L192 225.941V432c0 7.831 3.821 15.17 10.237 19.662l80 55.98C298.02 518.69 320 507.493 320 487.98V225.941l184.947-184.97C520.021 25.896 509.338 0 487.976 0z",yOffset:0,xOffset:0,transform:""},t.FilterIcon=n(206).createIcon(t.FilterIconConfig),t.default=t.FilterIcon},493:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(12),i=n.n(o),c=n(437),s=function(e){var t=e.handleCheck,n=e.isChecked,r=e.id;return a.a.createElement(c.Checkbox,{onClick:function(e){return e.stopPropagation()},isChecked:n,onChange:t,"aria-label":"card checkbox",id:r})};s.propTypes={handleCheck:i.a.func,isChecked:i.a.bool,id:i.a.string},t.a=s},494:function(e,t,n){"use strict";var r=n(1),a=n.n(r),o=n(89),i=n.n(o),c=n(29),s=n.n(c),l=n(0),p=n.n(l),u=n(12),d=n.n(u),f=n(50),m=n(71),b=n(508),h=n(524),g=n(509),O=n(510),y=function(e){var t=e.name,n=(e.display_name,e.distributor),r=e.pathname,a=e.searchParams,o=e.preserveSearch,c=e.portfolioName,u=s()(e,["name","display_name","distributor","pathname","searchParams","preserveSearch","portfolioName"]);return p.a.createElement(O.a,null,p.a.createElement(m.TextContent,null,p.a.createElement(h.a,{pathname:r,searchParams:a,preserveSearch:o},p.a.createElement(f.Text,{component:f.TextVariants.h3,title:t},p.a.createElement(g.a,null,t))),n&&p.a.createElement(f.Text,{component:f.TextVariants.small},n),c&&p.a.createElement(l.Fragment,null,p.a.createElement(f.Text,{className:"pf-u-mb-0",component:"small"},"Portfolio"),p.a.createElement(f.Text,null,c))),p.a.createElement(b.a,i()({toDisplay:[u.description?"description":"long_description"]},u)))};y.propTypes={name:d.a.string,display_name:d.a.string,distributor:d.a.string,long_description:d.a.string,description:d.a.string,pathname:d.a.string,preserveSearch:d.a.bool,searchParams:d.a.shape(a()({},d.a.string,d.a.string)),portfolioName:d.a.string},t.a=y},576:function(e,t,n){"use strict";var r=n(89),a=n.n(r),o=n(29),i=n.n(o),c=n(30),s=n.n(c),l=n(0),p=n.n(l),u=n(31),d=n(12),f=n.n(d),m=n(72),b=n(127);function h(){var e=s()(["\n  margin-right: ",";\n"]);return h=function(){return e},e}function g(){var e=s()(["\n  display: flex !important;\n  align-items: center;\n"]);return g=function(){return e},e}var O=Object(u.b)(m.Button)(g()),y=u.b.span(h(),(function(e){return e.showSpinner?"8px":"0"})),v=function(e){var t=e.children,n=e.showSpinner,r=e.isDisabled,o=i()(e,["children","showSpinner","isDisabled"]);return p.a.createElement(O,a()({},o,{isDisabled:r}),p.a.createElement(y,{showSpinner:n},t),n&&p.a.createElement(b.Spinner,{size:"md"}))};v.propTypes={showSpinner:f.a.bool,children:f.a.oneOfType([f.a.node,f.a.arrayOf(f.a.node)]),isDisabled:f.a.bool},v.defaultProps={showSpinner:!1,isDisabled:!1},t.a=v},655:function(e,t,n){"use strict";var r=n(29),a=n.n(r),o=n(30),i=n.n(o),c=n(0),s=n.n(c),l=n(12),p=n.n(l),u=n(480),d=n(512),f=n(90),m=n(460),b=n(493),h=n(494),g=n(511),O=n(31);function y(){var e=i()(["\n  flex: 1;\n"]);return y=function(){return e},e}var v=Object(O.b)(f.Level)(y()),P=function(e){e.src;var t=a()(e,["src"]);return s.a.createElement(g.a,{key:t.id},s.a.createElement(u.CardHeader,null,s.a.createElement(v,null,s.a.createElement(m.a,{height:40,sourceId:t.source_id}),t.editMode&&s.a.createElement(b.a,{id:t.id,isChecked:t.checked,handleCheck:t.onToggleItemSelect}))),s.a.createElement(h.a,t),s.a.createElement(d.CardFooter,null))};P.propTypes={id:p.a.string.isRequired,service_offering_icon_id:p.a.string,source_id:p.a.string,platformId:p.a.string,name:p.a.string,editMode:p.a.bool,checked:p.a.bool,onToggleItemSelect:p.a.func,src:p.a.string},t.a=P},656:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(1),a=n.n(r),o=n(29),i=n.n(o),c=n(461);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p=function(e){var t=e.pathname,n=e.preserveSearch,r=e.id,a=i()(e,["pathname","preserveSearch","id"]);return{component:c.b.TOOLBAR_ITEM,key:"".concat(a.key,"/button-link"),fields:[{component:c.b.LINK,pathname:t,preserveSearch:n,key:"".concat(a.key,"/button-link"),isDisabled:a.isDisabled,id:r,fields:[l({component:c.b.BUTTON},a)]}]}}},886:function(e,t,n){"use strict";n.r(t);var r=n(17),a=n.n(r),o=n(22),i=n.n(o),c=n(1),s=n.n(c),l=n(89),p=n.n(l),u=n(0),d=n.n(u),f=n(12),m=n.n(f),b=n(29),h=n.n(b),g=n(440),O=n.n(g),y=n(482),v=n.n(y),P=n(513),j=n(481),E=n(86),k=n(438),T=n(92),C=function(e){var t=e.platform,n=Object(E.a)().formatMessage;return d.a.createElement(j.b,{Icon:t?O.a:v.a,title:n(t?T.a.addProducstFilterTitle:T.a.addProducstPlatformTitle),description:n(t?k.a.noResultsDescription:T.a.addProducstPlatformDescription)})};C.propTypes={platform:m.a.any};var S=function(e){var t=e.platform,n=h()(e,["platform"]);return d.a.createElement(P.a,p()({editMode:!0},n,{renderEmptyState:function(){return d.a.createElement(C,{platform:t})}}))};S.propTypes={checkedItems:m.a.arrayOf(m.a.string),platform:m.a.any},S.defaultProps={checkedItems:[]};var w=S,F=n(468),I=n(23),R=n(655),D=n(461),_=n(656),L=n(523),N=n(709),V=n.n(N);m.a.oneOfType([m.a.node,m.a.arrayOf(m.a.node)]).isRequired;var x=function(e){var t=e.onChange,n=h()(e,["onChange"]),r=Object(u.useState)(void 0),a=i()(r,2),o=a[0],c=a[1];return d.a.createElement("div",{key:"filter-select",id:"filter-select",className:"filter-select"},d.a.createElement(L.InternalSelect,p()({isDisabled:!n.options||0===n.options.length,name:"filter-select",simpleValue:!1,onChange:function(e){t(e||o),c(e||o)},value:o},n)))};x.propTypes={options:m.a.array,onChange:m.a.func.isRequired};var A=Object(u.memo)(x,(function(e,t){return V()(e.options,t.options)})),q=n(576),M=n(433);function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var H=function(e){var t=e.options,n=e.isFetching,r=e.searchValue,a=e.portfolioName,o=e.itemsSelected,i=e.onOptionSelect,c=e.onFilterChange,s=e.portfolioRoute,l=e.onClickAddToPortfolio,p=e.meta,u=e.platformId,d=e.fetchPlatformItems;return{fields:[{component:D.b.TOP_TOOLBAR,key:"add-products-toolbar",fields:[{component:D.b.TOP_TOOLBAR_TITLE,title:"Add products: ".concat(a),key:"add-products-title"},{component:D.b.LEVEL,key:"add-products-actions",fields:[{component:D.b.TOOLBAR,key:"add-products-actions-toolbar",fields:[{component:D.b.TOOLBAR_GROUP,key:"products-filter-group",fields:[{component:A,key:"select-platforms",id:"products-platform-select",isMulti:!1,isSearchable:!0,placeholder:"Filter by Platform",options:t,onChange:i},{component:D.b.FILTER_TOOLBAR_ITEM,key:"filter-products-input",onFilterChange:c,searchValue:r,isDisabled:!u,placeholder:"Filter products"}]},z({groupName:"cancel-group-item"},Object(_.a)({key:"add-products-cancel-button",pathname:s,variant:"link","aria-label":"Cancel Add products to Portfolio",preserveSearch:!0,title:"Cancel"})),{component:D.b.TOOLBAR_ITEM,key:"add-group-item",fields:[{key:"portfolio-items-add-group",component:q.a,variant:"primary","aria-label":"Add products to Portfolio",title:"Add",type:"button",onClick:l,isDisabled:!o||n,showSpinner:n,children:"Add",id:"add-products-to-portfolio"}]}]},{component:D.b.LEVEL_ITEM,key:"pagination-item",fields:p?[{component:M.a,key:"add-products-pagination",meta:p,apiProps:u,apiRequest:d,isCompact:!0}]:[]}]}]}]}},J=n(455),U=n(93),G=n(449),K=n(16),Q=n(451),W=n(431);function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return e.map((function(e){return d.a.createElement(R.a,p()({key:e.id},e,{editMode:!0,onToggleItemSelect:function(){return t(e.id)},checked:n.includes(e.id)}))}))},$={filterValue:"",isFetching:!1,isFiltering:!1},ee=function(e,t){switch(t.type){case"setFetching":return Y(Y({},e),{},{isFetching:t.payload});case"setFilterValue":return Y(Y({},e),{},{filterValue:t.payload});case"setFilteringFlag":return Y(Y({},e),{},{isFiltering:t.payload})}return e},te=Object(W.a)((function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:I.a;r(!0),n(Object(J.b)(e,t,Y(Y({},a),{},{filter:t}))).then((function(){return r(!1)}))}),1e3),ne=function(e){var t=e.portfolioRoute,n=Object(u.useState)(void 0),r=i()(n,2),o=r[0],c=r[1],s=Object(u.useState)([]),l=i()(s,2),p=l[0],f=l[1],m=Object(u.useReducer)(ee,$),b=i()(m,2),h=b[0],g=h.filterValue,O=h.isFetching,y=b[1],v=Object(G.a)().push,P=Object(K.useDispatch)(),j=Object(K.useSelector)((function(e){var t=e.portfolioReducer.selectedPortfolio,n=e.platformReducer;return{platforms:n.platforms,platformItems:n.platformItems,isLoading:n.isPlatformDataLoading,portfolio:t}})),E=j.portfolio,k=j.platforms,T=j.platformItems,C=j.isLoading;Object(u.useEffect)((function(){P(Object(J.c)())}),[]);var S=o&&T[o.id]?T[o.id].data:[],R=o&&T[o.id]&&T[o.id].meta;return d.a.createElement(u.Fragment,null,d.a.createElement(F.a,{schema:H({options:k.map((function(e){return{value:e.id,label:e.name,id:e.id}})),isFetching:O,portfolioName:E&&E.name||"",itemsSelected:p.length>0,onOptionSelect:function(e){c(e),P(Object(J.b)(e.id,g,I.a))},onFilterChange:function(e){return function(e){y({type:"setFilterValue",payload:e}),te(o.id,e,P,(function(e){return y({type:"setFilteringFlag",payload:e})}),Y(Y({},R),{},{offset:0}))}(e)},portfolioRoute:t,onClickAddToPortfolio:function(){return P({type:"setFetching",payload:!0}),P(Object(U.b)(E.id,p)).then((function(){return P({type:"setFetching",payload:!1})})).then((function(){return v({pathname:t,search:"?portfolio=".concat(E.id)})})).then((function(){return P(Object(U.f)(E.id))})).catch((function(){return P({type:"setFetching",payload:!1})}))},meta:R,platformId:o&&o.id,searchValue:g,fetchPlatformItems:function(e,t){return P(Object(J.b)(e,g,t))}})}),d.a.createElement(w,{platform:!!o,checkedItems:p,isLoading:C,items:Z(S,(function(e){return f(function(e){var t=p.indexOf(e);return t>-1?[].concat(a()(p.slice(0,t)),a()(p.slice(t+1))):[].concat(a()(p),[e])}(e))}),p)}),R&&R.count>0&&d.a.createElement(Q.a,null,d.a.createElement(M.a,{meta:R,apiProps:o&&o.id,apiRequest:function(e,t){return Object(J.b)(e,g,t)},dropDirection:"up"})))};ne.propTypes={portfolioRoute:m.a.string.isRequired};t.default=ne}}]);
//# sourceMappingURL=../sourcemaps/add-products-to-portfolio~31ecd969.js.map