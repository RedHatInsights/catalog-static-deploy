"use strict";(self.webpackChunkcatalog=self.webpackChunkcatalog||[]).push([[7742],{16936:(e,t,o)=>{o.r(t),o.d(t,{default:()=>j});var n=o(30624),r=o.n(n),a=o(45237),i=o(22720),s=o(15654),l=o(35388),u=o(7247),c=function(e,t){for(var o=0,n=t.length,r=e.length;o<n;o++,r++)e[r]=t[o];return e},p=function(e,t){void 0===e&&(e=""),void 0===t&&(t=[]);var o=t.map((function(e){return"filter[id][]="+e})).join("&");return(0,s.Hx)().get(l._R+"/workflows?filter[name][contains]="+e+"&"+(o||"")).then((function(e){return e.data.map((function(e){var t=e.id;return{label:e.name,value:t}}))}))},f=function(e,t,o){var n=e?e.map((function(e){return(0,s.xZ)().unlinkWorkflow(e,o)})):[],r=t?t.map((function(e){return(0,s.xZ)().linkWorkflow(e,o)})):[];return Promise.all(c(c([],n),r))},d=o(83215);var v=o(62945);const m=(0,v.vU)({unlinkNotification:{id:"approval.notifications.unlink",defaultMessage:"{count, number} {count, plural, one {approval process was} other {approval processes were}} unlinked successfully."},linkNotification:{id:"approval.notifications.link",defaultMessage:"{count, number} {count, plural, one {approval process was} other {approval processes were}} linked successfully."},setWorkflow:{id:"approval.workflows.set",defaultMessage:"Select approval processes for <strong>{objectName}</strong>"},currentWorkflows:{id:"approval.workflows.current",defaultMessage:"Current approval processes"}});var k=o(47786),g=o(74798),h=o(23349),w=o(28723),b=o(56915);const j=function(e){var t=e.objectType,o=e.removeSearch,c=e.keepHash,j=void 0!==c&&c,y=e.querySelector,N=e.pushParam,_=e.objectName,M=void 0===_?function(){return t}:_,S=e.postMethod,T=e.onClose,W=(0,h.Z)(),C=(0,n.useRef)(W((0,v.Em)({id:"workflows.modal.title",defaultMessage:"Set approval process"}))).current,Z=(0,a.useDispatch)(),x=(0,g.Z)({removeSearch:o,keepHash:j}),R=(0,k.Z)([y])[0],H=function(){T&&T(),x.push(N)};return r().createElement(w.Z,{title:C,onClose:H,onSubmit:function(e,o){var n,r,a;H(),Z((n=e,r=o,a={object_type:t,app_name:l.iC[t],object_id:R[y]},function(e,t){var o=function(e){return e().i18nReducer.formatMessage}(t);return e({type:i.k.UPDATE_WORKFLOWS,payload:f(r,n,a).then((function(){return e((0,d.wN)({variant:"success",title:"Success updating approval process",dismissable:!0,description:(r.length>0?o&&o(m.unlinkNotification,{count:r.length}):"")+"\n          "+(n.length>0?o(m.linkNotification,{count:n.length}):"")}))}))})})).then((function(){S&&Z(S())}))},getInitialTags:function(){return function(e,t,o){void 0===t&&(t={limit:u.he.limit,offset:u.he.offset}),void 0===o&&(o="");var n="app_name="+e.appName+"&object_type="+e.objectType+"&object_id="+e.objectId,r="&limit="+t.limit+"&offset="+t.offset,a="&filter[name][contains]="+o;return(0,s.Hx)().get(l._R+"/workflows?"+n+a+r)}({objectType:t,appName:l.iC[t],objectId:R[y]}).then((function(e){return e.data}))},loadTags:p,subTitle:W(m.setWorkflow,{strong:b.d,objectName:M(R[y])}),existingTagsMessage:W(m.currentWorkflows)})}}}]);
//# sourceMappingURL=../sourcemaps/edit-approval-workflow.abd69cf29132e1bf4dbb.js.map