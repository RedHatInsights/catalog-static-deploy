(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{716:function(e,t,r){"use strict";r.r(t);var i,n=r(398),o=r.n(n),a=r(44),s=r.n(a),c=r(36),p=r.n(c),d=r(1),l=r.n(d),u=r(0),E=r.n(u),f=r(2),m=r.n(f),P=r(52),L=r(432),I=r(711),_=r.n(I),S=r(712),h=r(93),D=r(62),T=r(11),b=r(92),O=r(591),A=r(37),v=r(91),R=(i={},l()(i,L.componentTypes.TEXT_FIELD,{attributes:[S.fieldProperties.LABEL,S.fieldProperties.HELPER_TEXT,S.fieldProperties.PLACEHOLDER,S.fieldProperties.IS_DISABLED,S.fieldProperties.IS_READ_ONLY,S.fieldProperties.HIDE_FIELD]}),l()(i,L.componentTypes.CHECKBOX,{attributes:[S.fieldProperties.LABEL,S.fieldProperties.IS_DISABLED,S.fieldProperties.OPTIONS,S.fieldProperties.HIDE_FIELD]}),l()(i,L.componentTypes.SELECT,{attributes:[S.fieldProperties.OPTIONS,S.fieldProperties.LABEL,S.fieldProperties.IS_DISABLED,S.fieldProperties.PLACEHOLDER,S.fieldProperties.HELPER_TEXT,S.fieldProperties.HIDE_FIELD]}),l()(i,L.componentTypes.DATE_PICKER,{attributes:[S.fieldProperties.LABEL,S.fieldProperties.TODAY_BUTTON_LABEL,S.fieldProperties.IS_CLEARABLE,S.fieldProperties.CLOSE_ON_DAY_SELECT,S.fieldProperties.SHOW_TODAY_BUTTON,S.fieldProperties.HIDE_FIELD]}),l()(i,L.componentTypes.PLAIN_TEXT,{attributes:[S.fieldProperties.MULTI_LINE_LABEL]}),l()(i,L.componentTypes.RADIO,{attributes:[S.fieldProperties.LABEL,S.fieldProperties.IS_DISABLED,S.fieldProperties.OPTIONS,S.fieldProperties.HIDE_FIELD]}),l()(i,L.componentTypes.SWITCH,{attributes:[S.fieldProperties.LABEL,S.fieldProperties.IS_READ_ONLY,S.fieldProperties.IS_DISABLED,S.fieldProperties.HIDE_FIELD]}),l()(i,L.componentTypes.TEXTAREA,{attributes:[S.fieldProperties.LABEL,S.fieldProperties.HELPER_TEXT,S.fieldProperties.IS_READ_ONLY,S.fieldProperties.IS_DISABLED,S.fieldProperties.HIDE_FIELD]}),i),B={componentMapper:S.builderMapper,pickerMapper:S.pickerMapper,propertiesMapper:S.propertiesMapper,componentProperties:R},y=function(e){return E.a.createElement(_.a,e)},j=function(e){var t=e.closeUrl,r=e.search,i=e.portfolioItem,n=e.uploadIcon,a=Object(u.useState)(),c=p()(a,2),d=c[0],l=c[1],f=Object(u.useState)(!1),m=p()(f,2),L=m[0],I=m[1],_=Object(u.useState)(),R=p()(_,2),j=R[0],g=R[1],H=Object(u.useState)(),F=p()(H,2),N=F[0],C=F[1],M=Object(A.useDispatch)(),U=Object(P.g)().push,q=function(){return Object(D.a)().get("".concat(T.c,"/portfolio_items/").concat(i.id,"/service_plans")).then((function(e){var t=p()(e,1)[0].create_json_schema.schema;return C(e[0]),e[0].imported?Object(D.a)().get("".concat(T.c,"/service_plans/").concat(e[0].id,"/base")).then((function(e){return g(e.create_json_schema.schema),t})):t})).then((function(e){l(e),I(!1)}))};Object(u.useEffect)((function(){q()}),[]);var X=function(e){return Object(D.h)().patchServicePlanModified("".concat(N.id),{modified:{schema:e}})},Y=function(e){return Object(D.h)().createServicePlan({portfolio_item_id:i.id}).then((function(e){return p()(e,1)[0].id})).then((function(t){return Object(D.h)().patchServicePlanModified("".concat(t),{modified:{schema:e}})}))},w=function(e){return I(!0),(N.imported?X:Y)(e).then((function(){return I(!1),M(Object(v.addNotification)({variant:"success",title:"Survey of ".concat(i.name," has been modified."),dismissable:!0})),U({pathname:t,search:r})})).catch((function(e){I(!1),M({type:"EDIT_SURVEY_REJECTED",payload:e})}))};return E.a.createElement(u.Fragment,null,d?E.a.createElement(y,o()({},B,{schema:d,disableDrag:!0,disableAdd:!0,schemaTemplate:j,mode:"subset"}),(function(e){var o=e.getSchema,a=e.isValid,c=s()(e,["getSchema","isValid"]);return(E.a.createElement(u.Fragment,null,E.a.createElement(O.b,{key:"survey-editor-toolbar",uploadIcon:n,product:i,handleSaveSurvey:function(){return w(o())},isValid:a,closeUrl:t,search:r,isFetching:L||!d,modified:N.modified,handleResetSurvey:function(){return e=N.id,l(void 0),void Object(D.h)().resetServicePlanModified(e).then(q).then((function(){return M(Object(v.addNotification)({variant:"success",title:"Survey of ".concat(i.name," has been restored."),dismissable:!0}))}));var e}}),E.a.createElement(S.BuilderTemplate,c),";"))})):E.a.createElement(u.Fragment,null,E.a.createElement(O.b,{uploadIcon:n,product:i,handleSaveSurvey:w,closeUrl:t,search:r,isFetching:!d||L}),E.a.createElement(b.Bullseye,null,E.a.createElement(h.Spinner,null))))};j.propTypes={closeUrl:m.a.string.isRequired,search:m.a.string.isRequired,uploadIcon:m.a.func.isRequired,portfolioItem:m.a.shape({id:m.a.string.isRequired,name:m.a.string.isRequired}).isRequired,portfolio:m.a.object.isRequired},t.default=j}}]);
//# sourceMappingURL=../sourcemaps/survey-editor.js.map