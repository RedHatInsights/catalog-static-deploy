(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{560:function(e,t,n){"use strict";var r=n(9),a=n.n(r),o=n(169),i=n.n(o),c=n(78);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var l=function(e){return"string"==typeof e?e.split("?")[0]:"object"===i()(e)?s(s({},e),{},{search:void 0}):e};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.removeSearch,n=e.keepHash,r=Object(c.g)();return s(s({},r),{},{push:function(e){var a=e;return n&&r.location.hash.length>0&&(a="object"===i()(a)?s(s({},a),{},{hash:r.location.hash}):"".concat(a).concat(r.location.hash)),t?r.push(l(a)):r.push(a)}})}},722:function(e,t,n){"use strict";var r=n(27),a=n.n(r),o=n(28),i=n(171);function c(){var e=a()(["\n  overflow: hidden;\n"]);return c=function(){return e},e}var u=Object(o.b)(i.Bullseye)(c());t.a=u},903:function(e,t,n){"use strict";n.r(t);var r=n(9),a=n.n(r),o=n(607),i=n.n(o),c=n(608),u=n.n(c),s=n(15),l=n.n(s),p=n(0),f=n.n(p),b=n(3),m=n.n(b),d=n(17),v=n(170),h=n(168),O=n(172),j=n(35),y=n.n(j),g=n(5),w=n(99),P=n(25),E=Object(w.a)((function(e,t){return Object(P.e)(e).then((function(n){var r=n.data;if(!e||0===e.trim().length)throw"Required";if(r.find((function(n){return n.name===e&&n.id!==t})))throw"Name has already been taken"}))})),S=function(e,t){var n,r,a,o,i;return{fields:[{label:"schemas.portfolio.name",name:"name",component:y.a.TEXT_FIELD,isRequired:!0,maxLength:(null===(i=null===(o=null===(a=null===(r=null===(n=null==e?void 0:e.components)||void 0===n?void 0:n.schemas)||void 0===r?void 0:r.Portfolio)||void 0===a?void 0:a.properties)||void 0===o?void 0:o.name)||void 0===i?void 0:i.maxLength)||g.d,validate:[function(e){return E(e,t)}]},{label:"schemas.portfolio.description",component:y.a.TEXTAREA,name:"description"}]}},T=n(122),D=n(79),k=n(560),R=n(722),x=n(181),C=n(11),q=n(104),L=n(101),A=n(42),Q=n(165),H=n(21);function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var X=function(e){var t,n,r=e.removeQuery,a=e.closeTarget,o=e.viewState,c=Object(H.a)(),s=Object(d.useDispatch)(),b=Object(p.useState)(!0),m=l()(b,2),j=m[0],y=m[1],g=Object(p.useContext)(q.a).openApiSchema,w=Object(D.a)(["portfolio"]),E=l()(w,1)[0].portfolio,J=Object(k.a)({removeQuery:r,keepHash:!0}).push,X=Object(d.useSelector)((function(e){var t=e.portfolioReducer;return Object(P.g)(t,E)})),_=function(){var e=u()(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={variant:"success",title:c(A.a.addSuccessTitle),description:c(A.a.addSuccessDescription,{name:t.name,b:function(e){return f.a.createElement("b",{key:"strong"},e)}})},e.next=3,s(Object(T.a)(t,n));case 3:return r=e.sent,e.abrupt("return",r&&r.value&&r.value.id?J({pathname:C.y,search:"?portfolio=".concat(r.value.id)}):J(a));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=E&&X&&Object.keys(X).length>0;return!1===(null==X||null===(t=X.metadata)||void 0===t||null===(n=t.user_capabilities)||void 0===n?void 0:n.update)?f.a.createElement(x.a,null):f.a.createElement(v.Modal,{title:c(E?A.a.modalEditTitle:A.a.modalCreateTitle),isOpen:j,onClose:function(){return J(a)},variant:"small"},!E||B?f.a.createElement(O.c,{schema:S(g,E),schemaType:"default",onSubmit:function(e){return X?(y(!1),s(Object(T.o)(e,o)).then((function(){return J(a)}))):_(e,o)},onCancel:function(){return J(a)},initialValues:N({},X),formContainer:"modal",templateProps:{submitLabel:c(E?L.a.save:Q.a.create),disableSubmit:["pristine","submitting"]}}):f.a.createElement(R.a,{className:"pf-u-m-md"},f.a.createElement(h.Spinner,null)))};X.propTypes={removeQuery:m.a.bool,closeTarget:m.a.oneOfType([m.a.string,m.a.shape({pathname:m.a.string.isRequired,search:m.a.string})]).isRequired,viewState:m.a.shape({count:m.a.number,limit:m.a.number,offset:m.a.number,filter:m.a.string})};t.default=X}}]);
//# sourceMappingURL=../sourcemaps/add-portfolio~5a4d8549.js.map