(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{387:function(e,t,n){"use strict";var r=n(386);t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{onlyResolvesLast:!1};return Object(r.a)(e,t,n)}},388:function(e,t,n){"use strict";var r=n(385),a=n.n(r),o=n(45),i=n.n(o),c=n(0),s=n.n(c),l=n(12),u=n.n(l),f=n(386),p=n(186),d=n(59),m=function(e){var t=e.meta,n=t.limit,r=t.count,o=t.offset,c=e.apiProps,l=e.apiRequest,u=e.className,m=e.isCompact,g=i()(e,["meta","apiProps","apiRequest","className","isCompact"]);return s.a.createElement("div",{className:u},s.a.createElement(p.Pagination,a()({perPage:n||50,itemCount:r||0,onPerPageSelect:function(e,t){return l(c,{offset:o,limit:t})},page:Object(d.b)(n,o),onSetPage:function(e,t,r){var a={offset:Object(d.c)(t,n),limit:n},o=function(){return l(c,a)};return r?Object(f.a)(o,250)():o()},direction:"down",isCompact:m},g)))};m.propTypes={meta:u.a.shape({count:u.a.number,limit:u.a.number.isRequired,offset:u.a.number.isRequired}),apiRequest:u.a.func.isRequired,apiProps:u.a.any,className:u.a.string,isCompact:u.a.bool},m.defaultProps={meta:{count:0,limit:50,offset:0},className:"",isCompact:!1},t.a=m},393:function(e,t,n){"use strict";n.d(t,"c",(function(){return j})),n.d(t,"b",(function(){return _})),n.d(t,"d",(function(){return k})),n.d(t,"a",(function(){return C})),n.d(t,"e",(function(){return T}));var r={};n.r(r),n.d(r,"getPlatforms",(function(){return h})),n.d(r,"getPlatform",(function(){return b})),n.d(r,"getPlatformItems",(function(){return y})),n.d(r,"getPlatformInventories",(function(){return v})),n.d(r,"getServiceOffering",(function(){return O}));var a=n(1),o=n.n(a),i=n(2),c=n(34),s=n.n(c),l=n(75),u=n(14),f=n(59);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m=Object(l.a)(),g=Object(l.b)(),h=function(){return g.post("".concat(u.i,"/graphql"),{query:'\nquery {\n  application_types (filter: { name: "/insights/platform/catalog" }) {\n    id\n    name\n    sources {\n      id\n      name\n      source_type_id\n    }\n  }\n}'}).then((function(e){return e.data.application_types})).then((function(e){return s()(e,1)[0].sources}))},b=function(e){return m.get("".concat(u.i,"/sources/").concat(e))},y=function(e,t,n){var r=t?"&filter[name][contains_i]=".concat(t):"";return e?m.get("".concat(u.j,"/sources/").concat(e,"/service_offerings?filter[archived_at][nil]").concat(r).concat(n?"&limit=".concat(n.limit,"&offset=").concat(n.offset):"")):m.get("".concat(u.j,"/service_offerings"))},v=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:f.a;return e?m.get("".concat(u.j,"/sources/").concat(e,"/service_inventories?filter[name][contains_i]=").concat(t).concat(n?"&limit=".concat(n.limit,"&offset=").concat(n.offset):"")):m.get("".concat(u.j,"/service_inventories?limit=").concat(n.limit,"&offset=").concat(n.offset))},O=function(e,t){return Promise.all([m.get("".concat(u.j,"/service_offerings/").concat(e)),m.get("".concat(u.i,"/sources/").concat(t)).then((function(e){return m.get("".concat(u.i,"/source_types/").concat(e.source_type_id)).then((function(t){var n=t.icon_url;return d(d({},e),{},{icon_url:n})}))}))]).then((function(e){var t=s()(e,2);return{service:t[0],source:t[1]}}))};function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var j=function(){return function(e){return e({type:"".concat(i.k,"_PENDING")}),h().then((function(t){return e({type:"".concat(i.k,"_FULFILLED"),payload:t})})).catch((function(t){return e({type:"".concat(i.k,"_REJECTED"),payload:t})}))}},_=function(e,t,n){return{type:i.n,payload:y(e,t,n),meta:E({platformId:e,filter:t},n)}},k=function(e){return{type:i.j,payload:b(e)}},C=function(e,t,n){return{type:i.l,payload:v(e,t,n)}},T=function(){return{type:i.v,payload:O.apply(r,arguments)}}},397:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),a=r.__importStar(n(0)),o=r.__importDefault(n(192)),i=n(4),c=()=>{};class s extends a.Component{constructor(e){super(e),this.handleChange=e=>{this.props.onChange(e.currentTarget.checked,e)}}render(){const e=this.props,{"aria-label":t,className:n,onChange:s,isValid:l,isDisabled:u,isChecked:f,label:p,checked:d,defaultChecked:m,description:g}=e,h=r.__rest(e,["aria-label","className","onChange","isValid","isDisabled","isChecked","label","checked","defaultChecked","description"]),b={};return([!0,!1].includes(d)||!0===f)&&(b.checked=d||f),s!==c&&(b.checked=f),[!1,!0].includes(m)&&(b.defaultChecked=m),b.checked=null!==b.checked&&b.checked,a.createElement("div",{className:i.css(o.default.check,n)},a.createElement("input",Object.assign({},h,{className:i.css(o.default.checkInput),type:"checkbox",onChange:this.handleChange,"aria-invalid":!l,"aria-label":t,disabled:u,ref:e=>e&&(e.indeterminate=null===f)},b)),p&&a.createElement("label",{className:i.css(o.default.checkLabel,u&&o.default.modifiers.disabled),htmlFor:h.id},p),g&&a.createElement("div",{className:i.css(o.default.checkDescription)},g))}}t.Checkbox=s,s.displayName="Checkbox",s.defaultProps={className:"",isValid:!0,isDisabled:!1,isChecked:!1,onChange:c}},405:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(12),i=n.n(o),c=function(e){var t=e.children;return a.a.createElement("div",{className:"pf-u-p-lg pf-u-pt-md pf-u-pb-md global-primary-background pf-u-mt-auto"},t)};c.propTypes={children:i.a.oneOfType([i.a.node,i.a.arrayOf(i.a.node)])},t.a=c},413:function(e,t,n){"use strict";var r=(0,n(47).defineMessages)({workflowColumn:{id:"platform.inventories.columns.workflow",defaultMessage:"Workflow"},noInventoriesDescription:{id:"platform.inventories.empty.no-inventories",defaultMessage:"No inventories found."},noInventoriesFilterDescription:{id:"platform.inventories.empty.no-results",defaultMessage:"No inventories match your filter criteria."},inventoriesFilter:{id:"platform.inventories.filter.placeholder",defaultMessage:"Filter by inventory"},templatesFilter:{id:"platform.templates.filter.placeholder",defaultMessage:"Filter by template"},noTemplatesTitle:{id:"platform.templates.no-templates",defaultMessage:"No templates"},noTemplatesDescription:{id:"platform.templates.empty.no-templates",defaultMessage:"This platform has no templates."},configureSourceTitle:{id:"platforms.list.configure-source",defaultMessage:"Configure a source in order to add products to portfolios."},connectSource:{id:"platforms.list.connect-source",defaultMessage:"To connect to a source, go to <a>Sources</a> under Settings."},contactAdmin:{id:"platforms.list.contact-admin",defaultMessage:"Contact your organization administrator to setup sources for Catalog."},title:{id:"platforms.title",defaultMessage:"Platforms"},noPlatforms:{id:"platforms.list.empty.title",defaultMessage:"No platforms yet"},offeringTitle:{id:"platforms.offerings.detail.title",defaultMessage:"Service offering"},offeringParameters:{id:"platforms.offerings.detail.extra-params",defaultMessage:"Extra parameters"}});t.a=r},431:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(12),i=n.n(o),c=n(397),s=function(e){var t=e.handleCheck,n=e.isChecked,r=e.id;return a.a.createElement(c.Checkbox,{onClick:function(e){return e.stopPropagation()},isChecked:n,onChange:t,"aria-label":"card checkbox",id:r})};s.propTypes={handleCheck:i.a.func,isChecked:i.a.bool,id:i.a.string},t.a=s},432:function(e,t,n){"use strict";var r=n(1),a=n.n(r),o=n(385),i=n.n(o),c=n(45),s=n.n(c),l=n(0),u=n.n(l),f=n(12),p=n.n(f),d=n(40),m=n(58),g=n(441),h=n(455),b=n(442),y=n(443),v=function(e){var t=e.name,n=(e.display_name,e.distributor),r=e.pathname,a=e.searchParams,o=e.preserveSearch,c=e.portfolioName,f=s()(e,["name","display_name","distributor","pathname","searchParams","preserveSearch","portfolioName"]);return u.a.createElement(y.a,null,u.a.createElement(m.TextContent,null,u.a.createElement(h.a,{pathname:r,searchParams:a,preserveSearch:o},u.a.createElement(d.Text,{component:d.TextVariants.h3,title:t},u.a.createElement(b.a,null,t))),n&&u.a.createElement(d.Text,{component:d.TextVariants.small},n),c&&u.a.createElement(l.Fragment,null,u.a.createElement(d.Text,{className:"pf-u-mb-0",component:"small"},"Portfolio"),u.a.createElement(d.Text,null,c))),u.a.createElement(g.a,i()({toDisplay:[f.description?"description":"long_description"]},f)))};v.propTypes={name:p.a.string,display_name:p.a.string,distributor:p.a.string,long_description:p.a.string,description:p.a.string,pathname:p.a.string,preserveSearch:p.a.bool,searchParams:p.a.shape(a()({},p.a.string,p.a.string)),portfolioName:p.a.string},t.a=v},456:function(e,t,n){"use strict";t.__esModule=!0,t.WrenchIconConfig={name:"WrenchIcon",height:512,width:512,svgPath:"M507.73 109.1c-2.24-9.03-13.54-12.09-20.12-5.51l-74.36 74.36-67.88-11.31-11.31-67.88 74.36-74.36c6.62-6.62 3.43-17.9-5.66-20.16-47.38-11.74-99.55.91-136.58 37.93-39.64 39.64-50.55 97.1-34.05 147.2L18.74 402.76c-24.99 24.99-24.99 65.51 0 90.5 24.99 24.99 65.51 24.99 90.5 0l213.21-213.21c50.12 16.71 107.47 5.68 147.37-34.22 37.07-37.07 49.7-89.32 37.91-136.73zM64 472c-13.25 0-24-10.75-24-24 0-13.26 10.75-24 24-24s24 10.74 24 24c0 13.25-10.75 24-24 24z",yOffset:0,xOffset:0,transform:""},t.WrenchIcon=n(183).createIcon(t.WrenchIconConfig),t.default=t.WrenchIcon},486:function(e,t,n){"use strict";var r=n(23),a=n.n(r),o=n(0),i=n.n(o),c=n(12),s=n.n(c),l=n(420),u=n(445),f=n(76),p=n(14),d=n(419),m=n(431),g=n(432),h=n(444),b=n(24);function y(){var e=a()(["\n  flex: 1;\n"]);return y=function(){return e},e}var v=Object(b.b)(f.Level)(y()),O=function(e){return i.a.createElement(h.b,{isDisabled:e.removeInProgress&&e.isSelected},i.a.createElement(h.a,null,i.a.createElement(l.CardHeader,null,i.a.createElement(v,null,i.a.createElement(d.a,{src:"".concat(p.c,"/portfolio_items/").concat(e.id,"/icon"),sourceId:e.service_offering_source_ref}),e.isSelectable&&i.a.createElement(m.a,{handleCheck:function(){return e.onSelect(e.id)},isChecked:e.isSelected,id:e.id}))),i.a.createElement(g.a,e),i.a.createElement(u.CardFooter,null)))};O.propTypes={id:s.a.string,platformId:s.a.string,service_offering_source_ref:s.a.string,isSelectable:s.a.bool,isSelected:s.a.bool,onSelect:s.a.func,orderUrl:s.a.string,removeInProgress:s.a.bool,portfolio_id:s.a.string,metadata:s.a.shape({user_capabilities:s.a.shape({destroy:s.a.bool}).isRequired}).isRequired},t.a=O},700:function(e,t,n){"use strict";n.r(t);var r=n(385),a=n.n(r),o=n(34),i=n.n(o),c=n(1),s=n.n(c),l=n(0),u=n.n(l),f=n(26),p=n(456),d=n.n(p),m=n(403),g=n.n(m),h=n(401),b=n(104),y=n(486),v=n(399),O=n(388),P=function(e){var t=e.meta,n=e.fetchProducts,r=e.isLoading,a=e.filterProps,o=a.searchValue,i=a.onFilterChange,c=a.placeholder;return{fields:[{component:v.b.TOP_TOOLBAR,key:"products-top-toolbar",fields:[{component:v.b.TOP_TOOLBAR_TITLE,key:"products-toolbar-title",title:"Products",description:"All products collected from your portfolios",noData:t.noData},{component:v.b.LEVEL,key:"Products-actions",fields:t.noData?[]:[{component:v.b.TOOLBAR,key:"main-portfolio-toolbar",fields:[{groupName:"filter-group",component:v.b.FILTER_TOOLBAR_ITEM,key:"filter-input",searchValue:o,onFilterChange:i,placeholder:c,isClearable:!0}]},{component:v.b.LEVEL_ITEM,key:"pagination-item",fields:t.count>0?[{component:O.a,key:"products-pagination",meta:t,apiProps:o,apiRequest:n,isDisabled:r,isCompact:!0}]:[]}]}]}]}},E=n(409),j=n(59),_=n(446),k=n(393),C=n(387),T=n(421),D=n(60),w=n(58),S=n(40),F=n(156),N=n(11),I=n(405),M=n(116),x=n(66),R=n(73),L=n(410),V=(0,n(47).defineMessages)({addSource:{id:"products.empty.add-source",defaultMessage:"Add source"},configureSource:{id:"products.empty.configure-source",defaultMessage:"Configure a source and add products into portfolios."},title:{id:"products.toolbar.title",defaultMessage:"Products"}}),q=n(413);function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var W=Object(C.a)((function(e,t,n){n(!0),t(Object(h.e)(e,j.a)).then((function(){return n(!1)}))}),1e3),z={filterValue:"",isOpen:!1,isFetching:!0,isFiltering:!1},J=function(e,t){switch(t.type){case"setFetching":return B(B({},e),{},{isFetching:t.payload});case"setFilterValue":return B(B({},e),{},{filterValue:t.payload});case"setFilteringFlag":return B(B({},e),{},{isFiltering:t.payload})}return e};t.default=function(){var e,t=Object(R.a)().formatMessage,n=Object(M.a)(),r=Object(l.useContext)(F.a).release,o=Object(l.useReducer)(J,B(B({},z),{},{filterValue:(null==n||null===(e=n.products)||void 0===e?void 0:e.filter)||""})),c=i()(o,2),s=c[0],p=s.isFetching,m=s.filterValue,v=s.isFiltering,j=c[1],C=Object(l.useContext)(x.a).userIdentity.identity.user.is_org_admin,A=Object(f.useDispatch)(),U=Object(f.useSelector)((function(e){return e.portfolioReducer.portfolioItems})),G=U.data,H=U.meta;Object(l.useEffect)((function(){var e;Promise.all([A(Object(h.e)(null==n||null===(e=n.products)||void 0===e?void 0:e.filter,null==n?void 0:n.products)),A(Object(k.c)())]).then((function(){return j({type:"setFetching",payload:!1})})),Object(b.c)(),insights.chrome.appNavClick({id:"products",secondaryNav:!0})}),[]);var K=function(e){j({type:"setFilterValue",payload:e}),W(e,A,(function(e){return j({type:"setFilteringFlag",payload:e})}))},Q=G.map((function(e){return u.a.createElement(y.a,a()({key:e.id,pathname:e.portfolio_id&&N.t},(n=(t=e).portfolio_id,r=t.id,o=t.service_offering_source_ref,n&&r&&o?{pathname:n&&N.t,searchParams:{portfolio:n,"portfolio-item":r,source:o}}:{}),e,{toDisplay:[]}));var t,n,r,o})),X={PrimaryAction:H.noData?function(){return C&&u.a.createElement("a",{href:"".concat(r,"settings/sources/new")},u.a.createElement(D.Button,{variant:"primary"},t(V.addSource)))}:function(){return u.a.createElement(D.Button,{variant:"link",onClick:function(){return K("")}},t(L.a.clearFilters))},title:H.noData?t(L.a.noProducts):t(L.a.noResults),renderDescription:function(){return u.a.createElement(l.Fragment,null,u.a.createElement(w.TextContent,null,u.a.createElement(S.Text,{component:S.TextVariants.p},H.noData?t(V.configureSource):t(L.a.noResultsDescription)),C?u.a.createElement(S.Text,{component:S.TextVariants.p},t(q.a.connectSource,{a:function(e){return u.a.createElement(l.Fragment,null,u.a.createElement("a",{href:"".concat(document.baseURI,"settings/sources")},e))}})):u.a.createElement(S.Text,null,t(q.a.contactAdmin))))},Icon:H.noData?d.a:g.a};return u.a.createElement(l.Fragment,null,u.a.createElement(E.a,{schema:P({filterProps:{searchValue:m,onFilterChange:K,placeholder:t(L.a.filterByProduct)},title:t(V.title),isLoading:v||p,meta:H,fetchProducts:function(){return A(h.e.apply(void 0,arguments))}})}),u.a.createElement(_.a,{isLoading:v||p,items:Q,renderEmptyState:function(){return u.a.createElement(T.b,X)}}),H.count>0&&u.a.createElement(I.a,null,u.a.createElement(O.a,{dropDirection:"up",meta:H,apiRequest:function(e,t){var r;return A(Object(h.e)(null==n||null===(r=n.products)||void 0===r?void 0:r.filter,t))}})))}}}]);
//# sourceMappingURL=../sourcemaps/products~31ecd969.js.map