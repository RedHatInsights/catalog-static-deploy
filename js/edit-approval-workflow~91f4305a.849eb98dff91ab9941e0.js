(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{560:function(e,t,n){"use strict";var o=n(9),a=n.n(o),r=n(169),c=n.n(r),i=n(78);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var l=function(e){return"string"==typeof e?e.split("?")[0]:"object"===c()(e)?u(u({},e),{},{search:void 0}):e};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.removeSearch,n=e.keepHash,o=Object(i.g)();return u(u({},o),{},{push:function(e){var a=e;return n&&o.location.hash.length>0&&(a="object"===c()(a)?u(u({},a),{},{hash:o.location.hash}):"".concat(a).concat(o.location.hash)),t?o.push(l(a)):o.push(a)}})}},775:function(e,t,n){"use strict";n.r(t);var o=n(15),a=n.n(o),r=n(0),c=n.n(r),i=n(3),s=n.n(i),u=n(17),l=n(48),p=n.n(l),f=n(97),b=n(29),d=n(5),h=n(22),g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=t.map((function(e){return"filter[id][]=".concat(e)})).join("&");return Object(b.a)().get("".concat(d.a,"/workflows?filter[name][contains]=").concat(e,"&").concat(n||"")).then((function(e){return e.data.map((function(e){var t=e.id;return{label:e.name,value:t}}))}))},j=function(e,t,n){var o=e?e.map((function(e){return Object(b.j)().unlinkWorkflow(e,n)})):[],a=t?t.map((function(e){return Object(b.j)().linkWorkflow(e,n)})):[];return Promise.all([].concat(p()(o),p()(a)))},v=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{limit:h.a.limit,offset:h.a.offset},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o="app_name=".concat(e.appName,"&object_type=").concat(e.objectType,"&object_id=").concat(e.objectId),a="&limit=".concat(t.limit,"&offset=").concat(t.offset),r="&filter[name][contains]=".concat(n);return Object(b.a)().get("".concat(d.a,"/workflows?").concat(o).concat(r).concat(a))},m=n(100),O=function(e){return e().i18nReducer.formatMessage},w=(0,n(26).defineMessages)({unlinkNotification:{id:"approval.notifications.unlink",defaultMessage:"{count, number} {count, plural, one {approval process was} other {approval processes were}} unlinked successfully."},linkNotification:{id:"approval.notifications.link",defaultMessage:"{count, number} {count, plural, one {approval process was} other {approval processes were}} linked successfully."},setWorkflow:{id:"approval.workflows.set",defaultMessage:"Select approval processes for <strong>{objectName}</strong>"},currentWorkflows:{id:"approval.workflows.current",defaultMessage:"Current approval processes"}}),k=n(79),y=n(560),P=n(26),S=n(21),N=n(187),T=n(185),M=function(e){var t=e.objectType,n=e.removeSearch,o=e.keepHash,i=e.querySelector,s=e.pushParam,l=e.objectName,p=void 0===l?function(){return t}:l,b=e.onClose,h=Object(S.a)(),M=Object(r.useRef)(h(Object(P.defineMessage)({id:"workflows.modal.title",defaultMessage:"Set approval process"}))).current,W=Object(u.useDispatch)(),R=Object(y.a)({removeSearch:n,keepHash:o}),_=Object(k.a)([i]),q=a()(_,1)[0],D=function(){b&&b(),R.push(s)};return c.a.createElement(N.a,{title:M,onClose:D,onSubmit:function(e,n){var o,a,r;D(),W((o=e,a=n,r={object_type:t,app_name:d.b[t],object_id:q[i]},function(e,t){var n=O(t);return e({type:f.a.UPDATE_WORKFLOWS,payload:j(a,o,r).then((function(){return e(Object(m.addNotification)({variant:"success",title:"Success updating approval process",dismissable:!0,description:"".concat(a.length>0?n(w.unlinkNotification,{count:a.length}):"","\n          ").concat(o.length>0?n(w.linkNotification,{count:o.length}):"")}))}))})}))},getInitialTags:function(){return v({objectType:t,appName:d.b[t],objectId:q[i]}).then((function(e){return e.data}))},loadTags:g,subTitle:h(w.setWorkflow,{strong:T.a,objectName:p(q[i])}),existingTagsMessage:h(w.currentWorkflows)})};M.propTypes={pushParam:s.a.oneOfType([s.a.string,s.a.shape({pathname:s.a.string.isRequired,search:s.a.string})]).isRequired,objectType:s.a.string.isRequired,objectName:s.a.func,removeSearch:s.a.bool,querySelector:s.a.oneOf(["portfolio","platform","inventory","portfolio-item"]).isRequired,keepHash:s.a.bool,onClose:s.a.func},M.defaultProps={keepHash:!1};t.default=M}}]);
//# sourceMappingURL=../sourcemaps/edit-approval-workflow~91f4305a.js.map