(window.webpackJsonp=window.webpackJsonp||[]).push([[49,11],{577:function(e,t,r){"use strict";var n=r(69),a=r.n(n),o=r(70),i=r.n(o),s=r(0),c=r.n(s),l=r(4),u=r.n(l),d=r(179),f=r(284),p=r(23),m=function(e){var t=e.meta,r=t.limit,n=t.count,o=t.offset,s=e.apiProps,l=e.apiRequest,u=e.className,m=e.isCompact,y=i()(e,["meta","apiProps","apiRequest","className","isCompact"]);return c.a.createElement("div",{className:u},c.a.createElement(f.Pagination,a()({perPage:r||50,itemCount:n||0,onPerPageSelect:function(e,t){return l(s,{offset:o,limit:t})},page:Object(p.b)(r,o),onSetPage:function(e,t,n){var a={offset:Object(p.c)(t,r),limit:r},o=function(){return l(s,a)};return n?Object(d.a)(o,250)():o()},direction:"down",isCompact:m},y)))};m.propTypes={meta:u.a.shape({count:u.a.number,limit:u.a.number.isRequired,offset:u.a.number.isRequired}),apiRequest:u.a.func.isRequired,apiProps:u.a.any,className:u.a.string,isCompact:u.a.bool},m.defaultProps={meta:{count:0,limit:50,offset:0},className:"",isCompact:!1},t.a=m},578:function(e,t,r){"use strict";var n=r(21),a=Object(n.b)({noItems:{id:"common.filtering.noItems",defaultMessage:"No items found"},filterByProduct:{id:"common.filtering.filterByProduct",defaultMessage:"Filter by product"},noResults:{id:"common.filtering.noResults",defaultMessage:"No results found"},noResultsDescription:{id:"common.filtering.noResultsDescription",defaultMessage:"No results match the filter criteria. Remove all filters or clear all filters to show results."},clearFilters:{id:"common.filtering.clear-filters",defaultMessage:"Clear all filters"},noProducts:{id:"common.filtering.no-products",defaultMessage:"No products yet"},noRecords:{id:"commonMessages.noRecords",defaultMessage:"No records"},filterByTitle:{id:"tableToolbar.filterByTitle",defaultMessage:"Filter by {title}"},noResultsFound:{id:"tableToolbar.noResultsFound",defaultMessage:"No results found"},noResult:{id:"tableToolbar.noResult",defaultMessage:"No {results}"},unknown:{id:"commonMessages.unknown",defaultMessage:"Unknown"}});t.a=a},586:function(e,t,r){"use strict";var n=r(21),a=Object(n.b)({orderedBy:{id:"orders.common.orderedBy",defaultMessage:"Ordered by {owner}"},orderedByLabel:{id:"orders.approval.orderedBy",defaultMessage:"Ordered by"},lastUpdated:{id:"orders.common.lastUpdated",defaultMessage:"Last updated"},compositeTitle:{id:"orders.common.compositeTitle",defaultMessage:"{name} - Order # {id}"},detailTitle:{id:"orders.detail.title",defaultMessage:"Order ID {id}"},orderSuccess:{id:"orders.notification.success",defaultMessage:"You can track the progress of Order # {id} in your <link>Orders</link> page."},noOrdersTitle:{id:"orders.list.empty.title",defaultMessage:"No orders"},noOrdersDescription:{id:"orders.list.empty.description",defaultMessage:"No orders have been created."},noApprovalRequests:{id:"orders.approval.no-requests",defaultMessage:"We were unable to find any approval requests for this order."},creatingApprovalRequest:{id:"orders.approval.creating",defaultMessage:"Creating approval request"},approvalTitle:{id:"orders.approval.title",defaultMessage:"Summary"},approvalDetail:{id:"orders.approval.view-detail",defaultMessage:"View this order's approval request details"},approvalCreated:{id:"orders.approval.details.created",defaultMessage:"Request created"},approvalReason:{id:"orders.approval.details.reason",defaultMessage:"Approval reason"},approvalCompleted:{id:"orders.approval.details.completed",defaultMessage:"Completed at"},orderDetails:{id:"orders.common.details",defaultMessage:"Order details"},menuApproval:{id:"orders.menu.approval",defaultMessage:"Approval"},menuLifecycle:{id:"orders.menu.lifecycle",defaultMessage:"Lifecycle"},menuSteps:{id:"orders.menu.steps",defaultMessage:"Order steps"},objectsNotFound:{id:"order.detail.not-found",defaultMessage:"The {objects} for this order {count, plural, one {is} other {are}} not available"},orderID:{id:"orders.order.detail.ID",defaultMessage:"Order ID"},orderParameters:{id:"orders.order.detail.parameters",defaultMessage:"Order parameters"},orderProgressMessages:{id:"orders.order.detail.messages",defaultMessage:"Progress messages"},lifecycleLink:{id:"orders.order.lifecicle.link",defaultMessage:"Manage product"},cancelOrder:{id:"orders.actions.cancel",defaultMessage:"Cancel order"},keepOrder:{id:"orders.actions.keep",defaultMessage:"Keep order"},cancelDescription:{id:"orders.cancel.description",defaultMessage:"Are you sure you want to cancel {name}?"},backToOrders:{id:"orders.toolbar.backLink",defaultMessage:"Back to orders"},orderDate:{id:"orders.approval.order-date",defaultMessage:"Order date"},approvalParameters:{id:"orders.approval.parameters",defaultMessage:"Parameters"},activity:{id:"orders.approval.activity",defaultMessage:"Activity"}});t.a=a},639:function(e,t,r){"use strict";r.d(t,"b",(function(){return s}));var n=r(96),a=r(21),o=function(){return(o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},i=Object(a.b)({title:{id:"common.states.title",defaultMessage:"State"},ordered:{id:"common.states.ordered",defaultMessage:"Ordered"},approvalPending:{id:"common.states.approval-pending",defaultMessage:"Approval Pending"},canceled:{id:"common.states.canceled",defaultMessage:"Canceled"},completed:{id:"common.states.completed",defaultMessage:"Completed"},failed:{id:"common.states.failed",defaultMessage:"Failed"},undecided:{id:"common.states.undecided",defaultMessage:"Undecided"},approved:{id:"common.states.approved",defaultMessage:"Approved"},denied:{id:"common.states.denied",defaultMessage:"Denied"},error:{id:"common.states.error",defaultMessage:"Error"},pending:{id:"common.states.pending",defaultMessage:"Pending"},skipped:{id:"common.states.skipped",defaultMessage:"Skipped"},started:{id:"common.states.started",defaultMessage:"Started"},notified:{id:"common.states.notified",defaultMessage:"Notified"}}),s=function(e){return e.replace(/\s/g,"").replace(/^./,(function(e){return e.toLowerCase()}))};t.a=o(o({},i),{created:n.a.created})},640:function(e,t,r){"use strict";r.d(t,"e",(function(){return L})),r.d(t,"f",(function(){return A})),r.d(t,"a",(function(){return V})),r.d(t,"d",(function(){return G})),r.d(t,"c",(function(){return U})),r.d(t,"b",(function(){return J}));var n=r(70),a=r.n(n),o=r(26),i=r.n(o),s=r(13),c=r.n(s),l=r(0),u=r.n(l),d=r(107),f=r(3),p=r(22),m=r(5),y=r(23),g=r(43),b=function(e,t,r,n){return new(r||(r=Promise))((function(a,o){function i(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}c((n=n.apply(e,t||[])).next())}))},v=function(e,t){var r,n,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(a=2&o[0]?n.return:o[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,o[1])).done)return a;switch(n=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=i.trys,(a=a.length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],n=0}finally{r=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},h=Object(p.a)(),O=function(){return(O=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},j=function(e,t,r,n){return new(r||(r=Promise))((function(a,o){function i(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}c((n=n.apply(e,t||[])).next())}))},E=function(e,t){var r,n,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(a=2&o[0]?n.return:o[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,o[1])).done)return a;switch(n=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=i.trys,(a=a.length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],n=0}finally{r=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},_=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r},w=Object(p.c)(),P=(Object(p.d)(),Object(p.g)()),F=Object(p.a)(),M=Object(p.b)(),D=function(e){return P.listServicePlans(e)},I=function(e,t){return void 0===e&&(e=""),void 0===t&&(t=y.a),F.get(m.e+"/orders?"+e+"&limit="+t.limit+"&offset="+t.offset).then((function(e){return(t=e.data.map((function(e){return e.id})),F.get(m.e+"/order_items?"+t.map((function(e){return"filter[order_id][]="+e})).join("&"))).then((function(t){return(r=t.data.map((function(e){return e.portfolio_item_id})),F.get(m.e+"/portfolio_items?"+r.map((function(e){return"filter[id][]="+e})).join("&"))).then((function(r){return O(O({portfolioItems:r},e),{data:e.data.map((function(e){return O(O({},e),{orderItems:t.data.filter((function(t){return t.order_id===e.id}))})}))})}));var r}));var t}))},C=function(e){if(Object.values(e).some((function(e){return!e})))return t=e.order,b(void 0,void 0,void 0,(function(){var e,r,n,a,o,i;return v(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,h.get(m.e+"/orders/"+t)];case 1:return e=s.sent(),[3,3];case 2:if(r=s.sent(),e={},404!==r.status&&400!==r.status)throw r;return g.a.replace({pathname:"/404",state:{from:g.a.location}}),[3,3];case 3:n={object:"Order item",notFound:!0},s.label=4;case 4:return s.trys.push([4,6,,7]),[4,h.get(m.e+"/order_items?order_id="+e.id)];case 5:return a=s.sent(),n=a.data[0],[3,7];case 6:return s.sent(),[3,7];case 7:o={object:"Product",notFound:!0},s.label=8;case 8:return s.trys.push([8,10,,11]),[4,h.get(m.e+"/portfolio_items/"+n.portfolio_item_id)];case 9:return o=s.sent(),[3,11];case 10:return s.sent(),[3,11];case 11:return i=[h.get(m.k+"/sources/"+o.service_offering_source_ref).catch((function(){return{object:"Platform",notFound:!0}})),h.get(m.e+"/order_items/"+n.id+"/progress_messages").catch((function(){return{object:"Messages",notFound:!0}})),h.get(m.e+"/portfolios/"+o.portfolio_id).catch((function(){return{object:"Portfolio",notFound:!0}}))],[2,Promise.all(i).then((function(t){var r=t[0],a=t[1],i=t[2];return[e,n,o,r,a,i]}))]}}))}));var t,r=[F.get(m.e+"/orders/"+e.order).catch((function(e){if(404===e.status||400===e.status)return g.a.replace({pathname:"/404",state:{from:g.a.location}});throw e})),F.get(m.e+"/order_items/"+e["order-item"]).catch((function(e){if(404===e.status||400===e.status)return{object:"Order item",notFound:!0};throw e})),F.get(m.e+"/portfolio_items/"+e["portfolio-item"]).catch((function(e){if(404===e.status||400===e.status)return{object:"Product",notFound:!0};throw e})),F.get(m.k+"/sources/"+e.platform).catch((function(e){if(404===e.status||400===e.status)return{object:"Platform",notFound:!0};throw e})),F.get(m.e+"/order_items/"+e["order-item"]+"/progress_messages").catch((function(e){if(404===e.status||400===e.status)return{};throw e})),F.get(m.e+"/portfolios/"+e.portfolio).catch((function(e){if(404===e.status||400===e.status)return{object:"Portfolio",notFound:!0};throw e}))];return Promise.all(r)},T=function(e){return F.get(m.e+"/order_items/"+e+"/approval_requests").then((function(e){var t=e.data.map((function(e){var t,r,n=e.approval_request_ref;return t=n,M.post(m.b+"/graphql",{query:(r=t,'query {\n  requests(id: "'+r+'") {\n    id\n    number_of_children\n    decision\n    group_name\n    state\n    actions {\n      id\n      created_at\n    }\n    requests {\n      id\n      number_of_children\n      decision\n      group_name\n      state\n      parent_id\n      actions {\n        id\n        created_at\n      }\n    }\n  }\n}')},{"x-rh-persona":"approval/requester"}).then((function(e){var t=e.data.requests;return t&&t.length>0&&t[0].number_of_children>0?t[0].requests:t}))}));return Promise.all(t).then((function(e){var t;return{data:(null===(t=null==e?void 0:e[0])||void 0===t?void 0:t.map((function(e){var t,r=e.actions,n=_(e,["actions"]);return O(O({},n),{updated:(null==r?void 0:r.length)>0?null===(t=r.pop())||void 0===t?void 0:t.created_at:void 0})})))||[]}}))}))},k=r(67),N=r(9),R=r(586),S=r(18),x=function(e){var t=e.id,r=e.dispatch,n=e.portfolioItemId,a=e.portfolioId,o=e.platformId,i=e.orderItemId;return Object(S.a)()(R.a.orderSuccess,{id:t,link:function(e){return u.a.createElement(k.a,{onClick:function(){return r(Object(d.clearNotifications)())},to:{pathname:N.o,search:"?order="+t+"&order-item="+i+"&portfolio-item="+n+"&platform="+o+"&portfolio="+a}},e)}})};function q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function B(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?q(Object(r),!0).forEach((function(t){c()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var L=function(e){return{type:f.z,payload:D(e)}},A=function(e,t){return function(r){return r({type:f.cb,payload:(n=e,j(void 0,void 0,void 0,(function(){var e,t,r;return E(this,(function(c){switch(c.label){case 0:return a=n.service_parameters,o=a.providerControlParameters,i=_(a,["providerControlParameters"]),s=_(n,["service_parameters"]),[4,w.createOrder()];case 1:return e=c.sent(),(t={}).count=1,t=O(O(O({},t),s),{service_parameters:i,provider_control_parameters:o||{}}),[4,w.addToOrder(e.id,t)];case 2:return r=c.sent(),[2,w.submitOrder(e.id).then((function(e){return O(O({},e),{orderItem:r})}))]}}))}))).then((function(e){var n=e.id,a=e.orderItem;return r(Object(d.addNotification)({variant:"success",title:"Your order has been accepted successfully",description:u.a.createElement(x,{id:n,dispatch:r,portfolioItemId:t.id,portfolioId:t.portfolio_id,platformId:t.service_offering_source_ref,orderItemId:a.id}),dismissable:!0}))}))});var n,a,o,i,s}},V=function(e){return function(t,r){t({type:"".concat(f.e,"_PENDING")});var n=r().orderReducer.orderDetail;return function(e){return w.cancelOrder(e)}(e).then((function(){return n.order.state="Canceled",n.approvalRequest&&n.approvalRequest.length>0&&(n.approvalRequest[0].state="canceled"),t({type:f.V,payload:B({},n)}),n})).then((function(e){return t(Object(d.addNotification)({variant:"success",title:"Your order has been canceled successfully",description:"Order ".concat("Order #".concat(e.order.id)," was canceled."),dismissable:!0}))})).then((function(){return t({type:"".concat(f.e,"_FULFILLED")})})).catch((function(e){t({type:"".concat(f.e,"_REJECTED"),payload:e})}))}},G=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:y.a;return function(r){var n=Object.entries(e).filter((function(e){var t=i()(e,2)[1];return t&&t.length>0})).map((function(e){var t=i()(e,2),r=t[0],n=t[1];return Array.isArray(n)?n.map((function(e){return"filter[".concat(r,"][]=").concat(e)})).join("&"):"filter[".concat(r,"][contains_i]=").concat(n)})).join("&");return t.sortBy&&(n="".concat(n,"&sort_by=").concat(t.sortBy,":").concat(t.sortDirection||"desc")),r({type:"".concat(f.i,"_PENDING")}),I(n,t).then((function(o){var i=o.portfolioItems,s=a()(o,["portfolioItems"]);return r({type:f.X,payload:i}),r({type:"".concat(f.i,"_FULFILLED"),meta:B(B({},t),{},{filter:n,filters:e,storeState:!0,stateKey:"orders"}),payload:s})})).catch((function(e){return r({type:"".concat(f.i,"_REJECTED"),payload:e})}))}},U=function(e){return function(t){return t({type:"".concat(f.V,"_PENDING")}),C(e).then((function(e){var r=i()(e,7),n=r[0],a=r[1],o=r[2],s=r[3],c=r[4],l=r[5],u=r[6];return t({type:"".concat(f.V,"_FULFILLED"),payload:{order:n,orderItem:a,portfolioItem:o,platform:s,progressMessages:c,portfolio:l,approvalRequest:u}})})).catch((function(e){return t({type:"".concat(f.V,"_REJECTED"),payload:e})}))}},J=function(e){return function(t){return t({type:"".concat(f.g,"_PENDING")}),T(e).then((function(e){return t({type:"".concat(f.g,"_FULFILLED"),payload:e}),e})).catch((function(e){return t({type:"".concat(f.g,"_REJECTED"),payload:e})}))}}},754:function(e,t,r){"use strict";var n=r(0),a=r.n(n),o=r(670),i=r.n(o),s=r(690),c=r.n(s),l=r(621),u=r.n(l),d=r(755),f=r.n(d),p=r(756),m=r.n(p),y={Completed:{icon:a.a.createElement(c.a,null),color:"green"},"Approval Pending":{icon:a.a.createElement(f.a,null),color:"blue"},Ordered:{icon:a.a.createElement(m.a,null),color:"grey"},Failed:{icon:a.a.createElement(i.a,null),color:"red"},Canceled:{icon:a.a.createElement(u.a,null),color:"orange"},Created:{icon:a.a.createElement(m.a,null),color:"grey"}};t.a=y},948:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),o=r(181),i=r(601),s=r(598),c=function(){return{fields:[{component:s.b.TOP_TOOLBAR,className:"orders pf-u-p-lg",key:"orders-toolbar",fields:[{component:s.b.TOP_TOOLBAR_TITLE,key:"orders-toolbar-title",title:"Orders",className:""}]}]}},l=r(69),u=r.n(l),d=r(909),f=r.n(d),p=r(26),m=r.n(p),y=r(13),g=r.n(y),b=r(19),v=r(136),h=r(137),O=r(288),j=r(187),E=r(698),_=r(699),w=r(700),P=r(691),F=r(910),M=r(132),D=r(175),I=r(682),C=r(758),T=r(911),k=r(580),N=r.n(k),R=r(617),S=r(792),x=r(694),q=r(693),B=r(640),L=r(595),A=r(87),V=r(757),G=r(38),U=r(180),J=r(612),Y=r(5),z=r(576),K=r(9),W=r(639),X=r(635),H=r(754);function Q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(r),!0).forEach((function(t){g()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var $=function(e,t,r,o){var i,s,c=e.orderItems[0]&&e.orderItems[0]||{},l=Z(Z(Z(Z({order:e.id},c.id?{"order-item":c.id}:{}),c.portfolio_item_id?{"portfolio-item":c.portfolio_item_id}:{}),t?{platform:t}:{}),r?{portfolio:r}:{}),d=Object(W.b)(e.state);return[{title:a.a.createElement(X.a,null,a.a.createElement(z.a,{pathname:K.o,searchParams:l},e.id))},{title:a.a.createElement(n.Fragment,null,a.a.createElement(J.a,{height:60,src:(i=e,s=i.orderItems,s[0]&&Y.e+"/portfolio_items/"+s[0].portfolio_item_id+"/icon"),sourceId:t}))},e.orderName,e.owner,{title:a.a.createElement(G.Text,{className:"pf-u-mb-0",component:G.TextVariants.small},a.a.createElement(U.DateFormat,{date:e.created_at,variant:"relative"}))},{title:a.a.createElement(G.Text,{className:"pf-u-mb-0",component:G.TextVariants.small},a.a.createElement(U.DateFormat,{date:e.orderItems[0]&&e.orderItems[0].updated_at,variant:"relative"}))},{title:a.a.createElement(X.a,null,a.a.createElement(V.Label,u()({},H.a[e.state],{variant:"outline"}),o(W.a[d])))}]},ee=r(577),te=r(106),re=r(23),ne=r(186),ae=r(578),oe=r(586),ie=r(96),se=r(18);function ce(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function le(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(r),!0).forEach((function(t){g()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ce(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ue=Object(te.a)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:re.a,r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;n(!0),r(Object(B.d)(e,t)).then((function(){return n(!1)}))}),1e3),de={isOpen:!1,isFetching:!0,isFiltering:!1,filterType:"state",filters:{state:[],owner:""},sortBy:{index:0,direction:R.a.desc}},fe=function(e,t){switch(t.type){case"setFetching":return le(le({},e),{},{isFetching:t.payload});case"setFilterValue":return le(le({},e),{},{filters:(r=t.payload,n=e.filterType,a=e.filters,le(le({},a),{},g()({},n,r)))});case"replaceFilterChip":return le(le({},e),{},{filters:t.payload});case"setFilteringFlag":return le(le({},e),{},{isFiltering:t.payload});case"setFilterType":return le(le({},e),{},{filterType:t.payload});case"setSortBy":return le(le({},e),{},{sortBy:t.payload,isFetching:!0})}var r,n,a;return e},pe={0:"id",3:"owner",4:"created_at",6:"state"},me=function(){var e,t,r,o=Object(se.a)(),i=Object(b.useDispatch)(),s=Object(ne.a)(),c=Object(n.useReducer)(fe,le(le({},de),{},{filters:(null==s||null===(e=s.orders)||void 0===e?void 0:e.filters)||{state:[],owner:""},sortBy:{direction:(null==s||null===(t=s.orders)||void 0===t?void 0:t.sortDirection)||R.a.desc,index:(null==s||null===(r=s.orders)||void 0===r?void 0:r.sortIndex)||0}})),l=m()(c,2),d=l[0],p=d.isFetching,y=d.isFiltering,k=d.filterType,V=d.filters,G=d.sortBy,U=l[1],J=Object(b.useSelector)((function(e){return e.orderReducer.orders})),Y=J.data,z=J.meta,K=[{title:o(oe.a.orderID)},o(ie.a.product),"",{title:o(oe.a.orderedByLabel)},{title:o(oe.a.orderDate)},o(ie.a.updated),{title:o(ie.a.status)}].map((function(e){return"object"!==f()(e)||p||y||0===Y.length?e:le(le({},e),{},{transforms:[S.a]})})),X=Object(b.useSelector)((function(e){return e.portfolioReducer.portfolioItems.data})),H=Y.map((function(e){var t=function(e,t){var r=e.orderItems,n=r[0]&&t.find((function(e){var t=e.id;return r[0].portfolio_item_id===t}));return n?{orderPlatform:n.service_offering_source_ref,orderPortfolio:n.portfolio_id}:{}}(e,X),r=t.orderPlatform,n=t.orderPortfolio,a=function(e,t){var r=e.orderItems,n=e.id,a=r[0]&&t.find((function(e){var t=e.id;return r[0].portfolio_item_id===t}));return a?a.name:"Order "+n}(e,X);return $(le(le({},e),{},{orderName:a}),r,n,o)}));Object(n.useEffect)((function(){U({type:"setFetching",payload:!0}),Promise.all([i(Object(B.d)(V,null==s?void 0:s.orders)),i(Object(L.c)())]).then((function(){return U({type:"setFetching",payload:!1})}))}),[]);var Q=function(e,t){return U({type:"setFetching",payload:!0}),i(Object(B.d)(V,le(le({},t),{},{sortBy:pe[G.index],sortDirection:G.direction,sortIndex:G.index}))).then((function(){return U({type:"setFetching",payload:!1})})).catch((function(){return U({type:"setFetching",payload:!1})}))},Z=function(e){U({type:"setFilterValue",payload:e}),ue(le(le({},V),{},g()({},k,e)),le(le({},z),{},{sortBy:pe[G.index],sortDirection:G.direction,sortIndex:G.index,offset:0}),i,(function(e){return U({type:"setFilteringFlag",payload:e})}))},te=function(){return U({type:"replaceFilterChip",payload:de.filters}),ue(de.filters,le(le({},z),{},{sortBy:pe[G.index],sortDirection:G.direction,sortIndex:G.index}),i,(function(e){return U({type:"setFilteringFlag",payload:e})}))};return a.a.createElement(v.Grid,{hasGutter:!0},a.a.createElement(h.GridItem,null,a.a.createElement(D.Section,{type:"content"},!z.noData&&a.a.createElement(I.PrimaryToolbar,{activeFiltersConfig:{filters:Object.entries(V).filter((function(e){var t=m()(e,2)[1];return t&&t.length>0})).map((function(e){var t=m()(e,2),r=t[0],n=t[1];return{category:r,type:r,chips:Array.isArray(n)?n.map((function(e){return{name:e}})):[{name:n}]}})),onDelete:function(e,t,r){var n=m()(t,1)[0];if(r)return te();var a=le({},V);"state"===n.type?a[n.type]=a[n.type].filter((function(e){return e!==n.chips[0].name})):a[n.type]="",U({type:"replaceFilterChip",payload:a}),ue(a,z,i,(function(e){return U({type:"setFilteringFlag",payload:e})}))}},filterConfig:{onChange:function(e,t){return U({type:"setFilterType",payload:t})},value:k,items:[{filterValues:{items:[{value:"Approval Pending",label:o(W.a.approvalPending)},{value:"Canceled",label:o(W.a.canceled)},{value:"Completed",label:o(W.a.completed)},{value:"Created",label:o(ie.a.created)},{value:"Failed",label:o(W.a.failed)},{value:"Ordered",label:o(W.a.ordered)}],value:V.state,onChange:function(e,t){return Z(t)}},label:"State",value:"state",type:"checkbox"},{filterValues:{value:V.owner,onChange:function(e,t){return Z(t)}},label:"Owner",value:"owner"}]},pagination:a.a.createElement(ee.a,{isDisabled:p||y,apiRequest:Q,meta:z,isCompact:!0})}),a.a.createElement(R.b,u()({"aria-label":"orders"},p||y||0!==Y.length?{sortBy:G,onSort:function(e,t,r){return U({type:"setSortBy",payload:{index:t,direction:r}}),i(Object(B.d)(V,le(le({},z),{},{sortBy:pe[t],sortDirection:r,sortIndex:t}))).then((function(){return U({type:"setFetching",payload:!1})}))}}:{},{cells:K,rows:p||y?[]:H,className:"orders-table"}),a.a.createElement(x.a,null),a.a.createElement(q.a,null)),!(p||y)&&0===Y.length&&a.a.createElement(C.EmptyTable,null,a.a.createElement(j.Bullseye,null,a.a.createElement(E.EmptyState,null,a.a.createElement(j.Bullseye,null,a.a.createElement(_.EmptyStateIcon,{icon:N.a})),a.a.createElement(O.Title,{headingLevel:"h1",size:"lg"},z.noData?o(oe.a.noOrdersTitle):o(ae.a.noResults)),a.a.createElement(w.EmptyStateBody,null,z.noData?o(oe.a.noOrdersDescription):o(ae.a.noResultsDescription)),!z.noData&&a.a.createElement(F.EmptyStateSecondaryActions,null,a.a.createElement(M.Button,{variant:"link",onClick:te},o(ae.a.clearFilters)))))),(p||y)&&a.a.createElement(A.e,null),a.a.createElement(T.TableToolbar,{className:"pf-u-mr-0"},a.a.createElement("div",{className:"bottom-pagination-container"},a.a.createElement(P.Flex,{justifyContent:{default:"justifyContentFlexEnd"}},z.count>0&&a.a.createElement(ee.a,{className:"pf-u-mt-0",isDisabled:p||y,apiRequest:Q,meta:z})))))))};t.default=function(){return Object(n.useEffect)((function(){insights.chrome.appNavClick({id:"orders",secondaryNav:!0})}),[]),a.a.createElement(o.Stack,null,a.a.createElement(i.a,{schema:c()}),a.a.createElement(me,null))}}}]);
//# sourceMappingURL=../sourcemaps/orders~91f4305a.js.map