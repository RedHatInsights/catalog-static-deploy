"use strict";(self.webpackChunkcatalog=self.webpackChunkcatalog||[]).push([[5868],{5693:(e,n,t)=>{t.r(n),t.d(n,{default:()=>T});var o=t(30624),r=t.n(o),a=t(14494),i=t(30137),l=t(96354),u=t(35388),c=t(81624),s=t(83629),d=t(73712),f=(0,c.Z)((function(e,n){var t;(null===(t=window.catalog)||void 0===t?void 0:t.standalone)?(0,d.IE)(e).then((function(t){var o=t.results;if(!e||0===e.trim().length)throw"Required";if(o.find((function(t){return t.name===e&&t.id!==n})))throw"Name has already been taken"})):(0,s.IE)(e).then((function(t){var o=t.data;if(!e||0===e.trim().length)throw"Required";if(o.find((function(t){return t.name===e&&t.id!==n})))throw"Name has already been taken"}))})),v=t(89231),h=t(77503),p=t(47786),m=t(74798),b=t(9456),y=t(36722),w=t(72510),g=t(7579),Z=t(64466),k=t(56682),E=t(23349),S=function(){return(S=Object.assign||function(e){for(var n,t=1,o=arguments.length;t<o;t++)for(var r in n=arguments[t])Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e}).apply(this,arguments)};const T=function(e){var n,t,c=e.removeQuery,T=e.closeTarget,j=e.viewState,x=(0,E.Z)(),O=(0,a.I0)(),P=(0,o.useState)(!0),C=P[0],R=P[1],I=(0,o.useContext)(w.Z).openApiSchema,L=(0,p.Z)(["portfolio"])[0].portfolio,M=(0,m.Z)({removeSearch:c,keepHash:!0}).push,X=(0,a.v9)((function(e){var n,t=e.portfolioReducer;return(null===(n=window.catalog)||void 0===n?void 0:n.standalone)?(0,d.nX)(t,L):(0,s.nX)(t,L)}));if(L&&X&&Object.keys(X).length,!1===(null===(t=null===(n=null==X?void 0:X.metadata)||void 0===n?void 0:n.user_capabilities)||void 0===t?void 0:t.update))return r().createElement(b.M,null);var q=function(e,n){var t,o,r,a,i;return{fields:[{label:"schemas.portfolio.name",name:"name",component:l.Z.TEXT_FIELD,isRequired:!0,maxLength:(null===(i=null===(a=null===(r=null===(o=null===(t=null==e?void 0:e.components)||void 0===t?void 0:t.schemas)||void 0===o?void 0:o.Portfolio)||void 0===r?void 0:r.properties)||void 0===a?void 0:a.name)||void 0===i?void 0:i.maxLength)||u.Nb,validate:[function(e){return f(e,n)}]},{label:"schemas.portfolio.description",component:l.Z.TEXTAREA,name:"description"}]}}(I,L);return r().createElement(i.ZP,{schema:q,onSubmit:function(e){var n;return X?(R(!1),O((null===(n=window.catalog)||void 0===n?void 0:n.standalone)?(0,h.o9)(e,j):(0,v.o9)(e,j)).then((function(){return M(T)}))):function(e){return n=void 0,t=void 0,a=function(){var n,t,o;return function(e,n){var t,o,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,o&&(r=2&a[0]?o.return:a[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,a[1])).done)return r;switch(o=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,o=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((r=(r=i.trys).length>0&&r[r.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=n.call(e,i)}catch(e){a=[6,e],o=0}finally{t=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(a){switch(a.label){case 0:return n={variant:"success",title:x(Z.Z.addSuccessTitle),description:x(Z.Z.addSuccessDescription,{name:e.name,b:function(e){return r().createElement("b",{key:"strong"},e)}})},[4,O((null===(o=window.catalog)||void 0===o?void 0:o.standalone)?(0,h.jM)(e,n):(0,v.jM)(e,n))];case 1:return[2,(t=a.sent())&&t.value&&t.value.id?M({pathname:y.hT,search:"?portfolio="+t.value.id}):M(T)]}}))},new((o=void 0)||(o=Promise))((function(e,r){function i(e){try{u(a.next(e))}catch(e){r(e)}}function l(e){try{u(a.throw(e))}catch(e){r(e)}}function u(n){var t;n.done?e(n.value):(t=n.value,t instanceof o?t:new o((function(e){e(t)}))).then(i,l)}u((a=a.apply(n,t||[])).next())}));var n,t,o,a}(e)},onCancel:function(){return M(T)},initialValues:S({},X),isModal:!0,modalProps:{title:x(L?Z.Z.modalEditTitle:Z.Z.modalCreateTitle),isOpen:C,onClose:function(){return M(T)},variant:"small"},templateProps:{submitLabel:x(L?g.Z.save:k.Z.create)}})}},74798:(e,n,t)=>{t.d(n,{Z:()=>a});var o=t(334),r=function(){return(r=Object.assign||function(e){for(var n,t=1,o=arguments.length;t<o;t++)for(var r in n=arguments[t])Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e}).apply(this,arguments)};const a=function(e){var n=void 0===e?{}:e,t=n.removeSearch,a=n.keepHash,i=(0,o.useHistory)();return r(r({},i),{push:function(e){var n=e;return a&&i.location.hash.length>0&&(n="object"==typeof n?r(r({},n),{hash:i.location.hash}):""+n+i.location.hash),t?i.push(function(e){return"string"==typeof e?e.split("?")[0]:"object"==typeof e?r(r({},e),{search:void 0}):e}(n)):i.push(n)}})}}}]);
//# sourceMappingURL=../sourcemaps/add-portfolio.e8cac022d0947ac9b40c93690143121b.js.map