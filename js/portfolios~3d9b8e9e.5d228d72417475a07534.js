(window.webpackJsonp=window.webpackJsonp||[]).push([[56],{633:function(e,t,r){"use strict";var a=r(0),n=r.n(a),o=r(245),i=r(184),l=r(36),c=function(){return(c=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},s=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(r[a[n]]=e[a[n]])}return r};t.a=function(e){var t=e.meta,r=t.limit,a=void 0===r?50:r,p=t.count,u=void 0===p?0:p,f=t.offset,m=void 0===f?0:f,d=e.apiProps,y=e.apiRequest,b=e.className,h=void 0===b?"":b,O=e.isCompact,v=void 0!==O&&O,g=s(e,["meta","apiProps","apiRequest","className","isCompact"]);return n.a.createElement("div",{className:h},n.a.createElement(i.a,c({perPage:a||50,itemCount:u||0,onPerPageSelect:function(e,t){return y(d,{offset:m,limit:t})},page:Object(l.b)(a,m),onSetPage:function(e,t,r){var n={offset:Object(l.c)(t,a),limit:a},i=function(){return y(d,n)};return r?Object(o.a)(i,250)():i()},dropDirection:"down",isCompact:v},g)))}},656:function(e,t,r){"use strict";var a=r(0),n=r.n(a),o=r(655),i=function(){return(i=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},l=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(r[a[n]]=e[a[n]])}return r};t.a=function(e){var t=e.children,r=e.className,a=l(e,["children","className"]);return n.a.createElement("div",i({className:Object(o.a)("pf-u-p-lg pf-u-pt-md pf-u-pb-md global-primary-background pf-u-mt-auto",r)},a),t)}},671:function(e,t,r){"use strict";var a=r(0),n=r.n(a),o=r(632),i=function(){return(i=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},l=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(r[a[n]]=e[a[n]])}return r};t.a=function(e){var t=e.children,r=e.pathname,c=l(e,["children","pathname"]);return n.a.createElement(a.Fragment,null,r?n.a.createElement(o.a,i({pathname:r},c),t):t)}},698:function(e,t,r){"use strict";r.d(t,"a",(function(){return d}));var a=r(0),n=r.n(a),o=r(187),i=r(147),l=r(77),c=r(655),s=r(109),p=r(724),u=r(248),f=function(){return(f=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},m=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(r[a[n]]=e[a[n]])}return r};t.b=function(e){var t=e.children,r=e.paddingBottom,a=void 0===r||r,o=e.breadcrumbs,i=void 0===o||o,l=m(e,["children","paddingBottom","breadcrumbs"]);return n.a.createElement(u.d,f({className:"pf-u-pt-lg pf-u-pr-lg pf-u-pl-lg "+(a?"pf-u-pb-lg":"")},l),i&&n.a.createElement("div",{className:"pf-u-mb-md"}," ",n.a.createElement(p.a,null)),t)};var d=function(e){var t=e.title,r=void 0===t?n.a.createElement(s.j,null):t,p=e.description,d=e.children,y=e.noData,b=m(e,["title","description","children","noData"]);return n.a.createElement(a.Fragment,null,n.a.createElement(u.c,f({className:Object(c.a)({"pf-u-mb-lg":!y,"flex-no-wrap":!0})},b),n.a.createElement(o.a,null,n.a.createElement(i.a,null,n.a.createElement(l.a,{component:l.b.h2,className:"pf-u-m-0 pf-u-mr-md"},r),p&&n.a.createElement(l.a,{component:l.b.p},p))),n.a.createElement(o.a,{className:"flex-item-no-wrap"},d)))}},724:function(e,t,r){"use strict";var a=r(0),n=r.n(a),o=r(844),i=r(845),l=r(25),c=r(671);t.a=function(){var e=Object(l.e)((function(e){return e.breadcrumbsReducer.fragments}));return e.length<=1?null:n.a.createElement(o.a,null,e.map((function(t,r){var a=t.title,o=t.pathname,l=t.searchParams;return n.a.createElement(c.a,{pathname:e.length!==r+1?o:void 0,searchParams:l,nav:!0,exact:!0,key:o,className:"pf-c-breadcrumb__item"},n.a.createElement(i.a,{showDivider:r>0,isActive:e.length===r+1},a))})))}},822:function(e,t,r){"use strict";var a=r(0);t.a=function(){var e=Object(a.useRef)(!1);return Object(a.useEffect)((function(){return e.current=!0,function(){return e.current=!1}}),[]),e}},969:function(e,t,r){"use strict";r.r(t);var a=r(151),n=r.n(a),o=r(107),i=r.n(o),l=r(40),c=r.n(l),s=r(0),p=r.n(s),u=r(25),f=r(106),m=r(829),d=r.n(m),y=r(635),b=r.n(y),h=r(364),O=r(130),v=r(725),g=r(36),j=r(150),E=r(717),P=r(612),w=r(957),D=r(17),F=r(951),C=r(820),S=r(147),k=r(77),R=r(821),_=r(954),N=r(239),q=r(87),I=r(956),x=r(721),T=function(e){var t=e.id,r=e.to,a=e.portfolioName,n=e.portfolio_items,o=e.headerActions,i=void 0===o?[]:o;return p.a.createElement(E.a,null,p.a.createElement(E.b,null,p.a.createElement(S.a,null,p.a.createElement(q.a,{to:r,id:"portfolio-link-"+t},p.a.createElement(k.a,{title:a,className:"pf-u-mb-0",component:k.b.h3},p.a.createElement(x.a,null,a))))),p.a.createElement(I.a,{isRead:!0},n),p.a.createElement("div",{onClick:function(e){return e.preventDefault()}},i))},A=r(632),B=r(13),L=r(723),V=r(722),H=r(152),U=r(129),W=r(27),J=r(49),z=function(){return(z=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},G=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(r[a[n]]=e[a[n]])}return r},K=["description"],M=function(e){var t=e.portfolioId,r=e.handleCopyPortfolio,a=e.canLinkOrderProcesses,n=e.userCapabilities,o=n.share,i=n.copy,l=n.unshare,c=n.update,u=n.destroy,f=n.set_approval,m=Object(W.a)(),d=Object(s.useState)(!1),y=d[0],b=d[1],h=[];if((o||l)&&h.push(p.a.createElement(P.a,{key:"share-portfolio-action",id:"share-portfolio-action",component:p.a.createElement(A.a,{searchParams:{portfolio:t},pathname:B.D,preserveHash:!0},m(H.a.share))})),i&&h.push(p.a.createElement(P.a,{key:"copy-portfolio-action",id:"copy-portfolio-action",onClick:function(){return r(t)}},m(H.a.copy))),f&&h.push(p.a.createElement(P.a,{key:"workflow-portfolio-action",id:"workflow-portfolio-action",component:p.a.createElement(A.a,{searchParams:{portfolio:t},pathname:B.f,preserveHash:!0},m(H.a.setApproval))})),c&&a){var O=m(J.a.setOrderProcess);h.push(p.a.createElement(P.a,{"aria-label":O,key:"attach-order-processes",id:"attach-order-processes",component:p.a.createElement(A.a,{preserveSearch:!0,pathname:B.d,searchParams:{portfolio:t}},O),role:"link"}))}return c&&h.push(p.a.createElement(P.a,{key:"edit-portfolio-action",id:"edit-portfolio-action",component:p.a.createElement(A.a,{searchParams:{portfolio:t},pathname:B.e,preserveHash:!0},m(H.a.edit))})),u&&h.push(p.a.createElement(P.a,{key:"remove-portfolio-action",id:"remove-portfolio-action",component:p.a.createElement(A.a,{searchParams:{portfolio:t},pathname:B.C,preserveHash:!0},m(H.a.delete))})),0===h.length?null:p.a.createElement(w.a,{key:"portfolio-dropdown",id:"portfolio-"+t+"-dropdown",isOpen:y,isPlain:!0,onSelect:function(){return b(!1)},position:D.d.right,toggle:p.a.createElement(F.a,{id:"portfolio-"+t+"-toggle",onToggle:function(e){return b(e)}}),dropdownItems:h})},Q=function(e){var t=e.imageUrl,r=e.isDisabled,a=e.name,n=e.id,o=e.handleCopyPortfolio,i=e.metadata,l=i.user_capabilities,c=i.statistics,s=c.shared_groups,u=c.approval_processes,f=c.portfolio_items,m=e.canLinkOrderProcesses,d=G(e,["imageUrl","isDisabled","name","id","handleCopyPortfolio","metadata","canLinkOrderProcesses"]),y=Object(W.a)(),b={pathname:B.A,search:"?portfolio="+n};return p.a.createElement(L.b,{isDisabled:r},p.a.createElement(L.a,{ouiaId:"portfolio-"+n},p.a.createElement(C.a,null,p.a.createElement(T,{id:n,to:b,portfolioName:a,portfolio_items:f||0,headerActions:p.a.createElement(M,{portfolioId:n,userCapabilities:l,handleCopyPortfolio:o,canLinkOrderProcesses:m})})),p.a.createElement(V.a,null,p.a.createElement(S.a,{className:"pf-u-mb-md"},p.a.createElement(k.a,{component:k.b.small,className:"pf-u-mb-0"},"Last updated ",p.a.createElement(N.DateFormat,{date:d.updated_at||d.created_at,type:"relative"})),p.a.createElement(k.a,{component:k.b.small},"by ",d.owner)),p.a.createElement(E.c,z({},z({name:a,imageUrl:t},d),{toDisplay:K}))),p.a.createElement(R.a,null,u&&u>0&&p.a.createElement(_.a,{variant:"filled",color:"grey"},y(U.a.approvalProcessSet))," ",s&&s>0&&p.a.createElement(_.a,{variant:"filled",color:"grey"},y(U.a.shared)))))},X=r(679),Y=r(149),Z=r(633),$=r(656),ee=r(153),te=r(249),re=r(638),ae=r(57),ne=r(715),oe=r(822),ie=r(5),le=r.n(ie),ce=r(747);function se(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}var pe={name:U.a.name,owner:U.a.owner,sort_by:U.a.sortBy},ue={name:U.a.name,owner:U.a.owner,updated_at:U.a.updated,created_at:U.a.created},fe=function(e){var t=e.filters,r=e.stateDispatch,a=e.debouncedFilter,o=e.initialState,l=e.meta,s=e.filterType,f=e.handleFilterItems,m=e.sortDirection,d=e.handleSort,y=e.fetchPortfoliosWithState,b=e.isFetching,O=e.isFiltering,v=e.canCreate,g=Object(u.d)(),j=Object(W.a)();return l.noData?null:p.a.createElement(ce.PrimaryToolbar,n()({},v?{dedicatedAction:p.a.createElement(A.a,{pathname:"/portfolios/add-portfolio"},p.a.createElement(h.Button,{variant:"primary",id:"create-portfolio",ouiaId:"create-portfolio",type:"button"},j(U.a.create)))}:{},{activeFiltersConfig:{filters:Object.entries(t).filter((function(e){var t=i()(e,2)[1];return t&&t.length>0})).map((function(e){var t=i()(e,2),r=t[0],a=t[1];return{category:j(pe[r]),type:r,chips:Array.isArray(a)?a.map((function(e){return{name:e}})):[{name:"sort_by"===r?j(ue[a]):a}]}})),onDelete:function(e,n,s){var p=i()(n,1)[0];if(s)return r({type:"replaceFilterChip",payload:o.filters}),a(o.filters,l,g,(function(e){return r({type:"setFilteringFlag",payload:e})}));var u=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?se(Object(r),!0).forEach((function(t){c()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):se(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t);"state"===p.type?u[p.type]=u[p.type].filter((function(e){return e!==p.chips[0].name})):u[p.type]="",r({type:"replaceFilterChip",payload:u}),a(u,l,g,(function(e){return r({type:"setFilteringFlag",payload:e})}))}},filterConfig:{onChange:function(e,t){return r({type:"setFilterType",payload:t})},value:s,items:[{filterValues:{value:t.name,onChange:function(e,t){return f(t)}},label:j(U.a.name),value:"name"},{filterValues:{value:t.owner,onChange:function(e,t){return f(t)}},label:j(U.a.owner),value:"owner"},{filterValues:{value:t.sort_by||"name",onChange:function(e,t){return f(t)},items:[{label:j(U.a.name),value:"name"},{label:j(U.a.owner),value:"owner"},{label:j(U.a.created),value:"created_at"},{label:j(U.a.updated),value:"updated_at"}]},placeholder:t.sort_by?j(ue[t.sort_by]):j(U.a.name),label:j(U.a.sortBy),value:"sort_by",type:"radio"}]},sortByConfig:{direction:m,onSortChange:function(e,t){return d(t)}},pagination:l.count>0?p.a.createElement(Z.a,{isDisabled:b||O,meta:l,apiRequest:function(e,r){return g(y(t,r))},isCompact:!0}):void 0}))};fe.propTypes={filters:le.a.shape({name:le.a.string.isRequired,owner:le.a.string.isRequired,sort_by:le.a.string}).isRequired,stateDispatch:le.a.func.isRequired,debouncedFilter:le.a.func.isRequired,initialState:le.a.shape({filters:le.a.shape(c()({},le.a.string,le.a.any)).isRequired}).isRequired,meta:le.a.object.isRequired,filterType:le.a.string.isRequired,handleFilterItems:le.a.func.isRequired,sortDirection:le.a.string.isRequired,handleSort:le.a.func.isRequired,fetchPortfoliosWithState:le.a.func.isRequired,isFetching:le.a.bool.isRequired,isFiltering:le.a.bool.isRequired,canCreate:le.a.bool};var me=fe,de=r(698);function ye(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function be(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(r),!0).forEach((function(t){c()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ye(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var he=Object(Y.a)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g.a,r=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0;a(!0),r(Object(j.h)(e,t)).then((function(){return a(!1)}))}),1e3),Oe={isOpen:!1,isFetching:!0,isFiltering:!1,filterType:"name",filters:{name:"",owner:"",sort_by:void 0},sortDirection:ne.a.asc},ve=function(e,t){switch(t.type){case"setFetching":return be(be({},e),{},{isFetching:t.payload});case"setFilterValue":return be(be({},e),{},{filters:(r=t.payload,a=e.filterType,n=e.filters,be(be({},n),{},c()({},a,r)))});case"replaceFilterChip":return be(be({},e),{},{sortDirection:ne.a.asc,filters:t.payload});case"setFilteringFlag":return be(be({},e),{},{isFiltering:t.payload});case"setFilterType":return be(be({},e),{},{filterType:t.payload});case"setSortBy":return be(be({},e),{},{sortDirection:t.payload,filters:e.filters.sort_by?e.filters:be(be({},e.filters),{},{sort_by:"name"})})}var r,a,n;return e};t.default=function(){var e=Object(W.a)(),t=Object(te.a)(),r=Object(oe.a)(),a=Object(s.useReducer)(ve,be(be({},Oe),null==t?void 0:t.portfolio)),o=i()(a,2),l=o[0],m=l.isFetching,y=l.isFiltering,g=l.filters,E=l.filterType,P=l.sortDirection,w=o[1],D=Object(u.e)((function(e){return e.portfolioReducer.portfolios})),F=D.data,C=D.meta,S=Object(u.d)(),k=Object(s.useContext)(ee.a).permissions,R=Object(f.g)();Object(s.useEffect)((function(){S(Object(j.h)(g,be(be({},C),{},{sortDirection:P}))).then((function(){return w({type:"setFetching",payload:!1})})),Object(O.e)(),insights.chrome.appNavClick({id:"portfolios",secondaryNav:!0})}),[]);var _=function(e){w({type:"setFilterValue",payload:e}),he(be(be({},g),{},c()({},E,e)),be(be({},C),{},{offset:0,sortDirection:P}),S,(function(e){return w({type:"setFilteringFlag",payload:e})}))};Object(s.useEffect)((function(){!r||y&&m||_(g[E])}),[P]);var N=function(e){return S(Object(j.c)(e)).then((function(e){var t=e.id;return R.push({pathname:B.A,search:"?portfolio=".concat(t)})}))},q=Object(O.c)(k,["catalog:portfolios:create"]),I=Object(O.c)(k,["catalog:order_processes:link"]),x={PrimaryAction:C.noData?function(){return p.a.createElement(X.a,{url:B.b,id:"create-portfolio",label:"Create",hasPermission:q})}:function(){return p.a.createElement(h.Button,{ouiaId:"clear-filter",variant:"link",onClick:function(){return _("")}},e(re.a.clearFilters))},title:C.noData?e(ae.a.portfoliosNoData):e(re.a.noResults),description:C.noData?e(ae.a.portfoliosNoDataDescription):e(re.a.noResultsDescription),Icon:C.noData?d.a:b.a},T=F.map((function(e){return p.a.createElement(Q,n()({key:e.id,ouiaId:"portfolio-".concat(e.id)},e,{canLinkOrderProcesses:I,handleCopyPortfolio:N}))}));return p.a.createElement(s.Fragment,null,p.a.createElement(de.b,null,p.a.createElement(de.a,{title:e(ae.a.portfoliosTitle)}),p.a.createElement(me,{filters:g,stateDispatch:w,debouncedFilter:he,initialState:Oe,meta:C,filterType:E,handleFilterItems:_,sortDirection:P,handleSort:function(e){return w({type:"setSortBy",payload:e})},fetchPortfoliosWithState:j.h,isFetching:m,isFiltering:y,canCreate:q})),p.a.createElement(v.a,{items:T,isLoading:m||y,renderEmptyState:function(){return p.a.createElement(X.b,x)}}),C.count>0&&p.a.createElement($.a,null,p.a.createElement(Z.a,{meta:C,apiRequest:function(e,t){return S(Object(j.h)(g,t))},dropDirection:"up"})))}}}]);
//# sourceMappingURL=../sourcemaps/portfolios~3d9b8e9e.js.map