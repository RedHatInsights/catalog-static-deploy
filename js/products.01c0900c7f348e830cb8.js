"use strict";(self.webpackChunkcatalog=self.webpackChunkcatalog||[]).push([[2893],{1797:(e,t,r)=>{r.r(t),r.d(t,{default:()=>H});var n=r(22122),o=r(28481),a=r(96156),i=r(30624),c=r.n(i),l=r(45237),u=r(2112),s=r(48794),p=r(89231),d=r(63035),f=r(59797),m=r(91703),g=r(77172);const y=function(e){var t=e.meta,r=e.fetchProducts,n=e.isLoading,o=e.filterProps,a=o.searchValue,i=o.onFilterChange,c=o.placeholder;return{fields:[{component:m.H.TOP_TOOLBAR,key:"products-top-toolbar",fields:[{component:m.H.TOP_TOOLBAR_TITLE,key:"products-toolbar-title",title:"Products",description:"All products collected from your portfolios",noData:t.noData},{component:m.H.LEVEL,key:"Products-actions",fields:t.noData?[]:[{component:m.H.TOOLBAR,key:"main-portfolio-toolbar",fields:[{groupName:"filter-group",component:m.H.FILTER_TOOLBAR_ITEM,key:"filter-input",searchValue:a,onFilterChange:i,placeholder:c,isClearable:!0}]},{component:m.H.LEVEL_ITEM,key:"pagination-item",fields:t.count>0?[{component:g.Z,key:"products-pagination",meta:t,apiProps:a,apiRequest:r,isDisabled:n,isCompact:!0}]:[]}]}]}]}};var h=r(66678),E=r(7247),O=r(59837),v=r(11608),P=r(81624),Z=r(33188),b=r(6202),F=r(20018),D=r(63540),T=r(63853),_=r(36722),k=r(92183),L=r(44058),V=r(72510),C=r(97881);const R=(0,r(62945).vU)({addSource:{id:"products.empty.add-source",defaultMessage:"Add source"},configureSource:{id:"products.empty.configure-source",defaultMessage:"Configure a source and add products into portfolios."},title:{id:"products.toolbar.title",defaultMessage:"Products"}});var j=r(53352),w=r(23349);function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach((function(t){(0,a.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var x=(0,P.Z)((function(e,t,r){r(!0),t((0,p._r)(e,E.he)).then((function(){return r(!1)}))}),1e3),A={filterValue:"",isOpen:!1,isFetching:!0,isFiltering:!1},B=function(e,t){switch(t.type){case"setFetching":return S(S({},e),{},{isFetching:t.payload});case"setFilterValue":return S(S({},e),{},{filterValue:t.payload});case"setFilteringFlag":return S(S({},e),{},{isFiltering:t.payload})}return e};const H=function(){var e,t=(0,w.Z)(),r=(0,L.Z)(),a=(0,i.useContext)(T.Z).release,m=(0,i.useReducer)(B,S(S({},A),{},{filterValue:(null==r||null===(e=r.products)||void 0===e?void 0:e.filter)||""})),E=(0,o.Z)(m,2),P=E[0],I=P.isFetching,H=P.filterValue,M=P.isFiltering,q=E[1],J=(0,i.useContext)(V.Z).userIdentity.identity.user.is_org_admin,U=(0,l.useDispatch)(),Y=(0,l.useSelector)((function(e){return e.portfolioReducer.portfolioItems})),N=Y.data,z=Y.meta;(0,i.useEffect)((function(){var e;Promise.all([U((0,p._r)(null==r||null===(e=r.products)||void 0===e?void 0:e.filter,null==r?void 0:r.products)),U((0,v.dw)())]).then((function(){return q({type:"setFetching",payload:!1})})),(0,d.k3)()}),[]);var G=function(e){q({type:"setFilterValue",payload:e}),x(e,U,(function(e){return q({type:"setFilteringFlag",payload:e})}))},K=N.map((function(e){return c().createElement(f.Z,(0,n.Z)({key:e.id,pathname:e.portfolio_id&&_.YJ},(r=(t=e).portfolio_id,o=t.id,a=t.service_offering_source_ref,r&&o&&a?{pathname:r&&_.YJ,searchParams:{portfolio:r,"portfolio-item":o,source:a,"from-products":"true"}}:{}),e,{toDisplay:[]}));var t,r,o,a})),Q={PrimaryAction:z.noData?function(){return J&&c().createElement("a",{href:"".concat(a,"settings/sources/new")},c().createElement(b.Button,{ouiaId:"add-source",variant:"primary"},t(R.addSource)))}:function(){return c().createElement(b.Button,{ouiaId:"clear-filter",variant:"link",onClick:function(){return G("")}},t(C.Z.clearFilters))},title:z.noData?t(C.Z.noProducts):t(C.Z.noResults),renderDescription:function(){return c().createElement(i.Fragment,null,c().createElement(F.TextContent,null,c().createElement(D.Text,{component:D.TextVariants.p},z.noData?t(R.configureSource):t(C.Z.noResultsDescription)),J?c().createElement(D.Text,{component:D.TextVariants.p},t(j.Z.connectSource,{a:function(e){return c().createElement(i.Fragment,null,c().createElement("a",{href:"".concat(document.baseURI,"settings/sources")},e))}})):c().createElement(D.Text,null,t(j.Z.contactAdmin))))},Icon:z.noData?u.ZP:s.ZP};return c().createElement(i.Fragment,null,c().createElement(h.Z,{schema:y({filterProps:{searchValue:H,onFilterChange:G,placeholder:t(C.Z.filterByProduct)},title:t(R.title),isLoading:M||I,meta:z,fetchProducts:function(){return U(p._r.apply(void 0,arguments))}})}),c().createElement(O.Z,{isLoading:M||I,items:K,renderEmptyState:function(){return c().createElement(Z.Z,Q)}}),z.count>0&&c().createElement(k.Z,null,c().createElement(g.Z,{dropDirection:"up",meta:z,apiRequest:function(e,t){var n;return U((0,p._r)(null==r||null===(n=r.products)||void 0===n?void 0:n.filter,t))}})))}}}]);
//# sourceMappingURL=../sourcemaps/products.66b16528d0cf27d56aded66a9c7bb76c.js.map