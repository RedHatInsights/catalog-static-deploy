"use strict";(self.webpackChunkcatalog=self.webpackChunkcatalog||[]).push([[7792],{87552:(e,t,n)=>{n.r(t),n.d(t,{default:()=>A});var r=n(28481),a=n(96156),o=n(30624),i=n.n(o),l=n(45237),c=n(334),u=n(48794),s=n(54213),f=n(63035),p=n(66678),m=n(7247),d=n(11608),b=n(12700),v=n(33188),g=n(81624),y=n(23212),h=n(22160),E=n(8666),Z=n(97881),F=n(23349),O=function(){var e=(0,F.Z)();return i().createElement(y.Text,{component:y.TextVariants.h1},e(Z.Z.noItems))};const w=function(e){var t=e.data,n=e.columns,r=e.isCompact,a=void 0!==r&&r,l=e.isLoading,c=void 0!==l&&l,u=e.actionResolver,s=e.areActionsDisabled,f=e.borders,p=void 0===f||f,m=e.routes,d=void 0===m?function(){return null}:m,b=e.titlePlural,v=e.renderEmptyState,g=e.ouiaId,y=(0,o.useState)([]),Z=y[0],F=y[1];return(0,o.useEffect)((function(){F(t)}),[t]),c?i().createElement(E.Wi,null):i().createElement(o.Fragment,null,0===Z.length?v?v():i().createElement(O,null):i().createElement(o.Fragment,null,d(),i().createElement(h.Table,{ouiaId:g,"aria-label":b+" table",variant:a?h.TableVariant.compact:void 0,borders:p,rows:Z,cells:n,actionResolver:u,areActionsDisabled:s},i().createElement(h.TableHeader,null),i().createElement(h.TableBody,null))))};var P=n(85061),k=n(77172),j=n(92183),D=n(47786),R=n(56682),I=n(53352);function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function V(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var T={filterValue:"",isOpen:!1,isFetching:!0,isFiltering:!1},C=(0,g.Z)((function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:m.he;r(!0),n((0,d.bJ)(e,t,a)).then((function(){return r(!1)}))}),1e3),J=function(e,t){switch(t.type){case"setFetching":return V(V({},e),{},{isFetching:t.payload});case"setFilterValue":return V(V({},e),{},{filterValue:t.payload});case"setFilteringFlag":return V(V({},e),{},{isFiltering:t.payload});default:return e}};const A=function(){var e=(0,F.Z)(),t=(0,o.useRef)([e(R.Z.name),e(R.Z.description),e(R.Z.created),e(I.Z.workflowColumn)]).current,n=(0,o.useReducer)(J,T),a=(0,r.Z)(n,2),g=a[0],y=g.filterValue,h=g.isFetching,E=g.isFiltering,Z=a[1],O=(0,l.useSelector)((function(e){return e.platformReducer.platformInventories})),S=O.data,A=O.meta,q=(0,l.useSelector)((function(e){return e.platformReducer.selectedPlatform})),x=(0,l.useDispatch)(),H=(0,D.Z)(["platform"]),L=(0,r.Z)(H,1)[0].platform,B=(0,c.useHistory)();(0,o.useEffect)((function(){x((0,d.bJ)(L,y,m.he)).then((function(){return Z({type:"setFetching",payload:!1})})),(0,f.k3)()}),[]);var N=S?function(e){return e.reduce((function(e,t,n){var r=t.id,a=t.name,l=t.description,c=t.created_at,u=t.workflow;return[].concat((0,P.Z)(e),[{id:r,key:n,isOpen:!1,cells:[a,l,i().createElement(o.Fragment,{key:"date"},i().createElement(f.bb,{date:c})),u]}])}),[])}(S):[],W=q?q.name:"";return i().createElement(o.Fragment,null,i().createElement(p.Z,{schema:(0,b.At)({onFilterChange:function(e){Z({type:"setFilterValue",payload:e}),C(L,e,x,(function(e){return Z({type:"setFilteringFlag",payload:e})}),V(V({},A),{},{offset:0}))},searchValue:y,filterPlaceholder:e(I.Z.inventoriesFilter),meta:A,apiRequest:function(e,t){return x((0,d.bJ)(L,y,t))}})}),i().createElement(s.Z,{type:"content"},i().createElement(w,{ouiaId:"PlatformsTable",title:W,data:N,columns:t,isLoading:h||E,actionResolver:function(e){return[{title:"Set approval",onClick:function(){return B.push({pathname:"/platforms/platform/platform-inventories/edit-workflow",search:"?platform=".concat(L,"&inventory=").concat(e.id)})}}]},renderEmptyState:function(){return i().createElement(v.Z,{title:"No inventories",Icon:u.ZP,description:e(""===y?I.Z.noInventoriesDescription:I.Z.noInventoriesFilterDescription)})}})),A.count>0&&i().createElement(j.Z,null,i().createElement(k.Z,{dropDirection:"up",meta:A,apiRequest:function(e,t){return x((0,d.bJ)(L,y,t))}})))}}}]);
//# sourceMappingURL=../sourcemaps/platform-inventories.3a48d7b8c8152bc1f9e7.js.map