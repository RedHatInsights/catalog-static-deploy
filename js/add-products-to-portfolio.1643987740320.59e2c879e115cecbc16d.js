"use strict";(self.webpackChunkcatalog=self.webpackChunkcatalog||[]).push([[7781],{8755:(e,t,r)=>{t._t={name:"FilterIcon",height:512,width:512,svgPath:"M487.976 0H24.028C2.71 0-8.047 25.866 7.058 40.971L192 225.941V432c0 7.831 3.821 15.17 10.237 19.662l80 55.98C298.02 518.69 320 507.493 320 487.98V225.941l184.947-184.97C520.021 25.896 509.338 0 487.976 0z",yOffset:0,xOffset:0},t.k1=r(35183).createIcon(t._t),t.ZP=t.k1},55251:(e,t,r)=>{r.r(t),r.d(t,{default:()=>te});var n=r(93433),o=r(29439),i=r(4942),a=r(87462),c=r(30624),l=r.n(c),p=r(45697),s=r.n(p),u=r(45987),f=r(48794),d=r(8755),m=r(59837),y=r(33188),O=r(97881),h=r(64466),g=r(23349),b=["platform"],v=function(e){var t=e.platform,r=(0,g.Z)();return l().createElement(y.Z,{Icon:t?f.ZP:d.ZP,title:r(t?h.Z.addProducstFilterTitle:h.Z.addProducstPlatformTitle),description:r(t?O.Z.noResultsDescription:h.Z.addProducstPlatformDescription)})};v.propTypes={platform:s().any};var P=function(e){var t=e.platform,r=(0,u.Z)(e,b);return l().createElement(m.Z,(0,a.Z)({editMode:!0},r,{renderEmptyState:function(){return l().createElement(v,{platform:t})}}))};P.propTypes={checkedItems:s().arrayOf(s().string),platform:s().any},P.defaultProps={checkedItems:[]};const j=P;var w=r(66678),Z=r(7247),k=r(44056),E=r(91703),S=r(56824),F=r(28359),T=r(18446),D=r.n(T),I=function(){return(I=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},R=function(e){var t=e.onChange,r=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}(e,["onChange"]),n=(0,c.useState)(void 0),o=n[0],i=n[1];return l().createElement("div",{key:"filter-select",id:"filter-select",className:"filter-select"},l().createElement(F.M,I({isDisabled:!r.options||0===r.options.length,name:"filter-select",simpleValue:!1,onChange:function(e){t&&t(e||o),i(e||o)},value:o},r)))};R.propTypes={options:s().array,onChange:s().func.isRequired};const C=(0,c.memo)(R,(function(e,t){return D()(e.options,t.options)}));var V=r(68212),x=r(77172);function L(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?L(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const H=function(e){var t=e.options,r=e.isFetching,n=e.searchValue,o=e.portfolioName,i=e.itemsSelected,a=e.onOptionSelect,c=e.onFilterChange,l=e.portfolioRoute,p=e.onClickAddToPortfolio,s=e.meta,u=e.platformId,f=e.fetchPlatformItems;return{fields:[{component:E.H.TOP_TOOLBAR,key:"add-products-toolbar",fields:[{component:E.H.TOP_TOOLBAR_TITLE,title:"Add products: ".concat(o),key:"add-products-title"},{component:E.H.LEVEL,key:"add-products-actions",fields:[{component:E.H.TOOLBAR,key:"add-products-actions-toolbar",fields:[{component:E.H.TOOLBAR_GROUP,key:"products-filter-group",fields:[{component:C,key:"select-platforms",id:"products-platform-select",isMulti:!1,isSearchable:!0,placeholder:"Filter by Platform",options:t,onChange:a},{component:E.H.FILTER_TOOLBAR_ITEM,key:"filter-products-input",onFilterChange:c,searchValue:n,isDisabled:!u,placeholder:"Filter products"}]},A({groupName:"cancel-group-item"},(0,S.g)({key:"add-products-cancel-button",pathname:l,variant:"link","aria-label":"Cancel Add products to Portfolio",preserveSearch:!0,title:"Cancel"})),{component:E.H.TOOLBAR_ITEM,key:"add-group-item",fields:[{key:"portfolio-items-add-group",component:V.Z,variant:"primary","aria-label":"Add products to Portfolio",title:"Add",type:"button",onClick:p,isDisabled:!i||r,showSpinner:r,children:"Add",id:"add-products-to-portfolio"}]}]},{component:E.H.LEVEL_ITEM,key:"pagination-item",fields:s?[{component:x.Z,key:"add-products-pagination",meta:s,apiProps:u,apiRequest:f,isCompact:!0}]:[]}]}]}]}};var _=r(11608),B=r(49827),N=r(89231),W=r(77503),M=r(74798),$=r(14494),q=r(92183),z=r(81624),U=r(63035);function G(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function J(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?G(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):G(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;return e.map((function(e){return l().createElement(k.Z,(0,a.Z)({key:e.id},e,{editMode:!0,onToggleItemSelect:function(){return t(e.id)},checked:r.includes(e.id)}))}))},Q={filterValue:"",isFetching:!1,isFiltering:!1},X=function(e,t){switch(t.type){case"setFetching":return J(J({},e),{},{isFetching:t.payload});case"setFilterValue":return J(J({},e),{},{filterValue:t.payload});case"setFilteringFlag":return J(J({},e),{},{isFiltering:t.payload})}return e},Y=(0,z.Z)((function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Z.he;n(!0),r((0,U.$W)()?(0,B.Vx)(e,t,J(J({},o),{},{filter:t})):(0,_.Vx)(e,t,J(J({},o),{},{filter:t}))).then((function(){return n(!1)}))}),1e3),ee=function(e){var t=e.portfolioRoute,r=(0,c.useState)(void 0),i=(0,o.Z)(r,2),a=i[0],p=i[1],s=(0,c.useState)([]),u=(0,o.Z)(s,2),f=u[0],d=u[1],m=(0,c.useReducer)(X,Q),y=(0,o.Z)(m,2),O=y[0],h=O.filterValue,g=O.isFetching,b=y[1],v=(0,M.Z)().push,P=(0,$.I0)(),k=(0,$.v9)((function(e){var t=e.portfolioReducer.selectedPortfolio,r=e.platformReducer;return{platforms:r.platforms,platformItems:r.platformItems,isLoading:r.isPlatformDataLoading,portfolio:t}})),E=k.portfolio,S=k.platforms,F=k.platformItems,T=k.isLoading;(0,c.useEffect)((function(){P((0,U.$W)()?(0,B.dw)():(0,_.dw)())}),[]);var D=function(){return a&&F[a.id]?(0,U.$W)()?F[a.id].results:F[a.id].data:[]},I=a&&F[a.id]&&((0,U.$W)()?F[a.id].meta:{count:F[a.id].count}),R=S.results&&S.results.length>0?S.results.map((function(e){return{value:e.id,label:e.name,id:e.id}})):[];return l().createElement(c.Fragment,null,l().createElement(w.Z,{schema:H({options:R,isFetching:g,portfolioName:E&&E.name||"",itemsSelected:f.length>0,onOptionSelect:function(e){p(e),P((0,U.$W)()?(0,B.Vx)(e.id,h,Z.he):(0,_.Vx)(e.id,h,Z.he))},onFilterChange:function(e){return function(e){b({type:"setFilterValue",payload:e}),Y(a.id,e,P,(function(e){return b({type:"setFilteringFlag",payload:e})}),J(J({},I),{},{offset:0}))}(e)},portfolioRoute:t,onClickAddToPortfolio:function(){return P({type:"setFetching",payload:!0}),P((0,U.$W)()?(0,W.Zm)(E.id,D().filter((function(e){return f.includes(e.id)}))):(0,N.Zm)(E.id,f)).then((function(){return P({type:"setFetching",payload:!1})})).then((function(){return v({pathname:t,search:"?portfolio=".concat(E.id)})})).then((function(){return P((0,U.$W)()?(0,W.cP)(E.id):(0,N.cP)(E.id))})).catch((function(){return P({type:"setFetching",payload:!1})}))},meta:I,platformId:a&&a.id,searchValue:h,fetchPlatformItems:function(e,t){return P((0,U.$W)()?(0,B.Vx)(e,h,t):(0,_.Vx)(e,h,t))}})}),l().createElement(j,{platform:!!a,checkedItems:f,isLoading:T,items:K(D(),(function(e){return d(function(e){var t=f.indexOf(e);return t>-1?[].concat((0,n.Z)(f.slice(0,t)),(0,n.Z)(f.slice(t+1))):[].concat((0,n.Z)(f),[e])}(e))}),f)}),I&&I.count>0&&l().createElement(q.Z,null,l().createElement(x.Z,{meta:I,apiProps:a&&a.id,apiRequest:function(e,t){return(0,U.$W)()?(0,B.Vx)(e,h,t):(0,_.Vx)(e,h,t)},dropDirection:"up"})))};ee.propTypes={portfolioRoute:s().string.isRequired};const te=ee},56824:(e,t,r)=>{r.d(t,{g:()=>p});var n=r(4942),o=r(45987),i=r(91703),a=["pathname","preserveSearch","id"];function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var p=function(e){var t=e.pathname,r=e.preserveSearch,n=e.id,c=(0,o.Z)(e,a);return{component:i.H.TOOLBAR_ITEM,key:"".concat(c.key,"/button-link"),fields:[{component:i.H.LINK,pathname:t,preserveSearch:r,key:"".concat(c.key,"/button-link"),isDisabled:c.isDisabled,id:n,fields:[l({component:i.H.BUTTON},c)]}]}}},68212:(e,t,r)=>{r.d(t,{Z:()=>d});var n=r(30624),o=r.n(n),i=r(29163),a=r(65832),c=r(67463),l=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},p=function(){return(p=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},s=(0,i.ZP)(a.Button)(m||(m=l(["\n  display: flex !important;\n  align-items: center;\n"],["\n  display: flex !important;\n  align-items: center;\n"]))),u=i.ZP.span(y||(y=l(["\n  margin-right: ",";\n"],["\n  margin-right: ",";\n"])),(function(e){return e.showSpinner?"8px":"0"})),f=(0,n.forwardRef)((function(e,t){var r=e.children,n=e.showSpinner,i=void 0!==n&&n,a=e.isDisabled,l=void 0!==a&&a,f=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}(e,["children","showSpinner","isDisabled"]);return o().createElement(s,p({ref:t},f,{isDisabled:l}),o().createElement(u,{showSpinner:i},r),i&&o().createElement(c.Spinner,{size:"md"}))}));f.displayName="ButtonWithSpinner";const d=f;var m,y},77172:(e,t,r)=>{r.d(t,{Z:()=>p});var n=r(30624),o=r.n(n),i=r(99166),a=r(65832),c=r(7247),l=function(){return(l=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};const p=function(e){var t=e.meta,r=t.limit,n=void 0===r?50:r,p=t.count,s=void 0===p?0:p,u=t.offset,f=void 0===u?0:u,d=e.apiProps,m=e.apiRequest,y=e.className,O=void 0===y?"":y,h=e.isCompact,g=void 0!==h&&h,b=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}(e,["meta","apiProps","apiRequest","className","isCompact"]);return o().createElement("div",{className:O},o().createElement(a.Pagination,l({perPage:n||50,itemCount:s||0,onPerPageSelect:function(e,t){return m(d,{offset:f,limit:t})},page:(0,c.FZ)(n,f),onSetPage:function(e,t,r){var o={offset:(0,c.SJ)(t,n),limit:n},a=function(){return m(d,o)};return r?(0,i.Z)(a,250)():a()},dropDirection:"down",isCompact:g},b)))}}}]);
//# sourceMappingURL=../sourcemaps/add-products-to-portfolio.9044eb8af504cf2631c06ea11b3abd4f.js.map