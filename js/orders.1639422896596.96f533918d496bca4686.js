(self.webpackChunkcatalog=self.webpackChunkcatalog||[]).push([[486],{92223:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var r=n(87462),o=n(4942),a=n(45987),i=n(30624),l=n.n(i),s=n(45697),c=n.n(s),d=n(94184),u=n.n(d),f=function(e){var t=e.centered,n=e.className,i=e.children,s=(0,a.Z)(e,["centered","className","children"]),c=u()("ins-c-table__empty",(0,o.Z)({},"is-centered",t),n);return l().createElement("div",(0,r.Z)({className:c},s)," ",i)};const p=f;f.propTypes={centered:c().bool,children:c().any,className:c().string}},97881:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=(0,n(50049).vU)({noItems:{id:"common.filtering.noItems",defaultMessage:"No items found"},filterByProduct:{id:"common.filtering.filterByProduct",defaultMessage:"Filter by product"},noResults:{id:"common.filtering.noResults",defaultMessage:"No results found"},noResultsDescription:{id:"common.filtering.noResultsDescription",defaultMessage:"No results match the filter criteria. Remove all filters or clear all filters to show results."},clearFilters:{id:"common.filtering.clear-filters",defaultMessage:"Clear all filters"},noProducts:{id:"common.filtering.no-products",defaultMessage:"No products yet"},noRecords:{id:"commonMessages.noRecords",defaultMessage:"No records"},filterByTitle:{id:"tableToolbar.filterByTitle",defaultMessage:"Filter by {title}"},noResultsFound:{id:"tableToolbar.noResultsFound",defaultMessage:"No results found"},noResult:{id:"tableToolbar.noResult",defaultMessage:"No {results}"},unknown:{id:"commonMessages.unknown",defaultMessage:"Unknown"}})},31644:(e,t,n)=>{"use strict";n.d(t,{C:()=>l,Z:()=>s});var r=n(56682),o=n(50049),a=function(){return(a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},i=(0,o.vU)({title:{id:"common.states.title",defaultMessage:"State"},ordered:{id:"common.states.ordered",defaultMessage:"Ordered"},approvalPending:{id:"common.states.approval-pending",defaultMessage:"Approval Pending"},canceled:{id:"common.states.canceled",defaultMessage:"Canceled"},completed:{id:"common.states.completed",defaultMessage:"Completed"},failed:{id:"common.states.failed",defaultMessage:"Failed"},undecided:{id:"common.states.undecided",defaultMessage:"Undecided"},approved:{id:"common.states.approved",defaultMessage:"Approved"},denied:{id:"common.states.denied",defaultMessage:"Denied"},error:{id:"common.states.error",defaultMessage:"Error"},pending:{id:"common.states.pending",defaultMessage:"Pending"},skipped:{id:"common.states.skipped",defaultMessage:"Skipped"},started:{id:"common.states.started",defaultMessage:"Started"},notified:{id:"common.states.notified",defaultMessage:"Notified"},unknown:{id:"common.states.unknown",defaultMessage:"Unknown"}}),l=function(e){return e?e.replace(/\s/g,"").replace(/^./,(function(e){return e.toLowerCase()})):"unknown"};const s=a(a({},i),{created:r.Z.created})},32642:(e,t,n)=>{"use strict";n.d(t,{Z:()=>g});var r=n(30624),o=n.n(r),a=n(29163),i=n(14494),l=n(8666),s=n(36288),c=n(72679);const d=(0,a.ZP)(c.LazyLoadImage)(p||(u=["\n  height: ",";\n  display: ",";\n  float: ",";\n  width: ",";\n"],f=["\n  height: ",";\n  display: ",";\n  float: ",";\n  width: ",";\n"],Object.defineProperty?Object.defineProperty(u,"raw",{value:f}):u.raw=f,p=u),(function(e){var t=e.height;return e.hidden?"0px":t+"px"||0}),(function(e){return e.hidden?"none":"inherit"}),(function(e){return e.hidden?"left":"inherit"}),(function(e){return e.hidden?0:"inherit"}));var u,f,p,m=a.ZP.div(y||(y=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}(["\n  display: inline-block;\n  height: ",";\n"],["\n  display: inline-block;\n  height: ",";\n"])),(function(e){return e.height+"px"}));const g=function(e){var t=e.src,n=e.height,a=void 0===n?40:n,c=e.sourceId,u=(0,r.useState)(!1),f=u[0],p=u[1],g=(0,r.useState)(!1),y=g[0],v=g[1],h=(0,i.v9)((function(e){return e.platformReducer.platformIconMapping})),b=c?h[c]:s;return o().createElement(m,{height:a},!f&&o().createElement(l.bz,{height:a}),o().createElement(d,{threshold:2e3,delayTime:0,hidden:!f,height:f?a:0,onError:function(){return v(!0)},onLoad:function(){return p(!0)},src:!t||y?b:t}))};var y},49827:(e,t,n)=>{"use strict";n.d(t,{bJ:()=>y,Vx:()=>m,dw:()=>p,x6:()=>g,TP:()=>v});var r=n(90060),o=n(15654),a=n(35388),i=n(7247),l=(0,o.Hx)(),s=((0,o.mY)().post,function(e){return l.patch(a.Vs+"/sources/"+e+"/refresh/")}),c=function(e,t,n){if(e){var r=t?"?name="+t:"",o=n?"page_size="+n.limit+"&page="+(n.offset||1):"";return l.get(a.Vs+"/sources/"+e+"/service_offerings/"+r+(t?"&":"?")+o)}return l.get(a.Vs+"/service_offerings/")},d=function(e,t,n){if(void 0===t&&(t=""),void 0===n&&(n=i.he),e){var r=t?"name="+t:"";return l.get(a.Vs+"/sources/"+e+"/service_inventories/?"+r+(n?"&page_size="+n.limit+"&page="+(n.offset||1):""))}return l.get(a.Vs+"/service_inventories/?page_size="+n.limit+"&page="+(n.offset||1))},u=n(83215),f=function(){return(f=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},p=function(){return function(e){return e({type:r.mH+"_PENDING"}),l.get(a.Vs+"/sources/").then((function(t){return e({type:r.mH+"_FULFILLED",payload:t})})).catch((function(t){return e({type:r.mH+"_REJECTED",payload:t})}))}},m=function(e,t,n){return{type:r.d6,payload:c(e,t,n),meta:f({platformId:e,filter:t},n)}},g=function(e){return{type:r.UZ,payload:(t=e,l.get(a.Vs+"/sources/"+t+"/"))};var t},y=function(e,t,n){return{type:r.c_,payload:d(e,t,n)}},v=function(e){return function(t){return t({type:r.$f,payload:s(e).then((function(){return t((0,u.wN)({variant:"success",title:"Success starting the platform refresh",dismissable:!0,description:"The platform refresh started successfully"}))})).catch((function(e){429===e.status?t((0,u.wN)({variant:"info",title:"Platform refresh in progress",dismissable:!0,description:"Platform refresh already running."})):t({type:r.$f+"_REJECTED",payload:e})}))})}}},77172:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r=n(30624),o=n.n(r),a=n(99166),i=n(56976),l=n(7247),s=function(){return(s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};const c=function(e){var t=e.meta,n=t.limit,r=void 0===n?50:n,c=t.count,d=void 0===c?0:c,u=t.offset,f=void 0===u?0:u,p=e.apiProps,m=e.apiRequest,g=e.className,y=void 0===g?"":g,v=e.isCompact,h=void 0!==v&&v,b=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["meta","apiProps","apiRequest","className","isCompact"]);return o().createElement("div",{className:y},o().createElement(i.Pagination,s({perPage:r||50,itemCount:d||0,onPerPageSelect:function(e,t){return m(p,{offset:f,limit:t})},page:(0,l.FZ)(r,f),onSetPage:function(e,t,n){var o={offset:(0,l.SJ)(t,r),limit:r},i=function(){return m(p,o)};return n?(0,a.Z)(i,250)():i()},dropDirection:"down",isCompact:h},b)))}},42413:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(30624),o=n.n(r),a=n(11085);const i={Completed:{icon:o().createElement(a.CheckCircleIcon,null),color:"green"},"Approval Pending":{icon:o().createElement(a.ClockIcon,null),color:"blue"},Ordered:{icon:o().createElement(a.PlusCircleIcon,null),color:"grey"},Failed:{icon:o().createElement(a.ExclamationCircleIcon,null),color:"red"},Canceled:{icon:o().createElement(a.ExclamationTriangleIcon,null),color:"orange"},Created:{icon:o().createElement(a.PlusCircleIcon,null),color:"grey"},Approved:{icon:o().createElement(a.CheckCircleIcon,null),color:"green"},Denied:{icon:o().createElement(a.ExclamationCircleIcon,null),color:"red"},Error:{icon:o().createElement(a.ExclamationCircleIcon,null),color:"red"},Undecided:{icon:o().createElement(a.ClockIcon,null),color:"blue"},Unknown:{icon:o().createElement(a.ExclamationTriangleIcon,null),color:"grey"}}},53170:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>Q});var r=n(30624),o=n.n(r),a=n(56976),i=n(66678),l=n(91703);var s=n(14494),c=n(54213),d=n(66031),u=n(92223),f=n(87462),p=n(4942),m=n(45987),g=n(84812),y=n(62472),v=n(94184),h=n.n(v),b=n(45697),E=n.n(b),w=function(e){var t=e.isFooter,n=e.results,a=e.className,i=e.selected,l=e.children,s=e.ouiaId,c=e.ouiaSafe,d=void 0===c||c,u=(0,m.Z)(e,["isFooter","results","className","selected","children","ouiaId","ouiaSafe"]),v=h()("ins-c-table__toolbar",(0,p.Z)({},"ins-m-footer",t),a),b="RHI/TableToolbar",E=(0,y.Z1)(b,s,d);return o().createElement(r.Fragment,null,o().createElement(g.o,(0,f.Z)({className:v,"data-ouia-component-type":b,"data-ouia-component-id":E,"data-ouia-safe":d},u),l),(n>=0||i>=0)&&o().createElement("div",{className:"ins-c-table__toolbar-results"},n>=0&&o().createElement("span",{className:"ins-c-table__toolbar-results-count"}," ",function(e){return"".concat(e,e>1||e<1?" Results":" Result")}(n)," "),i>=0&&o().createElement("span",{className:"ins-c-table__toolbar-results-selected"}," ",i," Selected ")))};const Z=w;w.propTypes={isFooter:E().bool,results:E().number,children:E().any,className:E().string,selected:E().number,ouiaId:E().string,ouiaSafe:E().bool},w.defaultProps={isFooter:!1};var F=n(11085),I=n(41436),P=n(2482),O=n(85132),C=n(11608),x=n(49827),T=n(8666),_=n(62410),N=n(32642),D=n(35388),M=n(20697),R=n(36722),S=n(31644),k=n(42413),B=function(){return(B=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};var j=n(77172),A=n(81624),U=n(7247),V=n(44058),L=n(97881),H=n(40229),z=n(56682),q=n(23349),G=function(){return(G=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},J=(0,A.Z)((function(e,t,n,r){var o;void 0===t&&(t=U.he),r(!0),n((null===(o=window.catalog)||void 0===o?void 0:o.standalone)?(0,O.AU)(e,t):(0,P.AU)(e,t)).then((function(){return r(!1)}))}),1e3),$={isOpen:!1,isFetching:!0,isFiltering:!1,filterType:"state",filters:{state:[],owner:""},sortBy:{index:0,direction:I.SortByDirection.desc}},W=function(e,t){switch(t.type){case"setFetching":return G(G({},e),{isFetching:t.payload});case"setFilterValue":return G(G({},e),{filters:(n=t.payload,r=e.filterType,o=e.filters,G(G({},o),((a={})[r]=n,a)))});case"replaceFilterChip":return G(G({},e),{filters:t.payload});case"setFilteringFlag":return G(G({},e),{isFiltering:t.payload});case"setFilterType":return G(G({},e),{filterType:t.payload});case"setSortBy":return G(G({},e),{sortBy:t.payload,isFetching:!0})}var n,r,o,a;return e},Y={0:"id",3:"owner",4:"created_at",6:"state"};const K=function(){var e,t,n,i,l,f,p=(0,q.Z)(),m=(0,s.I0)(),g=(0,V.Z)(),y=(0,r.useReducer)(W,G(G({},$),{filters:(null===(e=null==g?void 0:g.orders)||void 0===e?void 0:e.filters)||{state:[],owner:""},sortBy:{direction:(null===(t=null==g?void 0:g.orders)||void 0===t?void 0:t.sortDirection)||I.SortByDirection.desc,index:(null===(n=null==g?void 0:g.orders)||void 0===n?void 0:n.sortIndex)||0}})),v=y[0],h=v.isFetching,b=v.isFiltering,E=v.filterType,w=v.filters,A=v.sortBy,U=y[1],K=(0,s.v9)((function(e){return e.orderReducer.orders})),Q=(null===(i=window.catalog)||void 0===i?void 0:i.standalone)?K.results:K.data,X=(null===(l=window.catalog)||void 0===l?void 0:l.standalone)?{count:K.count,noData:!1}:K.meta,ee=[{title:p(H.Z.orderID)},p(z.Z.product),"",{title:p(H.Z.orderedByLabel)},{title:p(H.Z.orderDate)},p(z.Z.updated),{title:p(z.Z.status)}].map((function(e){return"object"!=typeof e||h||b||0===Q.length?e:G(G({},e),{transforms:[I.sortable]})})),te=(0,s.v9)((function(e){return e.portfolioReducer.portfolioItems})),ne=(null===(f=window.catalog)||void 0===f?void 0:f.standalone)?te.results:te.data,re=Q.map((function(e){var t=function(e,t){var n=e.orderItems,r=n&&n[0]&&t.find((function(e){var t=e.id;return n[0].portfolio_item_id===t}));return r?{orderPlatform:r.service_offering_source_ref,orderPortfolio:r.portfolio_id}:{}}(e,ne),n=t.orderPlatform,i=t.orderPortfolio,l=function(e,t){var n=e.orderItems,r=e.id,o=n&&n[0]&&t.find((function(e){var t=e.id;return n[0].portfolio_item_id===t}));return o?o.name:"Order "+r}(e,ne);return function(e,t,n,i){var l,s,c=e,d=B(B(B(B({order:e.id},c.id?{"order-item":c.id}:{}),c.portfolio_item?{"portfolio-item":c.portfolio_item}:{}),t?{platform:t}:{}),n?{portfolio:n}:{}),u=(0,S.C)(e.state);return[{title:o().createElement(I.TableText,null,o().createElement(M.Z,{pathname:R.A5,searchParams:d},e.id))},{title:o().createElement(r.Fragment,null,o().createElement(N.Z,{height:60,src:(l=e,s=l.orderItems,s&&s[0]&&D.Vs+"/portfolio_items/"+s[0].portfolio_item_id+"/icon"),sourceId:t}))},e.orderName,e.owner,{title:o().createElement(a.Text,{className:"pf-u-mb-0",component:a.TextVariants.small},o().createElement(_.Z,{date:e.created_at,variant:"relative"}))},{title:o().createElement(a.Text,{className:"pf-u-mb-0",component:a.TextVariants.small},o().createElement(_.Z,{date:(null==e?void 0:e.orderItems)&&e.orderItems[0]&&e.orderItems[0].updated_at,variant:"relative"}))},{title:o().createElement(I.TableText,null,o().createElement(a.Label,B({},k.Z[e.state],{variant:"outline"}),i(S.Z[u])))}]}(G(G({},e),{orderName:l}),n,i,p)}));(0,r.useEffect)((function(){var e,t;U({type:"setFetching",payload:!0}),Promise.all([m((null===(e=window.catalog)||void 0===e?void 0:e.standalone)?(0,O.AU)(w,null==g?void 0:g.orders):(0,P.AU)(w,null==g?void 0:g.orders)),m((null===(t=window.catalog)||void 0===t?void 0:t.standalone)?(0,x.dw)():(0,C.dw)())]).then((function(){return U({type:"setFetching",payload:!1})}))}),[]);var oe=function(e,t){var n;return U({type:"setFetching",payload:!0}),m((null===(n=window.catalog)||void 0===n?void 0:n.standalone)?(0,O.AU)(w,G(G({},t),{sortBy:Y[A.index],sortDirection:A.direction,sortIndex:A.index})):(0,P.AU)(w,G(G({},t),{sortBy:Y[A.index],sortDirection:A.direction,sortIndex:A.index}))).then((function(){return U({type:"setFetching",payload:!1})})).catch((function(){return U({type:"setFetching",payload:!1})}))},ae=function(e){var t;void 0===e&&(e=""),U({type:"setFilterValue",payload:e}),J(G(G({},w),((t={})[E]=e,t)),G(G({},X),{sortBy:Y[A.index],sortDirection:A.direction,sortIndex:A.index,offset:0}),m,(function(e){return U({type:"setFilteringFlag",payload:e})}))},ie=function(){return U({type:"replaceFilterChip",payload:$.filters}),J($.filters,G(G({},X),{sortBy:Y[A.index],sortDirection:A.direction,sortIndex:A.index}),m,(function(e){return U({type:"setFilteringFlag",payload:e})}))};return o().createElement(a.Grid,{hasGutter:!0},o().createElement(a.GridItem,null,o().createElement(c.Z,{type:"content"},!X.noData&&o().createElement(d.Z,{activeFiltersConfig:{filters:Object.entries(w).filter((function(e){var t=e[1];return t&&t.length>0})).map((function(e){var t=e[0],n=e[1];return{category:t,type:t,chips:Array.isArray(n)?n.map((function(e){return{name:e}})):[{name:n}]}})),onDelete:function(e,t,n){var r=t[0];if(n)return ie();var o=G({},w);"state"===r.type?o[r.type]=o[r.type].filter((function(e){var t;return e!==(null===(t=null==r?void 0:r.chips)||void 0===t?void 0:t[0].name)})):o[r.type]="",U({type:"replaceFilterChip",payload:o}),J(o,X,m,(function(e){return U({type:"setFilteringFlag",payload:e})}))}},filterConfig:{onChange:function(e,t){return U({type:"setFilterType",payload:t})},value:E,items:[{filterValues:{items:[{value:"Approval Pending",label:p(S.Z.approvalPending)},{value:"Canceled",label:p(S.Z.canceled)},{value:"Completed",label:p(S.Z.completed)},{value:"Created",label:p(z.Z.created)},{value:"Failed",label:p(S.Z.failed)},{value:"Ordered",label:p(S.Z.ordered)}],value:w.state,onChange:function(e,t){return ae(t)}},label:"State",value:"state",type:"checkbox"},{filterValues:{value:w.owner,onChange:function(e,t){return ae(t)}},label:"Owner",value:"owner"}]},pagination:o().createElement(j.Z,{isDisabled:h||b,apiRequest:oe,meta:X,isCompact:!0})}),o().createElement(I.Table,G({"aria-label":"orders"},h||b||0!==Q.length?{sortBy:A,onSort:function(e,t,n){var r;return U({type:"setSortBy",payload:{index:t,direction:n}}),m((null===(r=window.catalog)||void 0===r?void 0:r.standalone)?(0,O.AU)(w,G(G({},X),{sortBy:Y[t],sortDirection:n,sortIndex:t})):(0,P.AU)(w,G(G({},X),{sortBy:Y[t],sortDirection:n,sortIndex:t}))).then((function(){return U({type:"setFetching",payload:!1})}))}}:{},{cells:ee,rows:h||b?[]:re,className:"orders-table"}),o().createElement(I.TableHeader,null),o().createElement(I.TableBody,null)),!(h||b)&&0===Q.length&&o().createElement(u.Z,null,o().createElement(a.Bullseye,null,o().createElement(a.EmptyState,null,o().createElement(a.Bullseye,null,o().createElement(a.EmptyStateIcon,{icon:F.SearchIcon})),o().createElement(a.Title,{headingLevel:"h1",size:"lg"},X.noData?p(H.Z.noOrdersTitle):p(L.Z.noResults)),o().createElement(a.EmptyStateBody,null,X.noData?p(H.Z.noOrdersDescription):p(L.Z.noResultsDescription)),!X.noData&&o().createElement(a.EmptyStateSecondaryActions,null,o().createElement(a.Button,{ouiaId:"clear-filter",variant:"link",onClick:ie},p(L.Z.clearFilters)))))),(h||b)&&o().createElement(T.Wi,null),o().createElement(Z,{className:"pf-u-mr-0"},o().createElement("div",{className:"bottom-pagination-container"},o().createElement(a.Flex,{justifyContent:{default:"justifyContentFlexEnd"}},X&&X.count>0&&o().createElement(j.Z,{className:"pf-u-mt-0",isDisabled:h||b,apiRequest:oe,meta:X})))))))},Q=function(){return o().createElement(a.Stack,null,o().createElement(i.Z,{schema:{fields:[{component:l.H.TOP_TOOLBAR,className:"orders pf-u-p-lg",key:"orders-toolbar",fields:[{component:l.H.TOP_TOOLBAR_TITLE,key:"orders-toolbar-title",title:"Orders",className:""}]}]}}),o().createElement(K,null))}},36288:(e,t,n)=>{"use strict";e.exports=n.p+"fonts/card-icon-default.svg"},11452:()=>{},93818:()=>{},94498:()=>{},28992:()=>{},8572:()=>{},98379:()=>{},36974:()=>{},97236:()=>{},38024:()=>{},16166:()=>{}}]);
//# sourceMappingURL=../sourcemaps/orders.4710f367162eac5b0e9115d7ff3e0f53.js.map