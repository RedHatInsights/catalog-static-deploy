(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{464:function(t,e,n){"use strict";e.__esModule=!0,n(518),e.default={modifiers:{fill:"pf-m-fill",gutter:"pf-m-gutter"},stack:"pf-l-stack",stackItem:"pf-l-stack__item"}},469:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(3),o=r.__importStar(n(0)),c=r.__importDefault(n(464)),a=n(4);e.Stack=t=>{var{hasGutter:e=!1,className:n="",children:i=null,component:u="div"}=t,l=r.__rest(t,["hasGutter","className","children","component"]);const s=u;return o.createElement(s,Object.assign({},l,{className:a.css(c.default.stack,e&&c.default.modifiers.gutter,n)}),i)},e.Stack.displayName="Stack"},484:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(3),o=r.__importStar(n(0)),c=r.__importDefault(n(464)),a=n(4);e.StackItem=t=>{var{isFilled:e=!1,className:n="",children:i=null}=t,u=r.__rest(t,["isFilled","className","children"]);return o.createElement("div",Object.assign({},u,{className:a.css(c.default.stackItem,e&&c.default.modifiers.fill,n)}),i)},e.StackItem.displayName="StackItem"},518:function(t,e,n){var r=n(7),o=n(519);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[t.i,o,""]]);var c={insert:"head",singleton:!1};r(o,c);t.exports=o.locals||{}},519:function(t,e,n){(e=n(8)(!1)).push([t.i,".pf-l-stack {\n  --pf-l-stack--m-gutter--MarginBottom: var(--pf-global--gutter);\n  display: flex;\n  flex-direction: column;\n  height: 100%; }\n\n.pf-l-stack__item.pf-m-fill {\n  flex-grow: 1; }\n\n.pf-l-stack.pf-m-gutter > *:not(:last-child) {\n  margin-bottom: var(--pf-l-stack--m-gutter--MarginBottom); }\n",""]),t.exports=e},542:function(t,e){t.exports=function(t,e,n){for(var r=n-1,o=t.length;++r<o;)if(t[r]===e)return r;return-1}},628:function(t,e,n){var r=n(130);t.exports=function(){if(!arguments.length)return[];var t=arguments[0];return r(t)?t:[t]}},629:function(t,e,n){var r=n(542);t.exports=function(t,e){return!!(null==t?0:t.length)&&r(t,e,0)>-1}},630:function(t,e){t.exports=function(t){return null!=t&&"object"==typeof t}},730:function(t,e,n){var r=n(731),o=n(736),c=n(743),a=n(748),i=c((function(t,e){return a(t)?r(t,o(e,1,a,!0)):[]}));t.exports=i},731:function(t,e,n){var r=n(628),o=n(732),c=n(733),a=n(734),i=n(735),u=n(629);t.exports=function(t,e,n,l){var s=-1,f=o,p=!0,m=t.length,d=[],b=e.length;if(!m)return d;n&&(e=a(e,i(n))),l?(f=c,p=!1):e.length>=200&&(f=u,p=!1,e=new r(e));t:for(;++s<m;){var v=t[s],g=null==n?v:n(v);if(v=l||0!==v?v:0,p&&g==g){for(var h=b;h--;)if(e[h]===g)continue t;d.push(v)}else f(e,g,l)||d.push(v)}return d}},732:function(t,e,n){var r=n(542);t.exports=function(t,e){return!!(null==t?0:t.length)&&r(t,e,0)>-1}},733:function(t,e){t.exports=function(t,e,n){for(var r=-1,o=null==t?0:t.length;++r<o;)if(n(e,t[r]))return!0;return!1}},734:function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,o=Array(r);++n<r;)o[n]=e(t[n],n,t);return o}},735:function(t,e){t.exports=function(t){return function(e){return t(e)}}},736:function(t,e,n){var r=n(737),o=n(738);t.exports=function t(e,n,c,a,i){var u=-1,l=e.length;for(c||(c=o),i||(i=[]);++u<l;){var s=e[u];n>0&&c(s)?n>1?t(s,n-1,c,a,i):r(i,s):a||(i[i.length]=s)}return i}},737:function(t,e){t.exports=function(t,e){for(var n=-1,r=e.length,o=t.length;++n<r;)t[o+n]=e[n];return t}},738:function(t,e,n){var r=n(739),o=n(742),c=n(130),a=r?r.isConcatSpreadable:void 0;t.exports=function(t){return c(t)||o(t)||!!(a&&t&&t[a])}},739:function(t,e,n){var r=n(740).Symbol;t.exports=r},740:function(t,e,n){var r=n(741),o="object"==typeof self&&self&&self.Object===Object&&self,c=r||o||Function("return this")();t.exports=c},741:function(t,e,n){(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.exports=n}).call(this,n(53))},742:function(t,e){t.exports=function(){return!1}},743:function(t,e,n){var r=n(744),o=n(745),c=n(747);t.exports=function(t,e){return c(o(t,e,r),t+"")}},744:function(t,e){t.exports=function(t){return t}},745:function(t,e,n){var r=n(746),o=Math.max;t.exports=function(t,e,n){return e=o(void 0===e?t.length-1:e,0),function(){for(var c=arguments,a=-1,i=o(c.length-e,0),u=Array(i);++a<i;)u[a]=c[e+a];a=-1;for(var l=Array(e+1);++a<e;)l[a]=c[a];return l[e]=n(u),r(t,this,l)}}},746:function(t,e){t.exports=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}},747:function(t,e){t.exports=function(t){return t}},748:function(t,e,n){var r=n(749),o=n(630);t.exports=function(t){return o(t)&&r(t)}},749:function(t,e,n){var r=n(750),o=n(753);t.exports=function(t){return null!=t&&o(t.length)&&!r(t)}},750:function(t,e,n){var r=n(751),o=n(752);t.exports=function(t){if(!o(t))return!1;var e=r(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},751:function(t,e){var n=Object.prototype.toString;t.exports=function(t){return n.call(t)}},752:function(t,e){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},753:function(t,e){t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},791:function(t,e,n){"use strict";n.r(e);var r=n(19),o=n.n(r),c=n(1),a=n.n(c),i=n(0),u=n.n(i),l=n(730),s=n.n(l),f=n(12),p=n.n(f),m=n(16),d=n(520),b=n(71),v=n(50),g=n(469),h=n(484),j=n(521),O=n(481),y=n.n(O),w=n(433);function k(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function x(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?k(Object(n),!0).forEach((function(e){a()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var S=function(t,e,n){var r=n.getState().values["initial-workflows"];return{key:r.length,loadOptions:function(){return t.loadOptions.apply(t,arguments).then((function(t){return t.map((function(t){return x(x({},t),r.find((function(e){return e.id===t.value}))?{isDisabled:!0}:{})}))}))}}},_=function(t){return{fields:[{component:y.a.SELECT,name:"new-workflows",label:"",loadOptions:Object(w.a)(t),multi:!0,isSearchable:!0,isClearable:!0,resolveProps:S},{component:"initial-chips",name:"initial-workflows",label:"Current approval processes"}]}},P=n(17),E=n.n(P),N=n(69),M=n(54),D=n(6),F=n(23),R=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=e.map((function(t){return"filter[id][]=".concat(t)})).join("&");return Object(M.a)().get("".concat(D.a,"/workflows?filter[name][contains]=").concat(t,"&").concat(n||"")).then((function(t){return t.data.map((function(t){var e=t.id;return{label:t.name,value:e}}))}))},C=function(t,e,n){var r=t?t.map((function(t){return Object(M.j)().unlinkWorkflow(t,n)})):[],o=e?e.map((function(t){return Object(M.j)().linkWorkflow(t,n)})):[];return Promise.all([].concat(E()(r),E()(o)))},T=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{limit:F.a.limit,offset:F.a.offset},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r="app_name=".concat(t.appName,"&object_type=").concat(t.objectType,"&object_id=").concat(t.objectId),o="&limit=".concat(e.limit,"&offset=").concat(e.offset),c="&filter[name][contains]=".concat(n);return Object(M.a)().get("".concat(D.a,"/workflows?").concat(r).concat(c).concat(o))},I=n(125),W=function(t){return t().i18nReducer.formatMessage},q=(0,n(52).defineMessages)({unlinkNotification:{id:"approval.notifications.unlink",defaultMessage:"{count, number} {count, plural, one {approval process was} other {approval processes were}} unlinked successfully."},linkNotification:{id:"approval.notifications.link",defaultMessage:"{count, number} {count, plural, one {approval process was} other {approval processes were}} linked successfully."},setWorkflow:{id:"approval.workflows.set",defaultMessage:"Select approval processes for <strong>{objectName}</strong>"}}),L=n(74),A=n(73),G=n(472),H=n(52),B=n(126),J=n(88);function K(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function V(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?K(Object(n),!0).forEach((function(e){a()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var U={isFetching:!0},z=function(t,e){switch(e.type){case"setFetching":return V(V({},t),{},{isFetching:e.payload});default:return t}},Q=function(t){var e=t.objectType,n=t.removeSearch,r=t.keepHash,c=t.querySelector,a=t.pushParam,l=t.objectName,f=void 0===l?function(){return e}:l,p=t.onClose,O=Object(J.a)(),y=Object(i.useRef)(O(Object(H.defineMessage)({id:"workflows.modal.title",defaultMessage:"Set approval process"}))).current,w=Object(i.useReducer)(z,U),k=o()(w,2),x=k[0].isFetching,S=k[1],P=Object(m.useSelector)((function(t){return t.approvalReducer.resolvedWorkflows})),E=P.data,M=P.meta,K=Object(m.useSelector)((function(t){return t.portfolioReducer.isLoading})),V=Object(m.useDispatch)(),Q=Object(G.a)({removeSearch:n,keepHash:r}),X=Object(A.a)([c]),Y=o()(X,1)[0];Object(i.useEffect)((function(){V(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{limit:F.a.limit,offset:F.a.offset},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return{type:N.a.RESOLVE_WORKFLOWS,payload:T(t,e,n)}}({objectType:e,appName:D.b[e],objectId:Y[c]},M)).then((function(){return S({type:"setFetching",payload:!1})}))}),[]);var Z=function(){p&&p(),Q.push(a)},$=K||x;return u.a.createElement(d.Modal,{title:y,isOpen:!0,onClose:Z,variant:"small"},$&&u.a.createElement(L.j,null),!$&&u.a.createElement(g.Stack,{hasGutter:!0},u.a.createElement(h.StackItem,null,u.a.createElement(b.TextContent,null,u.a.createElement(v.Text,null,O(q.setWorkflow,{strong:function(t){return u.a.createElement("strong",null,t)},objectName:f(Y[c])})))),u.a.createElement(h.StackItem,null,u.a.createElement(j.c,{subscription:{values:!0},initialValues:{"initial-workflows":E},onSubmit:function(t){Z();var n,r,o,a=E.filter((function(e){var n=e.id;return!t["initial-workflows"].find((function(t){return n===t.id}))})).map((function(t){return t.id})),i=s()(t["new-workflows"],a),u=s()(a,t["new-workflows"]),l=i.filter((function(t){return!E.find((function(e){return e.id===t}))})),f=u.filter((function(t){return E.find((function(e){return e.id===t}))}));(f.length>0||l.length>0)&&V((n=f,r=l,o={object_type:e,app_name:D.b[e],object_id:Y[c]},function(t,e){var c=W(e);return t({type:N.a.UPDATE_WORKFLOWS,payload:C(n,r,o).then((function(){return t(Object(I.addNotification)({variant:"success",title:"Success updating approval process",dismissable:!0,description:"".concat(n.length>0?c(q.unlinkNotification,{count:n.length}):"","\n          ").concat(r.length>0?c(q.linkNotification,{count:r.length}):"")}))}))})}))},onCancel:Z,schema:_(R),formContainer:"modal",templateProps:{submitLabel:O(B.a.save),disableSubmit:["pristine"]}}))))};Q.propTypes={pushParam:p.a.oneOfType([p.a.string,p.a.shape({pathname:p.a.string.isRequired,search:p.a.string})]).isRequired,objectType:p.a.string.isRequired,objectName:p.a.func,removeSearch:p.a.bool,querySelector:p.a.oneOf(["portfolio","platform","inventory","portfolio-item"]).isRequired,keepHash:p.a.bool,onClose:p.a.func},Q.defaultProps={keepHash:!1};e.default=Q}}]);
//# sourceMappingURL=../sourcemaps/lib~edit-approval-workflow~31ecd969.js.map