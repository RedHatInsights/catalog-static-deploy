"use strict";(self.webpackChunkcatalog=self.webpackChunkcatalog||[]).push([[1608],{11608:(t,n,e)=>{e.d(n,{bJ:()=>_,Vx:()=>g,dw:()=>m,x6:()=>v,dB:()=>b,TP:()=>E});var r=e(90060),i=e(15654),o=e(35388),s=e(7247),u=function(){return(u=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var i in n=arguments[e])Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t}).apply(this,arguments)},a=(0,i.Hx)(),c=(0,i.mY)().post,f=function(t){return a.patch(o.np+"/sources/"+t+"/refresh")},p=function(t,n,e){var r=n?"&filter[name][contains_i]="+n:"";return t?a.get(o.np+"/sources/"+t+"/service_offerings?filter[archived_at][nil]"+r+(e?"&limit="+e.limit+"&offset="+e.offset:"")):a.get(o.np+"/service_offerings")},l=function(t,n,e){return void 0===n&&(n=""),void 0===e&&(e=s.he),t?a.get(o.np+"/sources/"+t+"/service_inventories?filter[name][contains_i]="+n+(e?"&limit="+e.limit+"&offset="+e.offset:"")):a.get(o.np+"/service_inventories?limit="+e.limit+"&offset="+e.offset)},h=function(t,n){return Promise.all([a.get(o.np+"/service_offerings/"+t),a.get(o.rF+"/sources/"+n).then((function(t){return a.get(o.rF+"/source_types/"+t.source_type_id).then((function(n){var e=n.icon_url;return u(u({},t),{icon_url:e})}))}))]).then((function(t){return{service:t[0],source:t[1]}}))},d=e(83215),y=function(){return(y=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var i in n=arguments[e])Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t}).apply(this,arguments)},m=function(){return function(t){return t({type:r.mH+"_PENDING"}),c(o.rF+"/graphql",{query:'\nquery {\n  application_types (filter: { name: "/insights/platform/catalog" }) {\n    id\n    name\n    sources {\n      id\n      name\n      source_type_id\n    }\n  }\n}'}).then((function(t){return t.data.application_types})).then((function(t){var n,e=t[0].sources;return(n=e.map((function(t){return t.id})),a.get(o.np+"/sources?limit="+(n.length||s.he.limit)+(n.length?"&":"")+n.map((function(t){return"filter[id][]="+t})).join("&"))).then((function(t){return e.map((function(n){return u(u({},n),t.data.find((function(t){return t.id===n.id})))}))}))})).then((function(n){return t({type:r.mH+"_FULFILLED",payload:n})})).catch((function(n){return t({type:r.mH+"_REJECTED",payload:n})}))}},g=function(t,n,e){return{type:r.d6,payload:p(t,n,e),meta:y({platformId:t,filter:n},e)}},v=function(t){return{type:r.UZ,payload:(n=t,a.get(o.np+"/sources/"+n))};var n},_=function(t,n,e){return{type:r.c_,payload:l(t,n,e)}},b=function(t,n){return{type:r.m6,payload:h(t,n)}},E=function(t){return function(n){return n({type:r.$f,payload:f(t).then((function(){return n((0,d.wN)({variant:"success",title:"Success starting the platform refresh",dismissable:!0,description:"The platform refresh started successfully"}))})).catch((function(t){429===t.status?n((0,d.wN)({variant:"info",title:"Platform refresh in progress",dismissable:!0,description:"Platform refresh already running."})):n({type:r.$f+"_REJECTED",payload:t})}))})}}}}]);
//# sourceMappingURL=../sourcemaps/1608.5d71e3c9d26894a20606.js.map