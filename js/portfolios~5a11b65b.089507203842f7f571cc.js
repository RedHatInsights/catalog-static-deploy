(window.webpackJsonp=window.webpackJsonp||[]).push([[59],{629:function(e,t,r){"use strict";var n=r(23),a=Object(n.b)({noItems:{id:"common.filtering.noItems",defaultMessage:"No items found"},filterByProduct:{id:"common.filtering.filterByProduct",defaultMessage:"Filter by product"},noResults:{id:"common.filtering.noResults",defaultMessage:"No results found"},noResultsDescription:{id:"common.filtering.noResultsDescription",defaultMessage:"No results match the filter criteria. Remove all filters or clear all filters to show results."},clearFilters:{id:"common.filtering.clear-filters",defaultMessage:"Clear all filters"},noProducts:{id:"common.filtering.no-products",defaultMessage:"No products yet"},noRecords:{id:"commonMessages.noRecords",defaultMessage:"No records"},filterByTitle:{id:"tableToolbar.filterByTitle",defaultMessage:"Filter by {title}"},noResultsFound:{id:"tableToolbar.noResultsFound",defaultMessage:"No results found"},noResult:{id:"tableToolbar.noResult",defaultMessage:"No {results}"},unknown:{id:"commonMessages.unknown",defaultMessage:"Unknown"}});t.a=a},657:function(e,t,r){"use strict";r.d(t,"a",(function(){return d}));var n=r(0),a=r.n(n),o=r(721),i=r(722),l=r(340),c=r(162),s=r(723),u=r(754),p=r(145),f=r(626);t.b=function(e){var t=e.title,r=e.Icon,n=e.description,p=e.PrimaryAction,f=e.renderDescription,d=void 0===f?function(){return null}:f;return a.a.createElement("div",{className:"pf-u-mt-xl"},a.a.createElement(o.a,{className:"pf-u-ml-auto pf-u-mr-auto"},a.a.createElement(i.a,{icon:r}),a.a.createElement(l.a,null,a.a.createElement(c.a,{component:c.b.h1},t)),a.a.createElement(s.a,null,n,d()),a.a.createElement(u.a,null,p&&a.a.createElement(p,null))))};var d=function(e){var t=e.url,r=e.label,n=e.hasPermission,o=void 0!==n&&n,i=e.id;return o?a.a.createElement(f.a,{id:i,pathname:t,preserveSearch:!0},a.a.createElement(p.a,{variant:"primary"},r)):null}},681:function(e,t,r){"use strict";r.d(t,"a",(function(){return d})),r.d(t,"b",(function(){return m}));var n,a,o=r(0),i=r.n(o),l=r(21),c=r(371),s=r(602),u=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},p=function(){return(p=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},f=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r},d=Object(l.b)(c.a)(n||(n=u(["\n  height: 330px;\n  position: relative;\n"],["\n  height: 330px;\n  position: relative;\n"]))),m=Object(l.b)((function(e){e.isDisabled;var t=f(e,["isDisabled"]);return i.a.createElement(s.a,p({},t))}))(a||(a=u(["\n  position: relative;\n  ::after {\n    display: ",";\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    content: '';\n    background-color: rgba(210, 210, 210, 0.5);\n    z-index: 1;\n    cursor: progress;\n  }\n"],["\n  position: relative;\n  ::after {\n    display: ",";\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    content: '';\n    background-color: rgba(210, 210, 210, 0.5);\n    z-index: 1;\n    cursor: progress;\n  }\n"])),(function(e){return e.isDisabled?"block":"none"}))},689:function(e,t,r){"use strict";var n=r(0),a=r.n(n),o=r(214),i=r(162),l=r(601),c=r(102),s=r(629),u=r(20),p=function(){var e=Object(u.a)();return a.a.createElement("div",null,a.a.createElement(i.a,{component:i.b.h1},e(s.a.noItems)))};t.a=function(e){var t=e.isLoading,r=e.items,i=e.renderEmptyState;return a.a.createElement(n.Fragment,null,t?a.a.createElement(c.b,null):0===(null==r?void 0:r.length)?i?i():a.a.createElement(p,null):a.a.createElement(o.Section,{type:"content"},a.a.createElement(l.a,{hasGutter:!0,className:"content-gallery"},r)))}},690:function(e,t,r){"use strict";var n=r(0),a=r.n(n),o=r(761),i=function(){return(i=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},l=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r};t.a=function(e){var t=e.children,r=e.className,n=l(e,["children","className"]);return a.a.createElement("div",i({className:Object(o.a)("pf-u-p-lg pf-u-pt-md pf-u-pb-md global-primary-background pf-u-mt-auto",r)},n),t)}},724:function(e,t,r){"use strict";var n,a=r(0),o=r.n(a),i=r(21),l=r(725),c=r(224),s=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},u=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r},p=i.b.div(n||(n=s(["\n  overflow: hidden;\n"],["\n  overflow: hidden;\n"])));t.a=function(e){var t=e.toDisplay,r=void 0===t?[]:t,n=u(e,["toDisplay"]);return o.a.createElement(a.Fragment,null,r.map((function(e){return o.a.createElement(l.a,{key:"tcard-prop-"+e,lines:3,ellipsis:o.a.createElement(c.a,{content:o.a.createElement("div",null,n[e])},o.a.createElement("span",null,"..."))},o.a.createElement(p,{key:"card-prop-"+e},n[e]))})))}},726:function(e,t,r){"use strict";var n,a=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},o=r(21).b.div(n||(n=a(["\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  overflow: hidden;\n"],["\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  overflow: hidden;\n"])));t.a=o},727:function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));var n,a=r(21),o=r(603),i=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},l=Object(a.b)(o.a)(n||(n=i(["\n  height: 230px;\n  overflow: hidden;\n  padding: 0 !important;\n  margin: 0 24px 16px;\n"],["\n  height: 230px;\n  overflow: hidden;\n  padding: 0 !important;\n  margin: 0 24px 16px;\n"])))},824:function(e,t,r){"use strict";var n=r(0);t.a=function(){var e=Object(n.useRef)(!1);return Object(n.useEffect)((function(){return e.current=!0,function(){return e.current=!1}}),[]),e}},942:function(e,t,r){"use strict";r.r(t);var n,a,o=r(644),i=r.n(o),l=r(120),c=r.n(l),s=r(167),u=r.n(s),p=r(0),f=r.n(p),d=r(22),m=r(99),b=r(630),y=r.n(b),h=r(763),g=r.n(h),v=r(164),O=r(121),j=r(689),E=r(32),w=r(134),P=r(724),D=r(808),F=r(890),k=r(632),R=r(871),S=r(822),C=r(340),x=r(162),_=r(823),N=r(875),I=r(218),T=r(78),q=r(609),M=r(597),B=r(929),A=r(726),L=r(21),V=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},H=Object(L.b)(q.a)(n||(n=V(["\n  max-width: calc(100% - 80px);\n  width: calc(100% - 80px);\n"],["\n  max-width: calc(100% - 80px);\n  width: calc(100% - 80px);\n"]))),U=Object(L.b)(M.a)(a||(a=V(["\n  width: 100%;\n"],["\n  width: 100%;\n"]))),W=function(e){var t=e.id,r=e.to,n=e.portfolioName,a=e.portfolio_items,o=e.headerActions,i=void 0===o?[]:o;return f.a.createElement(U,null,f.a.createElement(H,null,f.a.createElement(C.a,null,f.a.createElement(T.a,{to:r,id:"portfolio-link-"+t},f.a.createElement(x.a,{title:n,className:"pf-u-mb-0",component:x.b.h3},f.a.createElement(A.a,null,n))))),f.a.createElement(B.a,{isRead:!0},a),f.a.createElement("div",{onClick:function(e){return e.preventDefault()}},i))},z=r(626),J=r(10),G=r(681),K=r(727),Q=r(136),X=r(119),Y=r(20),Z=r(44),$=function(){return($=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},ee=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r},te=["description"],re=function(e){var t=e.portfolioId,r=e.handleCopyPortfolio,n=e.canLinkOrderProcesses,a=e.userCapabilities,o=a.share,i=a.copy,l=a.unshare,c=a.update,s=a.destroy,u=a.set_approval,d=Object(Y.a)(),m=Object(p.useState)(!1),b=m[0],y=m[1],h=[];if((o||l)&&h.push(f.a.createElement(D.a,{key:"share-portfolio-action",id:"share-portfolio-action",component:f.a.createElement(z.a,{searchParams:{portfolio:t},pathname:J.B,preserveHash:!0},d(Q.a.share))})),i&&h.push(f.a.createElement(D.a,{key:"copy-portfolio-action",id:"copy-portfolio-action",onClick:function(){return r(t)}},d(Q.a.copy))),u&&h.push(f.a.createElement(D.a,{key:"workflow-portfolio-action",id:"workflow-portfolio-action",component:f.a.createElement(z.a,{searchParams:{portfolio:t},pathname:J.f,preserveHash:!0},d(Q.a.setApproval))})),c&&n){var g=d(Z.a.setOrderProcess);h.push(f.a.createElement(D.a,{"aria-label":g,key:"attach-order-processes",id:"attach-order-processes",component:f.a.createElement(z.a,{preserveSearch:!0,pathname:J.d,searchParams:{portfolio:t}},g),role:"link"}))}return c&&h.push(f.a.createElement(D.a,{key:"edit-portfolio-action",id:"edit-portfolio-action",component:f.a.createElement(z.a,{searchParams:{portfolio:t},pathname:J.e,preserveHash:!0},d(Q.a.edit))})),s&&h.push(f.a.createElement(D.a,{key:"remove-portfolio-action",id:"remove-portfolio-action",component:f.a.createElement(z.a,{searchParams:{portfolio:t},pathname:J.A,preserveHash:!0},d(Q.a.delete))})),0===h.length?null:f.a.createElement(F.a,{key:"portfolio-dropdown",id:"portfolio-"+t+"-dropdown",isOpen:b,isPlain:!0,onSelect:function(){return y(!1)},position:k.d.right,toggle:f.a.createElement(R.a,{id:"portfolio-"+t+"-toggle",onToggle:function(e){return y(e)}}),dropdownItems:h})},ne=function(e){var t=e.imageUrl,r=e.isDisabled,n=e.name,a=e.id,o=e.handleCopyPortfolio,i=e.metadata,l=i.user_capabilities,c=i.statistics,s=c.shared_groups,u=c.approval_processes,p=c.portfolio_items,d=e.canLinkOrderProcesses,m=ee(e,["imageUrl","isDisabled","name","id","handleCopyPortfolio","metadata","canLinkOrderProcesses"]),b=Object(Y.a)(),y={pathname:J.y,search:"?portfolio="+a};return f.a.createElement(G.b,{isDisabled:r},f.a.createElement(G.a,{ouiaId:"portfolio-"+a},f.a.createElement(S.a,null,f.a.createElement(W,{id:a,to:y,portfolioName:n,portfolio_items:p||0,headerActions:f.a.createElement(re,{portfolioId:a,userCapabilities:l,handleCopyPortfolio:o,canLinkOrderProcesses:d})})),f.a.createElement(K.a,null,f.a.createElement(C.a,{className:"pf-u-mb-md"},f.a.createElement(x.a,{component:x.b.small,className:"pf-u-mb-0"},"Last updated ",f.a.createElement(I.DateFormat,{date:m.updated_at||m.created_at,type:"relative"})),f.a.createElement(x.a,{component:x.b.small},"by ",m.owner)),f.a.createElement(P.a,$({},$({name:n,imageUrl:t},m),{toDisplay:te}))),f.a.createElement(_.a,null,u&&u>0&&f.a.createElement(N.a,{variant:"filled",color:"grey"},b(X.a.approvalProcessSet))," ",s&&s>0&&f.a.createElement(N.a,{variant:"filled",color:"grey"},b(X.a.shared)))))},ae=r(657),oe=r(132),ie=r(649),le=r(690),ce=r(138),se=r(223),ue=r(629),pe=r(54),fe=r(694),de=r(824),me=r(18),be=r.n(me),ye=r(767);function he(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var ge={name:X.a.name,owner:X.a.owner,sort_by:X.a.sortBy},ve={name:X.a.name,owner:X.a.owner,updated_at:X.a.updated,created_at:X.a.created},Oe=function(e){var t=e.filters,r=e.stateDispatch,n=e.debouncedFilter,a=e.initialState,o=e.meta,l=e.filterType,s=e.handleFilterItems,p=e.sortDirection,m=e.handleSort,b=e.fetchPortfoliosWithState,y=e.isFetching,h=e.isFiltering,g=e.canCreate,O=Object(d.useDispatch)(),j=Object(Y.a)();return o.noData?null:f.a.createElement(ye.PrimaryToolbar,i()({},g?{dedicatedAction:f.a.createElement(z.a,{pathname:"/portfolios/add-portfolio"},f.a.createElement(v.Button,{variant:"primary",id:"create-portfolio",ouiaId:"create-portfolio",type:"button"},j(X.a.create)))}:{},{activeFiltersConfig:{filters:Object.entries(t).filter((function(e){var t=c()(e,2)[1];return t&&t.length>0})).map((function(e){var t=c()(e,2),r=t[0],n=t[1];return{category:j(ge[r]),type:r,chips:Array.isArray(n)?n.map((function(e){return{name:e}})):[{name:"sort_by"===r?j(ve[n]):n}]}})),onDelete:function(e,i,l){var s=c()(i,1)[0];if(l)return r({type:"replaceFilterChip",payload:a.filters}),n(a.filters,o,O,(function(e){return r({type:"setFilteringFlag",payload:e})}));var p=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?he(Object(r),!0).forEach((function(t){u()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):he(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t);"state"===s.type?p[s.type]=p[s.type].filter((function(e){return e!==s.chips[0].name})):p[s.type]="",r({type:"replaceFilterChip",payload:p}),n(p,o,O,(function(e){return r({type:"setFilteringFlag",payload:e})}))}},filterConfig:{onChange:function(e,t){return r({type:"setFilterType",payload:t})},value:l,items:[{filterValues:{value:t.name,onChange:function(e,t){return s(t)}},label:j(X.a.name),value:"name"},{filterValues:{value:t.owner,onChange:function(e,t){return s(t)}},label:j(X.a.owner),value:"owner"},{filterValues:{value:t.sort_by||"name",onChange:function(e,t){return s(t)},items:[{label:j(X.a.name),value:"name"},{label:j(X.a.owner),value:"owner"},{label:j(X.a.created),value:"created_at"},{label:j(X.a.updated),value:"updated_at"}]},placeholder:t.sort_by?j(ve[t.sort_by]):j(X.a.name),label:j(X.a.sortBy),value:"sort_by",type:"radio"}]},sortByConfig:{direction:p,onSortChange:function(e,t){return m(t)}},pagination:o.count>0?f.a.createElement(ie.a,{isDisabled:y||h,meta:o,apiRequest:function(e,r){return O(b(t,r))},isCompact:!0}):void 0}))};Oe.propTypes={filters:be.a.shape({name:be.a.string.isRequired,owner:be.a.string.isRequired,sort_by:be.a.string}).isRequired,stateDispatch:be.a.func.isRequired,debouncedFilter:be.a.func.isRequired,initialState:be.a.shape({filters:be.a.shape(u()({},be.a.string,be.a.any)).isRequired}).isRequired,meta:be.a.object.isRequired,filterType:be.a.string.isRequired,handleFilterItems:be.a.func.isRequired,sortDirection:be.a.string.isRequired,handleSort:be.a.func.isRequired,fetchPortfoliosWithState:be.a.func.isRequired,isFetching:be.a.bool.isRequired,isFiltering:be.a.bool.isRequired,canCreate:be.a.bool};var je=Oe,Ee=r(685);function we(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Pe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?we(Object(r),!0).forEach((function(t){u()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):we(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var De=Object(oe.a)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:E.a,r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;n(!0),r(Object(w.h)(e,t)).then((function(){return n(!1)}))}),1e3),Fe={isOpen:!1,isFetching:!0,isFiltering:!1,filterType:"name",filters:{name:"",owner:"",sort_by:void 0},sortDirection:fe.a.asc},ke=function(e,t){switch(t.type){case"setFetching":return Pe(Pe({},e),{},{isFetching:t.payload});case"setFilterValue":return Pe(Pe({},e),{},{filters:(r=t.payload,n=e.filterType,a=e.filters,Pe(Pe({},a),{},u()({},n,r)))});case"replaceFilterChip":return Pe(Pe({},e),{},{sortDirection:fe.a.asc,filters:t.payload});case"setFilteringFlag":return Pe(Pe({},e),{},{isFiltering:t.payload});case"setFilterType":return Pe(Pe({},e),{},{filterType:t.payload});case"setSortBy":return Pe(Pe({},e),{},{sortDirection:t.payload,filters:e.filters.sort_by?e.filters:Pe(Pe({},e.filters),{},{sort_by:"name"})})}var r,n,a;return e};t.default=function(){var e=Object(Y.a)(),t=Object(se.a)(),r=Object(de.a)(),n=Object(p.useReducer)(ke,Pe(Pe({},Fe),null==t?void 0:t.portfolio)),a=c()(n,2),o=a[0],l=o.isFetching,s=o.isFiltering,b=o.filters,h=o.filterType,E=o.sortDirection,P=a[1],D=Object(d.useSelector)((function(e){return e.portfolioReducer.portfolios})),F=D.data,k=D.meta,R=Object(d.useDispatch)(),S=Object(p.useContext)(ce.a).permissions,C=Object(m.g)();Object(p.useEffect)((function(){R(Object(w.h)(b,Pe(Pe({},k),{},{sortDirection:E}))).then((function(){return P({type:"setFetching",payload:!1})})),Object(O.d)(),insights.chrome.appNavClick({id:"portfolios",secondaryNav:!0})}),[]);var x=function(e){P({type:"setFilterValue",payload:e}),De(Pe(Pe({},b),{},u()({},h,e)),Pe(Pe({},k),{},{offset:0,sortDirection:E}),R,(function(e){return P({type:"setFilteringFlag",payload:e})}))};Object(p.useEffect)((function(){!r||s&&l||x(b[h])}),[E]);var _=function(e){return R(Object(w.c)(e)).then((function(e){var t=e.id;return C.push({pathname:J.y,search:"?portfolio=".concat(t)})}))},N=Object(O.b)(S,["catalog:portfolios:create"]),I=Object(O.b)(S,["catalog:order_processes:link"]),T={PrimaryAction:k.noData?function(){return f.a.createElement(ae.a,{url:J.b,id:"create-portfolio",label:"Create portfolio",hasPermission:N})}:function(){return f.a.createElement(v.Button,{ouiaId:"clear-filter",variant:"link",onClick:function(){return x("")}},e(ue.a.clearFilters))},title:k.noData?e(pe.a.portfoliosNoData):e(ue.a.noResults),description:k.noData?e(pe.a.portfoliosNoDataDescription):e(ue.a.noResultsDescription),Icon:k.noData?g.a:y.a},q=F.map((function(e){return f.a.createElement(ne,i()({key:e.id,ouiaId:"portfolio-".concat(e.id)},e,{canLinkOrderProcesses:I,handleCopyPortfolio:_}))}));return f.a.createElement(p.Fragment,null,f.a.createElement(Ee.b,null,f.a.createElement(Ee.a,{title:e(pe.a.portfoliosTitle)}),f.a.createElement(je,{filters:b,stateDispatch:P,debouncedFilter:De,initialState:Fe,meta:k,filterType:h,handleFilterItems:x,sortDirection:E,handleSort:function(e){return P({type:"setSortBy",payload:e})},fetchPortfoliosWithState:w.h,isFetching:l,isFiltering:s,canCreate:N})),f.a.createElement(j.a,{items:q,isLoading:l||s,renderEmptyState:function(){return f.a.createElement(ae.b,T)}}),k.count>0&&f.a.createElement(le.a,null,f.a.createElement(ie.a,{meta:k,apiRequest:function(e,t){return R(Object(w.h)(b,t))},dropDirection:"up"})))}}}]);
//# sourceMappingURL=../sourcemaps/portfolios~5a11b65b.js.map