"use strict";(self.webpackChunkcatalog=self.webpackChunkcatalog||[]).push([[5824],{5866:(e,t,o)=>{t.gk={name:"AngleLeftIcon",height:512,width:256,svgPath:"M31.7 239l136-136c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9L127.9 256l96.4 96.4c9.4 9.4 9.4 24.6 0 33.9L201.7 409c-9.4 9.4-24.6 9.4-33.9 0l-136-136c-9.5-9.4-9.5-24.6-.1-34z",yOffset:0,xOffset:0},t.fP=o(35183).createIcon(t.gk),t.ZP=t.fP},39173:(e,t,o)=>{o.d(t,{Z:()=>f});var r=o(30624),n=o.n(r),a=o(45697),i=o.n(a),l=o(94184),c=o.n(l),s=o(60485),u=function(e){var t=e.className,o=e.title,r=c()(t);return n().createElement(s.D,{headingLevel:"h1",size:"2xl",className:r,"widget-type":"InsightsPageHeaderTitle"}," ",o," ")};const f=u;u.propTypes={title:i().node.isRequired,className:i().string}},7002:(e,t,o)=>{o.r(t),o.d(t,{default:()=>V});var r=o(29439),n=o(4942),a=o(30624),i=o.n(a),l=o(14494),c=o(334),s=o(45697),u=o.n(s),f=o(63035),p=function(e,t,o){if(o||2===arguments.length)for(var r,n=0,a=t.length;n<a;n++)!r&&n in t||(r||(r=Array.prototype.slice.call(t,0,n)),r[n]=t[n]);return e.concat(r||Array.prototype.slice.call(t))},d=o(11608),m=o(49827),h=o(89231),g=o(77503),y=o(81624),v=o(47786),P=o(52579),I=o(36722),b=o(9456),O=o(94002),R=o(20240),E=o(44058),w=o(66678),k=o(91703),S=o(21976);function Z(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function F(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(o),!0).forEach((function(t){(0,n.Z)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):Z(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var T=function(e){var t=e.fromProducts,o=e.title,r=e.description;return i().createElement(w.Z,{schema:{fields:[{component:k.H.TOP_TOOLBAR,breadcrumbs:!t,key:"portfolio-top-toolbar",fields:[{component:S.Z,key:"back-to-products",hidden:!t},{component:k.H.TOP_TOOLBAR_TITLE,key:"portfolio-toolbar-title",title:o,description:r}]}]}})};T.propTypes={title:u().node,description:u().node,fromProducts:u().bool};var A=(0,a.lazy)((function(){return Promise.all([o.e(2679),o.e(3144),o.e(3059),o.e(5142),o.e(3452)]).then(o.bind(o,3452))})),j=(0,a.lazy)((function(){return Promise.all([o.e(2679),o.e(3144),o.e(5432),o.e(3814)]).then(o.bind(o,81166))})),L=(0,a.lazy)((function(){return Promise.all([o.e(2679),o.e(4026),o.e(7781)]).then(o.bind(o,55251))})),_={selectedItems:[],firstSelectedProduct:void 0,removeInProgress:!1,filterValue:"",copyInProgress:!1,isFetching:!0,isFiltering:!1},C=(0,y.Z)((function(e,t,o,r){o(!0),t(localStorage.getItem("catalog_standalone")?(0,g.cP)(e,r):(0,h.cP)(e,r)).then((function(){return o(!1)}))}),1e3),D=function(e,t){var o,r,n=t.type,a=t.payload,i=void 0===a?{}:a;return{selectItem:F(F({},e),{},{selectedItems:(o=e.selectedItems,r=i.selectedItem,o.includes(r)?p(p([],o.slice(0,o.indexOf(r)),!0),o.slice(o.indexOf(r)+1),!0):p(p([],o,!0),[r],!1)),firstSelectedProduct:i.product||e.firstSelectedProduct}),setRemoveInProgress:F(F({},e),{},{removeInProgress:i}),removeSuccessful:F(F({},e),{},{selectedItems:[],removeInProgress:!1}),setFilterValue:F(F({},e),{},{filterValue:i,isFiltering:!0}),setCopyInProgress:F(F({},e),{},{copyInProgress:i}),setIsFetching:F(F({},e),{},{isFetching:i}),setFilteringFlag:F(F({},e),{},{isFiltering:i})}[n]};const V=function(){var e,t,o,n,s=(0,E.Z)(),u=(0,a.useReducer)(D,F(F({},_),{},{filterValue:(null==s||null===(e=s.portfolioItems)||void 0===e?void 0:e.filter)||""})),p=(0,r.Z)(u,2),y=p[0],w=p[1],k=(0,v.Z)(["portfolio","from-products"]),S=(0,r.Z)(k,1)[0],Z=S.portfolio,V=S["from-products"],z=(0,c.useRouteMatch)(I.hT).url,N=(0,c.useHistory)(),q=(0,l.I0)(),x=(0,R.Z)(),H=(0,l.v9)((function(e){var t=e.portfolioReducer;return{portfolio:t.selectedPortfolio,portfolioItem:t.portfolioItem,meta:t.portfolioItems.meta}})),B=H.portfolio,M=H.portfolioItem,W=H.meta,Y=(0,P.Z)([B,M]),G=function(e){var t,o,r,n;return w({type:"setIsFetching",payload:!0}),Promise.all([q(localStorage.getItem("catalog_standalone")?(0,m.dw)():(0,d.dw)()),q(null!==(t=window)&&void 0!==t&&null!==(o=t.catalog)&&void 0!==o&&o.standalone?(0,g.al)(e):(0,h.al)(e)),q(null!==(r=window)&&void 0!==r&&null!==(n=r.catalog)&&void 0!==n&&n.standalone?(0,g.cP)(e,null==s?void 0:s.portfolioItems):(0,h.cP)(e,null==s?void 0:s.portfolioItems))]).then((function(e){return x.current&&w({type:"setIsFetching",payload:!1}),e})).catch((function(){return w({type:"setIsFetching",payload:!1})}))};(0,a.useEffect)((function(){return G(Z),(0,f.k3)(),function(){Y(),q(localStorage.getItem("catalog_standalone")?(0,g.So)():(0,h.So)())}}),[]),(0,a.useEffect)((function(){!0!==x.current||y.isFetching||N.location.pathname!==I.hT||(G(Z),(0,f.k3)())}),[Z,N.location.pathname]);var Q={portfolioRoute:z,addProductsRoute:"".concat(z,"/add-products"),editPortfolioRoute:"".concat(z,"/edit-portfolio"),removePortfolioRoute:"".concat(z,"/remove-portfolio"),sharePortfolioRoute:"".concat(z,"/share-portfolio"),workflowPortfolioRoute:"".concat(z,"/edit-workflow"),portfolioItemRoute:"".concat(z,"/portfolio-item")};return!1===(null===(t=B.metadata)||void 0===t||null===(o=t.user_capabilities)||void 0===o?void 0:o.show)?i().createElement(b.M,null):i().createElement(a.Suspense,{fallback:i().createElement(T,{fromProducts:"true"===V,title:B.name,description:B.description})},i().createElement(c.Switch,null,i().createElement(O.Z,{path:Q.addProductsRoute,userCapabilities:null===(n=B.metadata)||void 0===n?void 0:n.user_capabilities,requiredCapabilities:"update"},i().createElement(L,{portfolioRoute:Q.portfolioRoute})),i().createElement(c.Route,{path:Q.portfolioItemRoute},i().createElement(j,{portfolioLoaded:!(null!=y&&y.isFetching)})),i().createElement(c.Route,{path:Q.portfolioRoute},i().createElement(A,{routes:Q,fromProducts:"true"===V,handleFilterChange:function(e){w({type:"setFilterValue",payload:e}),C(Z,q,(function(e){return w({type:"setFilteringFlag",payload:e})}),F(F({},W),{},{offset:0,filter:e}))},removeProducts:function(e){return function(e){w({type:"setRemoveInProgress",payload:!0}),q(localStorage.getItem("catalog_standalone")?(0,g.qy)(e,B.name,y.firstSelectedProduct):(0,h.qy)(e,B.name,y.firstSelectedProduct)).then((function(){return w({type:"removeSucessfull"})})).catch((function(){return w({type:"setRemoveInProgress",payload:!1})}))}(e)},copyPortfolio:function(){return w({type:"setCopyInProgress",payload:!0}),q(localStorage.getItem("catalog_standalone")?(0,g.Yh)(Z):(0,h.Yh)(Z)).then((function(e){var t=e.id;return N.push({pathname:I.hT,search:"?portfolio=".concat(t)})})).then((function(){return w({type:"setCopyInProgress",payload:!1})})).then((function(){return q(localStorage.getItem("catalog_standalone")?g.eV:h.eV)})).catch((function(){return w({type:"setCopyInProgress",payload:!1})}))},state:y,stateDispatch:w}))))}},20240:(e,t,o)=>{o.d(t,{Z:()=>n});var r=o(30624);const n=function(){var e=(0,r.useRef)(!1);return(0,r.useEffect)((function(){return e.current=!0,function(){return e.current=!1}}),[]),e}},21976:(e,t,o)=>{o.d(t,{Z:()=>u});var r=o(30624),n=o.n(r),a=o(65832),i=o(5866),l=o(64466),c=o(20697),s=o(23349);const u=function(){var e=(0,s.Z)();return n().createElement("div",{className:"pf-u-mb-md"},n().createElement(i.ZP,{className:"pf-u-mr-sm"}),n().createElement(a.Button,{variant:"link",ouiaId:"back-to-products",component:function(){return n().createElement(c.Z,{pathname:"/products"},e(l.Z.backToProducts))}}))}},52579:(e,t,o)=>{o.d(t,{Z:()=>g});var r,n,a=o(30624),i=o(334),l=o(14494),c=o(90060),s=o(36722),u=(s.oQ,{"portfolio-item":["source","portfolio"],"edit-survey":["source","portfolio","portfolio-item"]}),f=((r={})[s.hT]=function(e){return e().portfolioReducer.selectedPortfolio.name},r[s.YJ]=function(e){return e().portfolioReducer.portfolioItem.portfolioItem.name},r[s.PC]=function(){return"Edit survey"},r[s.kp]=function(){return"Add products"},r[s.AG]=function(e){return e().platformReducer.selectedPlatform.name},r[s.rg]=function(e){return e().platformReducer.serviceOffering.service.name},r[s.A5]=function(e){var t=e().orderReducer.orderDetail,o=t.portfolioItem,r=t.order;return o.name+" # "+r.id},r[s.Kf]=function(){return"Edit product"},r),p=((n={})[s.hT]={pathname:s.oQ,title:"Portfolios",searchParams:{}},n[s.AG]={pathname:s.gw,title:"Platforms",searchParams:{}},n[s.A5]={pathname:s.Xr,title:"Orders",searchParams:{}},n),d=function(){return(d=Object.assign||function(e){for(var t,o=1,r=arguments.length;o<r;o++)for(var n in t=arguments[o])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},m=function(e,t,o){if(o||2===arguments.length)for(var r,n=0,a=t.length;n<a;n++)!r&&n in t||(r||(r=Array.prototype.slice.call(t,0,n)),r[n]=t[n]);return e.concat(r||Array.prototype.slice.call(t))},h=function(e,t){return void 0===e&&(e=""),void 0===t&&(t={}),function(o,r){if(0===e.length)return o({type:c.EL,payload:[]});var n=[];"/portfolios/portfolio"===e&&n.push("/portfolios"),e.startsWith("/portfolios/portfolio/portfolio-item")&&(n[0]="/portfolios",n[1]="/portfolio",e.startsWith("/portfolios/portfolio/portfolio-item/")&&(n[2]="/portfolio-item")),e.startsWith("/platforms/platform")&&(n[0]="/platforms");var a=(e=e.replace(n[0],"")).replace(/^\//,"").split("/").reduce((function(e,o,a){var i,l,c=""+(a>0&&e[a-1]?e[a-1].pathname:"")+n[a]+"/"+o,s=f[c];if(!s)return e;var h=d(d({},a>0&&(null===(l=e[a-1])||void 0===l?void 0:l.searchParams)),t[o]?((i={})[o]=t[o],i):{});u[o]&&u[o].forEach((function(e){h[e]=t[e]})),p[c]&&(e=[p[c]]);var g=s(r);return g?m(m([],e,!0),[{pathname:c,searchParams:h,title:g}],!1):e}),[]);return a.length>0&&p[a[0].pathname]&&(a=m([p[a[0].pathname]],a,!0)),o({type:c.EL,payload:a})}};const g=function(e){void 0===e&&(e=[]);var t=(0,l.I0)(),o=(0,i.useLocation)(),r=o.pathname,n=o.search;if(0===e.length)return t(h("",{}));var c=new URLSearchParams(n),s={};return c.forEach((function(e,t){s[t]=e})),(0,a.useEffect)((function(){t(h(r,s))}),function(e,t,o){if(o||2===arguments.length)for(var r,n=0,a=t.length;n<a;n++)!r&&n in t||(r||(r=Array.prototype.slice.call(t,0,n)),r[n]=t[n]);return e.concat(r||Array.prototype.slice.call(t))}([r],e,!0)),function(){return t(h("",{}))}}}}]);
//# sourceMappingURL=../sourcemaps/portfolio.e9cdce32a4e0b59ce7dbbd9c90a10d53.js.map