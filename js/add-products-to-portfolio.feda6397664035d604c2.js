"use strict";(self.webpackChunkcatalog=self.webpackChunkcatalog||[]).push([[7781],{8755:(e,t,n)=>{t._t={name:"FilterIcon",height:512,width:512,svgPath:"M487.976 0H24.028C2.71 0-8.047 25.866 7.058 40.971L192 225.941V432c0 7.831 3.821 15.17 10.237 19.662l80 55.98C298.02 518.69 320 507.493 320 487.98V225.941l184.947-184.97C520.021 25.896 509.338 0 487.976 0z",yOffset:0,xOffset:0},t.k1=n(35183).createIcon(t._t),t.ZP=t.k1},55251:(e,t,n)=>{n.r(t),n.d(t,{default:()=>ee});var r=n(93433),o=n(29439),i=n(4942),a=n(87462),c=n(30624),l=n.n(c),s=n(45697),p=n.n(s),u=n(45987),f=n(48794),d=n(8755),m=n(59837),y=n(33188),g=n(97881),h=n(64466),O=n(23349),v=["platform"],b=function(e){var t=e.platform,n=(0,O.Z)();return l().createElement(y.Z,{Icon:t?f.ZP:d.ZP,title:n(t?h.Z.addProducstFilterTitle:h.Z.addProducstPlatformTitle),description:n(t?g.Z.noResultsDescription:h.Z.addProducstPlatformDescription)})};b.propTypes={platform:p().any};var P=function(e){var t=e.platform,n=(0,u.Z)(e,v);return l().createElement(m.Z,(0,a.Z)({editMode:!0},n,{renderEmptyState:function(){return l().createElement(b,{platform:t})}}))};P.propTypes={checkedItems:p().arrayOf(p().string),platform:p().any},P.defaultProps={checkedItems:[]};const w=P;var j=n(66678),E=n(7247),Z=n(44056),k=n(91703),S=n(56824),T=n(28359),D=n(18446),F=n.n(D),V=function(){return(V=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},I=function(e){var t=e.onChange,n=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["onChange"]),r=(0,c.useState)(void 0),o=r[0],i=r[1];return l().createElement("div",{key:"filter-select",id:"filter-select",className:"filter-select"},l().createElement(T.M,V({isDisabled:!n.options||0===n.options.length,name:"filter-select",simpleValue:!1,onChange:function(e){t&&t(e||o),i(e||o)},value:o},n)))};I.propTypes={options:p().array,onChange:p().func.isRequired};const R=(0,c.memo)(I,(function(e,t){return F()(e.options,t.options)}));var C=n(68212),_=n(77172);function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const H=function(e){var t=e.options,n=e.isFetching,r=e.searchValue,o=e.portfolioName,i=e.itemsSelected,a=e.onOptionSelect,c=e.onFilterChange,l=e.portfolioRoute,s=e.onClickAddToPortfolio,p=e.meta,u=e.platformId,f=e.fetchPlatformItems;return{fields:[{component:k.H.TOP_TOOLBAR,key:"add-products-toolbar",fields:[{component:k.H.TOP_TOOLBAR_TITLE,title:"Add products: ".concat(o),key:"add-products-title"},{component:k.H.LEVEL,key:"add-products-actions",fields:[{component:k.H.TOOLBAR,key:"add-products-actions-toolbar",fields:[{component:k.H.TOOLBAR_GROUP,key:"products-filter-group",fields:[{component:R,key:"select-platforms",id:"products-platform-select",isMulti:!1,isSearchable:!0,placeholder:"Filter by Platform",options:t,onChange:a},{component:k.H.FILTER_TOOLBAR_ITEM,key:"filter-products-input",onFilterChange:c,searchValue:r,isDisabled:!u,placeholder:"Filter products"}]},L({groupName:"cancel-group-item"},(0,S.g)({key:"add-products-cancel-button",pathname:l,variant:"link","aria-label":"Cancel Add products to Portfolio",preserveSearch:!0,title:"Cancel"})),{component:k.H.TOOLBAR_ITEM,key:"add-group-item",fields:[{key:"portfolio-items-add-group",component:C.Z,variant:"primary","aria-label":"Add products to Portfolio",title:"Add",type:"button",onClick:s,isDisabled:!i||n,showSpinner:n,children:"Add",id:"add-products-to-portfolio"}]}]},{component:k.H.LEVEL_ITEM,key:"pagination-item",fields:p?[{component:_.Z,key:"add-products-pagination",meta:p,apiProps:u,apiRequest:f,isCompact:!0}]:[]}]}]}]}};var A=n(11608),N=n(49827),B=n(89231),M=n(77503),q=n(74798),z=n(14494),J=n(92183),U=n(81624);function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return e.map((function(e){return l().createElement(Z.Z,(0,a.Z)({key:e.id},e,{editMode:!0,onToggleItemSelect:function(){return t(e.id)},checked:n.includes(e.id)}))}))},W={filterValue:"",isFetching:!1,isFiltering:!1},Y=function(e,t){switch(t.type){case"setFetching":return $($({},e),{},{isFetching:t.payload});case"setFilterValue":return $($({},e),{},{filterValue:t.payload});case"setFilteringFlag":return $($({},e),{},{isFiltering:t.payload})}return e},Q=(0,U.Z)((function(e,t,n,r){var o,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:E.he;r(!0),n(null!==(o=window.catalog)&&void 0!==o&&o.standalone?(0,N.Vx)(e,t,$($({},i),{},{filter:t})):(0,A.Vx)(e,t,$($({},i),{},{filter:t}))).then((function(){return r(!1)}))}),1e3),X=function(e){var t,n=e.portfolioRoute,i=(0,c.useState)(void 0),a=(0,o.Z)(i,2),s=a[0],p=a[1],u=(0,c.useState)([]),f=(0,o.Z)(u,2),d=f[0],m=f[1],y=(0,c.useReducer)(Y,W),g=(0,o.Z)(y,2),h=g[0],O=h.filterValue,v=h.isFetching,b=g[1],P=(0,q.Z)().push,Z=(0,z.I0)(),k=(0,z.v9)((function(e){var t=e.portfolioReducer.selectedPortfolio,n=e.platformReducer;return{platforms:n.platforms,platformItems:n.platformItems,isLoading:n.isPlatformDataLoading,portfolio:t}})),S=k.portfolio,T=k.platforms,D=k.platformItems,F=k.isLoading;(0,c.useEffect)((function(){var e;Z(null!==(e=window.catalog)&&void 0!==e&&e.standalone?(0,N.dw)():(0,A.dw)())}),[]);var V=function(){var e;return s&&D[s.id]?null!==(e=window.catalog)&&void 0!==e&&e.standalone?D[s.id].results:D[s.id].data:[]},I=s&&D[s.id]&&(null!==(t=window.catalog)&&void 0!==t&&t.standalone?D[s.id].meta:{count:D[s.id].count}),R=T.results&&T.results.length>0?T.results.map((function(e){return{value:e.id,label:e.name,id:e.id}})):[];return l().createElement(c.Fragment,null,l().createElement(j.Z,{schema:H({options:R,isFetching:v,portfolioName:S&&S.name||"",itemsSelected:d.length>0,onOptionSelect:function(e){var t;p(e),Z(null!==(t=window.catalog)&&void 0!==t&&t.standalone?(0,N.Vx)(e.id,O,E.he):(0,A.Vx)(e.id,O,E.he))},onFilterChange:function(e){return function(e){b({type:"setFilterValue",payload:e}),Q(s.id,e,Z,(function(e){return b({type:"setFilteringFlag",payload:e})}),$($({},I),{},{offset:0}))}(e)},portfolioRoute:n,onClickAddToPortfolio:function(){var e;return Z({type:"setFetching",payload:!0}),Z(null!==(e=window.catalog)&&void 0!==e&&e.standalone?(0,M.Zm)(S.id,V().filter((function(e){return d.includes(e.id)}))):(0,B.Zm)(S.id,d)).then((function(){return Z({type:"setFetching",payload:!1})})).then((function(){return P({pathname:n,search:"?portfolio=".concat(S.id)})})).then((function(){var e;return Z(null!==(e=window.catalog)&&void 0!==e&&e.standalone?(0,M.cP)(S.id):(0,B.cP)(S.id))})).catch((function(){return Z({type:"setFetching",payload:!1})}))},meta:I,platformId:s&&s.id,searchValue:O,fetchPlatformItems:function(e,t){var n;return Z(null!==(n=window.catalog)&&void 0!==n&&n.standalone?(0,N.Vx)(e,O,t):(0,A.Vx)(e,O,t))}})}),l().createElement(w,{platform:!!s,checkedItems:d,isLoading:F,items:K(V(),(function(e){return m(function(e){var t=d.indexOf(e);return t>-1?[].concat((0,r.Z)(d.slice(0,t)),(0,r.Z)(d.slice(t+1))):[].concat((0,r.Z)(d),[e])}(e))}),d)}),I&&I.count>0&&l().createElement(J.Z,null,l().createElement(_.Z,{meta:I,apiProps:s&&s.id,apiRequest:function(e,t){var n;return null!==(n=window.catalog)&&void 0!==n&&n.standalone?(0,N.Vx)(e,O,t):(0,A.Vx)(e,O,t)},dropDirection:"up"})))};X.propTypes={portfolioRoute:p().string.isRequired};const ee=X},56824:(e,t,n)=>{n.d(t,{g:()=>s});var r=n(4942),o=n(45987),i=n(91703),a=["pathname","preserveSearch","id"];function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var s=function(e){var t=e.pathname,n=e.preserveSearch,r=e.id,c=(0,o.Z)(e,a);return{component:i.H.TOOLBAR_ITEM,key:"".concat(c.key,"/button-link"),fields:[{component:i.H.LINK,pathname:t,preserveSearch:n,key:"".concat(c.key,"/button-link"),isDisabled:c.isDisabled,id:r,fields:[l({component:i.H.BUTTON},c)]}]}}},68212:(e,t,n)=>{n.d(t,{Z:()=>d});var r=n(30624),o=n.n(r),i=n(29163),a=n(56976),c=n(67463),l=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},s=function(){return(s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},p=(0,i.ZP)(a.Button)(m||(m=l(["\n  display: flex !important;\n  align-items: center;\n"],["\n  display: flex !important;\n  align-items: center;\n"]))),u=i.ZP.span(y||(y=l(["\n  margin-right: ",";\n"],["\n  margin-right: ",";\n"])),(function(e){return e.showSpinner?"8px":"0"})),f=(0,r.forwardRef)((function(e,t){var n=e.children,r=e.showSpinner,i=void 0!==r&&r,a=e.isDisabled,l=void 0!==a&&a,f=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["children","showSpinner","isDisabled"]);return o().createElement(p,s({ref:t},f,{isDisabled:l}),o().createElement(u,{showSpinner:i},n),i&&o().createElement(c.Spinner,{size:"md"}))}));f.displayName="ButtonWithSpinner";const d=f;var m,y},49827:(e,t,n)=>{n.d(t,{bJ:()=>g,Vx:()=>m,dw:()=>d,x6:()=>y,TP:()=>h});var r=n(90060),o=n(15654),i=n(35388),a=n(7247),c=(0,o.Hx)(),l=((0,o.mY)().post,function(e){return c.patch(i.Vs+"/sources/"+e+"/refresh/")}),s=function(e,t,n){if(e){var r=t?"?name="+t:"",o=n?"page_size="+n.limit+"&page="+(n.offset||1):"";return c.get(i.Vs+"/sources/"+e+"/service_offerings/"+r+(t?"&":"?")+o)}return c.get(i.Vs+"/service_offerings/")},p=function(e,t,n){if(void 0===t&&(t=""),void 0===n&&(n=a.he),e){var r=t?"name="+t:"";return c.get(i.Vs+"/sources/"+e+"/service_inventories/?"+r+(n?"&page_size="+n.limit+"&page="+(n.offset||1):""))}return c.get(i.Vs+"/service_inventories/?page_size="+n.limit+"&page="+(n.offset||1))},u=n(83215),f=function(){return(f=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},d=function(){return function(e){return e({type:r.mH+"_PENDING"}),c.get(i.Vs+"/sources/").then((function(t){return e({type:r.mH+"_FULFILLED",payload:t})})).catch((function(t){return e({type:r.mH+"_REJECTED",payload:t})}))}},m=function(e,t,n){return{type:r.d6,payload:s(e,t,n),meta:f({platformId:e,filter:t},n)}},y=function(e){return{type:r.UZ,payload:(t=e,c.get(i.Vs+"/sources/"+t+"/"))};var t},g=function(e,t,n){return{type:r.c_,payload:p(e,t,n)}},h=function(e){return function(t){return t({type:r.$f,payload:l(e).then((function(){return t((0,u.wN)({variant:"success",title:"Success starting the platform refresh",dismissable:!0,description:"The platform refresh started successfully"}))})).catch((function(e){429===e.status?t((0,u.wN)({variant:"info",title:"Platform refresh in progress",dismissable:!0,description:"Platform refresh already running."})):t({type:r.$f+"_REJECTED",payload:e})}))})}}},77172:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(30624),o=n.n(r),i=n(99166),a=n(56976),c=n(7247),l=function(){return(l=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};const s=function(e){var t=e.meta,n=t.limit,r=void 0===n?50:n,s=t.count,p=void 0===s?0:s,u=t.offset,f=void 0===u?0:u,d=e.apiProps,m=e.apiRequest,y=e.className,g=void 0===y?"":y,h=e.isCompact,O=void 0!==h&&h,v=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["meta","apiProps","apiRequest","className","isCompact"]);return o().createElement("div",{className:g},o().createElement(a.Pagination,l({perPage:r||50,itemCount:p||0,onPerPageSelect:function(e,t){return m(d,{offset:f,limit:t})},page:(0,c.FZ)(r,f),onSetPage:function(e,t,n){var o={offset:(0,c.SJ)(t,r),limit:r},a=function(){return m(d,o)};return n?(0,i.Z)(a,250)():a()},dropDirection:"down",isCompact:O},v)))}}}]);
//# sourceMappingURL=../sourcemaps/add-products-to-portfolio.fa8a7e5982ec35dc4127e9e4aa2d4ac4.js.map