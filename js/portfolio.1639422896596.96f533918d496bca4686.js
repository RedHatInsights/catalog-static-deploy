"use strict";(self.webpackChunkcatalog=self.webpackChunkcatalog||[]).push([[5824],{5866:(e,t,o)=>{t.gk={name:"AngleLeftIcon",height:512,width:256,svgPath:"M31.7 239l136-136c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9L127.9 256l96.4 96.4c9.4 9.4 9.4 24.6 0 33.9L201.7 409c-9.4 9.4-24.6 9.4-33.9 0l-136-136c-9.5-9.4-9.5-24.6-.1-34z",yOffset:0,xOffset:0},t.fP=o(35183).createIcon(t.gk),t.ZP=t.fP},39173:(e,t,o)=>{o.d(t,{Z:()=>f});var r=o(30624),n=o.n(r),i=o(45697),a=o.n(i),l=o(94184),c=o.n(l),s=o(60485),u=function(e){var t=e.className,o=e.title,r=c()(t);return n().createElement(s.D,{headingLevel:"h1",size:"2xl",className:r,"widget-type":"InsightsPageHeaderTitle"}," ",o," ")};const f=u;u.propTypes={title:a().node.isRequired,className:a().string}},7002:(e,t,o)=>{o.r(t),o.d(t,{default:()=>V});var r=o(29439),n=o(4942),i=o(30624),a=o.n(i),l=o(14494),c=o(334),s=o(45697),u=o.n(s),f=o(63035),p=function(e,t,o){if(o||2===arguments.length)for(var r,n=0,i=t.length;n<i;n++)!r&&n in t||(r||(r=Array.prototype.slice.call(t,0,n)),r[n]=t[n]);return e.concat(r||Array.prototype.slice.call(t))},d=o(11608),m=o(89231),h=o(77503),v=o(81624),y=o(47786),g=o(52579),P=o(36722),I=o(9456),w=o(94002),b=o(20240),O=o(44058),R=o(66678),E=o(91703),k=o(21976);function Z(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function F(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(o),!0).forEach((function(t){(0,n.Z)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):Z(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var T=function(e){var t=e.fromProducts,o=e.title,r=e.description;return a().createElement(R.Z,{schema:{fields:[{component:E.H.TOP_TOOLBAR,breadcrumbs:!t,key:"portfolio-top-toolbar",fields:[{component:k.Z,key:"back-to-products",hidden:!t},{component:E.H.TOP_TOOLBAR_TITLE,key:"portfolio-toolbar-title",title:o,description:r}]}]}})};T.propTypes={title:u().node,description:u().node,fromProducts:u().bool};var A=(0,i.lazy)((function(){return Promise.all([o.e(2679),o.e(3144),o.e(3059),o.e(5142),o.e(3452)]).then(o.bind(o,3452))})),S=(0,i.lazy)((function(){return Promise.all([o.e(2679),o.e(3144),o.e(5432),o.e(3814)]).then(o.bind(o,81166))})),j=(0,i.lazy)((function(){return Promise.all([o.e(2679),o.e(4026),o.e(7781)]).then(o.bind(o,55251))})),L={selectedItems:[],firstSelectedProduct:void 0,removeInProgress:!1,filterValue:"",copyInProgress:!1,isFetching:!0,isFiltering:!1},C=(0,v.Z)((function(e,t,o,r){var n;o(!0),t(null!==(n=window.catalog)&&void 0!==n&&n.standalone?(0,h.cP)(e,r):(0,m.cP)(e,r)).then((function(){return o(!1)}))}),1e3),D=function(e,t){var o,r,n=t.type,i=t.payload,a=void 0===i?{}:i;return{selectItem:F(F({},e),{},{selectedItems:(o=e.selectedItems,r=a.selectedItem,o.includes(r)?p(p([],o.slice(0,o.indexOf(r)),!0),o.slice(o.indexOf(r)+1),!0):p(p([],o,!0),[r],!1)),firstSelectedProduct:a.product||e.firstSelectedProduct}),setRemoveInProgress:F(F({},e),{},{removeInProgress:a}),removeSuccessful:F(F({},e),{},{selectedItems:[],removeInProgress:!1}),setFilterValue:F(F({},e),{},{filterValue:a,isFiltering:!0}),setCopyInProgress:F(F({},e),{},{copyInProgress:a}),setIsFetching:F(F({},e),{},{isFetching:a}),setFilteringFlag:F(F({},e),{},{isFiltering:a})}[n]};const V=function(){var e,t,o,n,s=(0,O.Z)(),u=(0,i.useReducer)(D,F(F({},L),{},{filterValue:(null==s||null===(e=s.portfolioItems)||void 0===e?void 0:e.filter)||""})),p=(0,r.Z)(u,2),v=p[0],R=p[1],E=(0,y.Z)(["portfolio","from-products"]),k=(0,r.Z)(E,1)[0],Z=k.portfolio,V=k["from-products"],z=(0,c.useRouteMatch)(P.hT).url,N=(0,c.useHistory)(),_=(0,l.I0)(),q=(0,b.Z)(),x=(0,l.v9)((function(e){var t=e.portfolioReducer;return{portfolio:t.selectedPortfolio,portfolioItem:t.portfolioItem,meta:t.portfolioItems.meta}})),H=x.portfolio,B=x.portfolioItem,M=x.meta,W=(0,g.Z)([H,B]),Y=function(e){var t,o,r,n,i;return R({type:"setIsFetching",payload:!0}),Promise.all([_((null!==(t=window.catalog)&&void 0!==t&&t.standalone,(0,d.dw)())),_(null!==(o=window)&&void 0!==o&&null!==(r=o.catalog)&&void 0!==r&&r.standalone?(0,h.al)(e):(0,m.al)(e)),_(null!==(n=window)&&void 0!==n&&null!==(i=n.catalog)&&void 0!==i&&i.standalone?(0,h.cP)(e,null==s?void 0:s.portfolioItems):(0,m.cP)(e,null==s?void 0:s.portfolioItems))]).then((function(e){return q.current&&R({type:"setIsFetching",payload:!1}),e})).catch((function(){return R({type:"setIsFetching",payload:!1})}))};(0,i.useEffect)((function(){return Y(Z),(0,f.k3)(),function(){var e;W(),_(null!==(e=window.catalog)&&void 0!==e&&e.standalone?(0,h.So)():(0,m.So)())}}),[]),(0,i.useEffect)((function(){!0!==q.current||v.isFetching||N.location.pathname!==P.hT||(Y(Z),(0,f.k3)())}),[Z,N.location.pathname]);var G={portfolioRoute:z,addProductsRoute:"".concat(z,"/add-products"),editPortfolioRoute:"".concat(z,"/edit-portfolio"),removePortfolioRoute:"".concat(z,"/remove-portfolio"),sharePortfolioRoute:"".concat(z,"/share-portfolio"),workflowPortfolioRoute:"".concat(z,"/edit-workflow"),portfolioItemRoute:"".concat(z,"/portfolio-item")};return!1===(null===(t=H.metadata)||void 0===t||null===(o=t.user_capabilities)||void 0===o?void 0:o.show)?a().createElement(I.M,null):a().createElement(i.Suspense,{fallback:a().createElement(T,{fromProducts:"true"===V,title:H.name,description:H.description})},a().createElement(c.Switch,null,a().createElement(w.Z,{path:G.addProductsRoute,userCapabilities:null===(n=H.metadata)||void 0===n?void 0:n.user_capabilities,requiredCapabilities:"update"},a().createElement(j,{portfolioRoute:G.portfolioRoute})),a().createElement(c.Route,{path:G.portfolioItemRoute},a().createElement(S,{portfolioLoaded:!(null!=v&&v.isFetching)})),a().createElement(c.Route,{path:G.portfolioRoute},a().createElement(A,{routes:G,fromProducts:"true"===V,handleFilterChange:function(e){R({type:"setFilterValue",payload:e}),C(Z,_,(function(e){return R({type:"setFilteringFlag",payload:e})}),F(F({},M),{},{offset:0,filter:e}))},removeProducts:function(e){return function(e){var t;R({type:"setRemoveInProgress",payload:!0}),_(null!==(t=window.catalog)&&void 0!==t&&t.standalone?(0,h.qy)(e,H.name,v.firstSelectedProduct):(0,m.qy)(e,H.name,v.firstSelectedProduct)).then((function(){return R({type:"removeSucessfull"})})).catch((function(){return R({type:"setRemoveInProgress",payload:!1})}))}(e)},copyPortfolio:function(){var e;return R({type:"setCopyInProgress",payload:!0}),_(null!==(e=window.catalog)&&void 0!==e&&e.standalone?(0,h.Yh)(Z):(0,m.Yh)(Z)).then((function(e){var t=e.id;return N.push({pathname:P.hT,search:"?portfolio=".concat(t)})})).then((function(){return R({type:"setCopyInProgress",payload:!1})})).then((function(){var e;return _(null!==(e=window.catalog)&&void 0!==e&&e.standalone?h.eV:m.eV)})).catch((function(){return R({type:"setCopyInProgress",payload:!1})}))},state:v,stateDispatch:R}))))}},20240:(e,t,o)=>{o.d(t,{Z:()=>n});var r=o(30624);const n=function(){var e=(0,r.useRef)(!1);return(0,r.useEffect)((function(){return e.current=!0,function(){return e.current=!1}}),[]),e}},21976:(e,t,o)=>{o.d(t,{Z:()=>u});var r=o(30624),n=o.n(r),i=o(56976),a=o(5866),l=o(64466),c=o(20697),s=o(23349);const u=function(){var e=(0,s.Z)();return n().createElement("div",{className:"pf-u-mb-md"},n().createElement(a.ZP,{className:"pf-u-mr-sm"}),n().createElement(i.Button,{variant:"link",ouiaId:"back-to-products",component:function(){return n().createElement(c.Z,{pathname:"/products"},e(l.Z.backToProducts))}}))}},52579:(e,t,o)=>{o.d(t,{Z:()=>v});var r,n,i=o(30624),a=o(334),l=o(14494),c=o(90060),s=o(36722),u=(s.oQ,{"portfolio-item":["source","portfolio"],"edit-survey":["source","portfolio","portfolio-item"]}),f=((r={})[s.hT]=function(e){return e().portfolioReducer.selectedPortfolio.name},r[s.YJ]=function(e){return e().portfolioReducer.portfolioItem.portfolioItem.name},r[s.PC]=function(){return"Edit survey"},r[s.kp]=function(){return"Add products"},r[s.AG]=function(e){return e().platformReducer.selectedPlatform.name},r[s.rg]=function(e){return e().platformReducer.serviceOffering.service.name},r[s.A5]=function(e){var t=e().orderReducer.orderDetail,o=t.portfolioItem,r=t.order;return o.name+" # "+r.id},r[s.Kf]=function(){return"Edit product"},r),p=((n={})[s.hT]={pathname:s.oQ,title:"Portfolios",searchParams:{}},n[s.AG]={pathname:s.gw,title:"Platforms",searchParams:{}},n[s.A5]={pathname:s.Xr,title:"Orders",searchParams:{}},n),d=function(){return(d=Object.assign||function(e){for(var t,o=1,r=arguments.length;o<r;o++)for(var n in t=arguments[o])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},m=function(e,t,o){if(o||2===arguments.length)for(var r,n=0,i=t.length;n<i;n++)!r&&n in t||(r||(r=Array.prototype.slice.call(t,0,n)),r[n]=t[n]);return e.concat(r||Array.prototype.slice.call(t))},h=function(e,t){return void 0===e&&(e=""),void 0===t&&(t={}),function(o,r){if(0===e.length)return o({type:c.EL,payload:[]});var n=[];"/portfolios/portfolio"===e&&n.push("/portfolios"),e.startsWith("/portfolios/portfolio/portfolio-item")&&(n[0]="/portfolios",n[1]="/portfolio",e.startsWith("/portfolios/portfolio/portfolio-item/")&&(n[2]="/portfolio-item")),e.startsWith("/platforms/platform")&&(n[0]="/platforms");var i=(e=e.replace(n[0],"")).replace(/^\//,"").split("/").reduce((function(e,o,i){var a,l,c=""+(i>0&&e[i-1]?e[i-1].pathname:"")+n[i]+"/"+o,s=f[c];if(!s)return e;var h=d(d({},i>0&&(null===(l=e[i-1])||void 0===l?void 0:l.searchParams)),t[o]?((a={})[o]=t[o],a):{});u[o]&&u[o].forEach((function(e){h[e]=t[e]})),p[c]&&(e=[p[c]]);var v=s(r);return v?m(m([],e,!0),[{pathname:c,searchParams:h,title:v}],!1):e}),[]);return i.length>0&&p[i[0].pathname]&&(i=m([p[i[0].pathname]],i,!0)),o({type:c.EL,payload:i})}};const v=function(e){void 0===e&&(e=[]);var t=(0,l.I0)(),o=(0,a.useLocation)(),r=o.pathname,n=o.search;if(0===e.length)return t(h("",{}));var c=new URLSearchParams(n),s={};return c.forEach((function(e,t){s[t]=e})),(0,i.useEffect)((function(){t(h(r,s))}),function(e,t,o){if(o||2===arguments.length)for(var r,n=0,i=t.length;n<i;n++)!r&&n in t||(r||(r=Array.prototype.slice.call(t,0,n)),r[n]=t[n]);return e.concat(r||Array.prototype.slice.call(t))}([r],e,!0)),function(){return t(h("",{}))}}}}]);
//# sourceMappingURL=../sourcemaps/portfolio.205855d9064d2412b51db1dfb7c7f7ea.js.map