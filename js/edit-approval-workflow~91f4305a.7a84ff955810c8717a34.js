(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{628:function(e,t,o){"use strict";var n=o(99),r=function(){return(r=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++)for(var r in t=arguments[o])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};t.a=function(e){var t=void 0===e?{}:e,o=t.removeSearch,a=t.keepHash,i=Object(n.g)();return r(r({},i),{push:function(e){var t=e;return a&&i.location.hash.length>0&&(t="object"==typeof t?r(r({},t),{hash:i.location.hash}):""+t+i.location.hash),o?i.push(function(e){return"string"==typeof e?e.split("?")[0]:"object"==typeof e?r(r({},e),{search:void 0}):e}(t)):i.push(t)}})}},880:function(e,t,o){"use strict";o.r(t);var n=o(0),r=o.n(n),a=o(22),i=o(128),c=o(29),s=o(5),u=o(32),l=function(){for(var e=0,t=0,o=arguments.length;t<o;t++)e+=arguments[t].length;var n=Array(e),r=0;for(t=0;t<o;t++)for(var a=arguments[t],i=0,c=a.length;i<c;i++,r++)n[r]=a[i];return n},p=function(e,t){void 0===e&&(e=""),void 0===t&&(t=[]);var o=t.map((function(e){return"filter[id][]="+e})).join("&");return Object(c.a)().get(s.b+"/workflows?filter[name][contains]="+e+"&"+(o||"")).then((function(e){return e.data.map((function(e){var t=e.id;return{label:e.name,value:t}}))}))},f=function(e,t,o){var n=e?e.map((function(e){return Object(c.j)().unlinkWorkflow(e,o)})):[],r=t?t.map((function(e){return Object(c.j)().linkWorkflow(e,o)})):[];return Promise.all(l(n,r))},v=function(e,t,o){void 0===t&&(t={limit:u.a.limit,offset:u.a.offset}),void 0===o&&(o="");var n="app_name="+e.appName+"&object_type="+e.objectType+"&object_id="+e.objectId,r="&limit="+t.limit+"&offset="+t.offset,a="&filter[name][contains]="+o;return Object(c.a)().get(s.b+"/workflows?"+n+a+r)},b=o(134),d=function(e){return e().i18nReducer.formatMessage},h=o(23),j=Object(h.b)({unlinkNotification:{id:"approval.notifications.unlink",defaultMessage:"{count, number} {count, plural, one {approval process was} other {approval processes were}} unlinked successfully."},linkNotification:{id:"approval.notifications.link",defaultMessage:"{count, number} {count, plural, one {approval process was} other {approval processes were}} linked successfully."},setWorkflow:{id:"approval.workflows.set",defaultMessage:"Select approval processes for <strong>{objectName}</strong>"},currentWorkflows:{id:"approval.workflows.current",defaultMessage:"Current approval processes"}}),g=o(101),m=o(628),w=o(20),k=o(234),O=o(232);t.default=function(e){var t=e.objectType,o=e.removeSearch,c=e.keepHash,u=void 0!==c&&c,l=e.querySelector,y=e.pushParam,N=e.objectName,S=void 0===N?function(){return t}:N,T=e.onClose,W=Object(w.a)(),M=Object(n.useRef)(W(Object(h.a)({id:"workflows.modal.title",defaultMessage:"Set approval process"}))).current,_=Object(a.useDispatch)(),P=Object(m.a)({removeSearch:o,keepHash:u}),C=Object(g.a)([l])[0],H=function(){T&&T(),P.push(y)};return r.a.createElement(k.a,{title:M,onClose:H,onSubmit:function(e,o){var n,r,a;H(),_((n=e,r=o,a={object_type:t,app_name:s.c[t],object_id:C[l]},function(e,t){var o=d(t);return e({type:i.a.UPDATE_WORKFLOWS,payload:f(r,n,a).then((function(){return e(Object(b.addNotification)({variant:"success",title:"Success updating approval process",dismissable:!0,description:(r.length>0?o&&o(j.unlinkNotification,{count:r.length}):"")+"\n          "+(n.length>0?o(j.linkNotification,{count:n.length}):"")}))}))})}))},getInitialTags:function(){return v({objectType:t,appName:s.c[t],objectId:C[l]}).then((function(e){return e.data}))},loadTags:p,subTitle:W(j.setWorkflow,{strong:O.a,objectName:S(C[l])}),existingTagsMessage:W(j.currentWorkflows)})}}}]);
//# sourceMappingURL=../sourcemaps/edit-approval-workflow~91f4305a.js.map