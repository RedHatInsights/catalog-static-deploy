"use strict";(self.webpackChunkcatalog=self.webpackChunkcatalog||[]).push([[7742],{16936:(e,t,o)=>{o.r(t),o.d(t,{default:()=>y});var n=o(30624),r=o.n(n),a=o(14494),i=o(22720),s=o(22437),c=o(35388),l=o(7247),u=function(e,t,o){if(o||2===arguments.length)for(var n,r=0,a=t.length;r<a;r++)!n&&r in t||(n||(n=Array.prototype.slice.call(t,0,r)),n[r]=t[r]);return e.concat(n||Array.prototype.slice.call(t))},p=function(e,t){void 0===e&&(e=""),void 0===t&&(t=[]);var o=t.map((function(e){return"filter[id][]="+e})).join("&");return(0,s.Hx)().get(c._R+"/workflows?filter[name][contains]="+e+"&"+(o||"")).then((function(e){return e.data.map((function(e){var t=e.id;return{label:e.name,value:t}}))}))},f=function(e,t,o){var n=e?e.map((function(e){return(0,s.xZ)().unlinkWorkflow(e,o)})):[],r=t?t.map((function(e){return(0,s.xZ)().linkWorkflow(e,o)})):[];return Promise.all(u(u([],n,!0),r,!0))},h=o(83215);var v=o(50049);const d=(0,v.vU)({unlinkNotification:{id:"approval.notifications.unlink",defaultMessage:"{count, number} {count, plural, one {approval process was} other {approval processes were}} unlinked successfully."},linkNotification:{id:"approval.notifications.link",defaultMessage:"{count, number} {count, plural, one {approval process was} other {approval processes were}} linked successfully."},setWorkflow:{id:"approval.workflows.set",defaultMessage:"Select approval processes for <strong>{objectName}</strong>"},currentWorkflows:{id:"approval.workflows.current",defaultMessage:"Current approval processes"}});var m=o(47786),g=o(74798),k=o(23349),b=o(28723),w=o(56915);const y=function(e){var t=e.objectType,o=e.removeSearch,u=e.keepHash,y=void 0!==u&&u,j=e.querySelector,N=e.pushParam,S=e.objectName,_=void 0===S?function(){return t}:S,M=e.postMethod,T=e.onClose,W=(0,k.Z)(),C=(0,n.useRef)(W((0,v.Em)({id:"workflows.modal.title",defaultMessage:"Set approval process"}))).current,Z=(0,a.I0)(),H=(0,g.Z)({removeSearch:o,keepHash:y}),x=(0,m.Z)([j])[0],O=function(){T&&T(),H.push(N)};return r().createElement(b.Z,{title:C,onClose:O,onSubmit:function(e,o){var n,r,a;O(),Z((n=e,r=o,a={object_type:t,app_name:c.iC[t],object_id:x[j]},function(e,t){var o=function(e){return e().i18nReducer.formatMessage}(t);return e({type:i.k.UPDATE_WORKFLOWS,payload:f(r,n,a).then((function(){return e((0,h.wN)({variant:"success",title:"Success updating approval process",dismissable:!0,description:(r.length>0?o&&o(d.unlinkNotification,{count:r.length}):"")+"\n          "+(n.length>0?o(d.linkNotification,{count:n.length}):"")}))}))})})).then((function(){M&&Z(M())}))},getInitialTags:function(){return function(e,t,o){void 0===t&&(t={limit:l.he.limit,offset:l.he.offset}),void 0===o&&(o="");var n="app_name="+e.appName+"&object_type="+e.objectType+"&object_id="+e.objectId,r="&limit="+t.limit+"&offset="+t.offset,a="&filter[name][contains]="+o;return(0,s.Hx)().get(c._R+"/workflows?"+n+a+r)}({objectType:t,appName:c.iC[t],objectId:x[j]}).then((function(e){return e.data}))},loadTags:p,subTitle:W(d.setWorkflow,{strong:w.d,objectName:_(x[j])}),existingTagsMessage:W(d.currentWorkflows)})}},74798:(e,t,o)=>{o.d(t,{Z:()=>a});var n=o(334),r=function(){return(r=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++)for(var r in t=arguments[o])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};const a=function(e){var t=void 0===e?{}:e,o=t.removeSearch,a=t.keepHash,i=(0,n.useHistory)();return r(r({},i),{push:function(e){var t=e;return a&&i.location.hash.length>0&&(t="object"==typeof t?r(r({},t),{hash:i.location.hash}):""+t+i.location.hash),o?i.push(function(e){return"string"==typeof e?e.split("?")[0]:"object"==typeof e?r(r({},e),{search:void 0}):e}(t)):i.push(t)}})}}}]);
//# sourceMappingURL=../sourcemaps/edit-approval-workflow.64ac9415928d0afecc3710b086d0f020.js.map