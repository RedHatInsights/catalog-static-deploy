"use strict";(self.webpackChunkcatalog=self.webpackChunkcatalog||[]).push([[7781],{55251:(e,t,o)=>{o.r(t),o.d(t,{default:()=>$});var n=o(93433),r=o(29439),i=o(4942),a=o(87462),l=o(30624),c=o.n(l),s=o(45697),p=o.n(s),u=o(45987),d=o(48794),f=o(8755),m=o(59837),g=o(33188),y=o(97881),h=o(64466),O=o(23349),v=["platform"],b=function(e){var t=e.platform,o=(0,O.Z)();return c().createElement(g.Z,{Icon:t?d.ZP:f.ZP,title:o(t?h.Z.addProducstFilterTitle:h.Z.addProducstPlatformTitle),description:o(t?y.Z.noResultsDescription:h.Z.addProducstPlatformDescription)})};b.propTypes={platform:p().any};var P=function(e){var t=e.platform,o=(0,u.Z)(e,v);return c().createElement(m.Z,(0,a.Z)({editMode:!0},o,{renderEmptyState:function(){return c().createElement(b,{platform:t})}}))};P.propTypes={checkedItems:p().arrayOf(p().string),platform:p().any},P.defaultProps={checkedItems:[]};const w=P;var Z=o(66678),j=o(7247),k=o(44056),E=o(91703),F=o(56824),T=o(28359),R=o(18446),S=o.n(R),V=function(){return(V=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++)for(var r in t=arguments[o])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},I=function(e){var t=e.onChange,o=function(e,t){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(o[n[r]]=e[n[r]])}return o}(e,["onChange"]),n=(0,l.useState)(void 0),r=n[0],i=n[1];return c().createElement("div",{key:"filter-select",id:"filter-select",className:"filter-select"},c().createElement(T.M,V({isDisabled:!o.options||0===o.options.length,name:"filter-select",simpleValue:!1,onChange:function(e){t&&t(e||r),i(e||r)},value:r},o)))};I.propTypes={options:p().array,onChange:p().func.isRequired};const C=(0,l.memo)(I,(function(e,t){return S()(e.options,t.options)}));var D=o(68212),L=o(77172);function A(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function x(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?A(Object(o),!0).forEach((function(t){(0,i.Z)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):A(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}const H=function(e){var t=e.options,o=e.isFetching,n=e.searchValue,r=e.portfolioName,i=e.itemsSelected,a=e.onOptionSelect,l=e.onFilterChange,c=e.portfolioRoute,s=e.onClickAddToPortfolio,p=e.meta,u=e.platformId,d=e.fetchPlatformItems;return{fields:[{component:E.H.TOP_TOOLBAR,key:"add-products-toolbar",fields:[{component:E.H.TOP_TOOLBAR_TITLE,title:"Add products: ".concat(r),key:"add-products-title"},{component:E.H.LEVEL,key:"add-products-actions",fields:[{component:E.H.TOOLBAR,key:"add-products-actions-toolbar",fields:[{component:E.H.TOOLBAR_GROUP,key:"products-filter-group",fields:[{component:C,key:"select-platforms",id:"products-platform-select",isMulti:!1,isSearchable:!0,placeholder:"Filter by Platform",options:t,onChange:a},{component:E.H.FILTER_TOOLBAR_ITEM,key:"filter-products-input",onFilterChange:l,searchValue:n,isDisabled:!u,placeholder:"Filter products"}]},x({groupName:"cancel-group-item"},(0,F.g)({key:"add-products-cancel-button",pathname:c,variant:"link","aria-label":"Cancel Add products to Portfolio",preserveSearch:!0,title:"Cancel"})),{component:E.H.TOOLBAR_ITEM,key:"add-group-item",fields:[{key:"portfolio-items-add-group",component:D.Z,variant:"primary","aria-label":"Add products to Portfolio",title:"Add",type:"button",onClick:s,isDisabled:!i||o,showSpinner:o,children:"Add",id:"add-products-to-portfolio"}]}]},{component:E.H.LEVEL_ITEM,key:"pagination-item",fields:p?[{component:L.Z,key:"add-products-pagination",meta:p,apiProps:u,apiRequest:d,isCompact:!0}]:[]}]}]}]}};var _=o(11608),M=o(49827),B=o(89231),q=o(74798),N=o(45237),G=o(92183),U=o(81624);function z(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function J(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?z(Object(o),!0).forEach((function(t){(0,i.Z)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):z(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,o=arguments.length>2?arguments[2]:void 0;return e.map((function(e){return c().createElement(k.Z,(0,a.Z)({key:e.id},e,{editMode:!0,onToggleItemSelect:function(){return t(e.id)},checked:o.includes(e.id)}))}))},Q={filterValue:"",isFetching:!1,isFiltering:!1},W=function(e,t){switch(t.type){case"setFetching":return J(J({},e),{},{isFetching:t.payload});case"setFilterValue":return J(J({},e),{},{filterValue:t.payload});case"setFilteringFlag":return J(J({},e),{},{isFiltering:t.payload})}return e},X=(0,U.Z)((function(e,t,o,n){var r,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:j.he;n(!0),o(null!==(r=window.catalog)&&void 0!==r&&r.standalone?(0,M.Vx)(e,t,J(J({},i),{},{filter:t})):(0,_.Vx)(e,t,J(J({},i),{},{filter:t}))).then((function(){return n(!1)}))}),1e3),Y=function(e){var t,o=e.portfolioRoute,i=(0,l.useState)(void 0),a=(0,r.Z)(i,2),s=a[0],p=a[1],u=(0,l.useState)([]),d=(0,r.Z)(u,2),f=d[0],m=d[1],g=(0,l.useReducer)(W,Q),y=(0,r.Z)(g,2),h=y[0],O=h.filterValue,v=h.isFetching,b=y[1],P=(0,q.Z)().push,k=(0,N.useDispatch)(),E=(0,N.useSelector)((function(e){var t=e.portfolioReducer.selectedPortfolio,o=e.platformReducer;return{platforms:o.platforms,platformItems:o.platformItems,isLoading:o.isPlatformDataLoading,portfolio:t}})),F=E.portfolio,T=E.platforms,R=E.platformItems,S=E.isLoading;(0,l.useEffect)((function(){var e;k(null!==(e=window.catalog)&&void 0!==e&&e.standalone?(0,M.dw)():(0,_.dw)())}),[]);var V,I=s&&R[s.id]&&(null!==(t=window.catalog)&&void 0!==t&&t.standalone?R[s.id].meta:{count:R[s.id].count}),C=T.results&&T.results.length>0?T.results.map((function(e){return{value:e.id,label:e.name,id:e.id}})):[];return c().createElement(l.Fragment,null,c().createElement(Z.Z,{schema:H({options:C,isFetching:v,portfolioName:F&&F.name||"",itemsSelected:f.length>0,onOptionSelect:function(e){var t;p(e),k(null!==(t=window.catalog)&&void 0!==t&&t.standalone?(0,M.Vx)(e.id,O,j.he):(0,_.Vx)(e.id,O,j.he))},onFilterChange:function(e){return function(e){b({type:"setFilterValue",payload:e}),X(s.id,e,k,(function(e){return b({type:"setFilteringFlag",payload:e})}),J(J({},I),{},{offset:0}))}(e)},portfolioRoute:o,onClickAddToPortfolio:function(){return k({type:"setFetching",payload:!0}),k((0,B.Zm)(F.id,f)).then((function(){return k({type:"setFetching",payload:!1})})).then((function(){return P({pathname:o,search:"?portfolio=".concat(F.id)})})).then((function(){return k((0,B.cP)(F.id))})).catch((function(){return k({type:"setFetching",payload:!1})}))},meta:I,platformId:s&&s.id,searchValue:O,fetchPlatformItems:function(e,t){var o;return k(null!==(o=window.catalog)&&void 0!==o&&o.standalone?(0,M.Vx)(e,O,t):(0,_.Vx)(e,O,t))}})}),c().createElement(w,{platform:!!s,checkedItems:f,isLoading:S,items:K(s&&R[s.id]?null!==(V=window.catalog)&&void 0!==V&&V.standalone?R[s.id].results:R[s.id].data:[],(function(e){return m(function(e){var t=f.indexOf(e);return t>-1?[].concat((0,n.Z)(f.slice(0,t)),(0,n.Z)(f.slice(t+1))):[].concat((0,n.Z)(f),[e])}(e))}),f)}),I&&I.count>0&&c().createElement(G.Z,null,c().createElement(L.Z,{meta:I,apiProps:s&&s.id,apiRequest:function(e,t){var o;return null!==(o=window.catalog)&&void 0!==o&&o.standalone?(0,M.Vx)(e,O,t):(0,_.Vx)(e,O,t)},dropDirection:"up"})))};Y.propTypes={portfolioRoute:p().string.isRequired};const $=Y}}]);
//# sourceMappingURL=../sourcemaps/add-products-to-portfolio.603c771e0fd9c8a0eef6665fd20c783b.js.map