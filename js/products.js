(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{361:function(e,t,n){"use strict";var r={};n.r(r),n.d(r,"getPlatforms",(function(){return h})),n.d(r,"getPlatform",(function(){return g})),n.d(r,"getPlatformItems",(function(){return b})),n.d(r,"getPlatformInventories",(function(){return y})),n.d(r,"getServiceOffering",(function(){return O}));var o=n(1),a=n.n(o),c=n(3),i=n(41),s=n.n(i),u=n(62),l=n(12),p=n(52);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var d=Object(u.a)(),m=Object(u.b)(),h=function(){return m.post("".concat(l.h,"/graphql"),{query:'\nquery {\n  application_types (filter: { name: "/insights/platform/catalog" }) {\n    id\n    name\n    sources {\n      id\n      name\n      source_type_id\n    }\n  }\n}'}).then((function(e){return e.data.application_types})).then((function(e){return s()(e,1)[0].sources}))},g=function(e){return d.get("".concat(l.h,"/sources/").concat(e))},b=function(e,t,n){var r=t?"&filter[name][contains_i]=".concat(t):"";return e?d.get("".concat(l.i,"/sources/").concat(e,"/service_offerings?filter[archived_at][nil]").concat(r).concat(n?"&limit=".concat(n.limit,"&offset=").concat(n.offset):"")):d.get("".concat(l.i,"/service_offerings"))},y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:p.a;return e?d.get("".concat(l.i,"/sources/").concat(e,"/service_inventories?filter[name][contains_i]=").concat(t).concat(n?"&limit=".concat(n.limit,"&offset=").concat(n.offset):"")):d.get("".concat(l.i,"/service_inventories?limit=").concat(n.limit,"&offset=").concat(n.offset))},O=function(e,t){return Promise.all([d.get("".concat(l.i,"/service_offerings/").concat(e)),d.get("".concat(l.h,"/sources/").concat(t)).then((function(e){return d.get("".concat(l.h,"/source_types/").concat(e.source_type_id)).then((function(t){var n=t.icon_url;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{icon_url:n})}))}))]).then((function(e){var t=s()(e,2);return{service:t[0],source:t[1]}}))};function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n.d(t,"c",(function(){return E})),n.d(t,"b",(function(){return P})),n.d(t,"d",(function(){return _})),n.d(t,"a",(function(){return k})),n.d(t,"e",(function(){return w}));var E=function(){return function(e){return e((function(e){return e({type:"".concat(c.j,"_PENDING")}),h().then((function(t){return e({type:"".concat(c.j,"_FULFILLED"),payload:t})})).catch((function(t){return e({type:"".concat(c.j,"_REJECTED"),payload:t})}))}))}},P=function(e,t,n){return{type:c.m,payload:b(e,t,n),meta:j({platformId:e,filter:t},n)}},_=function(e){return{type:c.i,payload:g(e)}},k=function(e,t,n){return{type:c.k,payload:y(e,t,n)}},w=function(){return{type:c.u,payload:O.apply(r,arguments)}}},367:function(e,t,n){"use strict";var r=n(41),o=n.n(r),a=n(42),c=n.n(a),i=n(0),s=n.n(i),u=n(2),l=n.n(u),p=n(43),f=n(36),d=n(53),m=n(380),h=n.n(m),g=n(389);function b(){var e=c()(["\n  height: ",";\n  display: ",";\n  float: ",";\n  width: ",";\n"]);return b=function(){return e},e}var y=Object(p.b)(g.LazyLoadImage)(b(),(function(e){var t=e.height;return e.hidden?"0px":"".concat(t,"px")||!1}),(function(e){return e.hidden?"none":"inherit"}),(function(e){return e.hidden?"left":"inherit"}),(function(e){return e.hidden?0:"inherit"}));function O(){var e=c()(["\n  display: inline-block;\n  height: ",";\n"]);return O=function(){return e},e}var v=p.b.div(O(),(function(e){var t=e.height;return"".concat(t,"px")})),j=function(e){var t=e.src,n=e.height,r=e.sourceId,a=Object(i.useState)(!1),c=o()(a,2),u=c[0],l=c[1],p=Object(i.useState)(!1),m=o()(p,2),g=m[0],b=m[1],O=Object(f.useSelector)((function(e){return e.platformReducer.platformIconMapping})),j=r?O[r]:h.a;return s.a.createElement(v,{height:n},!u&&s.a.createElement(d.c,{height:n}),s.a.createElement(y,{threshold:2e3,delayTime:0,hidden:!u,height:u?n:0,onError:function(){return b(!0)},onLoad:function(){return l(!0)},src:!t||g?j:t}))};j.propTypes={src:l.a.string,platformId:l.a.string,style:l.a.object,height:l.a.number,sourceId:l.a.string},j.defaultProps={style:{},height:40};t.a=j},380:function(e,t,n){e.exports=n.p+"fonts/card-icon-default.svg"},400:function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(2),c=n.n(a),i=n(394),s=function(e){var t=e.handleCheck,n=e.isChecked,r=e.id;return o.a.createElement(i.Checkbox,{onClick:function(e){return e.stopPropagation()},isChecked:n,onChange:t,"aria-label":"card checkbox",id:r})};s.propTypes={handleCheck:c.a.func,isChecked:c.a.bool,id:c.a.string},t.a=s},401:function(e,t,n){"use strict";var r=n(1),o=n.n(r),a=n(22),c=n.n(a),i=n(26),s=n.n(i),u=n(42),l=n.n(u),p=n(0),f=n.n(p),d=n(2),m=n.n(d),h=n(65),g=n(21),b=n(44),y=n(390),O=n(362),v=n(377),j=n(43);function E(){var e=l()(["\n  height: 240px;\n"]);return E=function(){return e},e}var P=Object(j.b)(h.CardBody)(E()),_=function(e){var t=e.name,n=(e.display_name,e.distributor),r=e.pathname,o=e.searchParams,a=e.preserveSearch,i=e.portfolioName,u=s()(e,["name","display_name","distributor","pathname","searchParams","preserveSearch","portfolioName"]);return f.a.createElement(P,null,f.a.createElement(b.TextContent,null,f.a.createElement(O.a,{pathname:r,searchParams:o,preserveSearch:a},f.a.createElement(g.Text,{component:g.TextVariants.h3,title:t},f.a.createElement(v.a,null,t))),n&&f.a.createElement(g.Text,{component:g.TextVariants.small},n),i&&f.a.createElement(p.Fragment,null,f.a.createElement(g.Text,{className:"pf-u-mb-0",component:"small"},"Portfolio"),f.a.createElement(g.Text,null,i))),f.a.createElement(y.a,c()({toDisplay:[u.description?"description":"long_description"]},u)))};_.propTypes={name:m.a.string,display_name:m.a.string,distributor:m.a.string,long_description:m.a.string,description:m.a.string,pathname:m.a.string,preserveSearch:m.a.bool,searchParams:m.a.shape(o()({},m.a.string,m.a.string)),portfolioName:m.a.string},t.a=_},442:function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(2),c=n.n(a),i=n(391),s=n(392),u=n(159),l=n(12),p=n(367),f=n(400),d=n(401),m=n(381),h=function(e){return o.a.createElement(m.b,{isDisabled:e.removeInProgress&&e.isSelected},o.a.createElement(m.a,null,o.a.createElement(i.CardHeader,{className:"card_header"},o.a.createElement(u.Level,null,o.a.createElement(p.a,{src:"".concat(l.c,"/portfolio_items/").concat(e.id,"/icon"),sourceId:e.service_offering_source_ref}),e.isSelectable&&o.a.createElement(f.a,{handleCheck:function(){return e.onSelect(e.id)},isChecked:e.isSelected,id:e.id}))),o.a.createElement(d.a,e),o.a.createElement(s.CardFooter,null)))};h.propTypes={id:c.a.string,platformId:c.a.string,service_offering_source_ref:c.a.string,isSelectable:c.a.bool,isSelected:c.a.bool,onSelect:c.a.func,orderUrl:c.a.string,removeInProgress:c.a.bool,portfolio_id:c.a.string},t.a=h},633:function(e,t,n){"use strict";n.r(t);var r=n(22),o=n.n(r),a=n(41),c=n.n(a),i=n(1),s=n.n(i),u=n(0),l=n.n(u),p=n(36),f=n(425),d=n.n(f),m=n(363),h=n.n(m),g=n(360),b=n(366),y=n(442),O=n(357),v=n(423),j=n(359),E=function(e){var t=e.meta,n=e.fetchProducts,r=e.isLoading,o=e.filterProps,a=o.searchValue,c=o.onFilterChange,i=o.placeholder;return{fields:[{component:O.b.TOP_TOOLBAR,key:"products-top-toolbar",fields:[{component:O.b.TOP_TOOLBAR_TITLE,key:"products-toolbar-title",title:"Products",description:"All products collected from your portfolios",noData:t.noData},{component:O.b.LEVEL,key:"Products-actions",fields:t.noData?[]:[{component:O.b.TOOLBAR,key:"main-portfolio-toolbar",fields:[Object(v.b)({groupName:"filter-group",component:O.b.FILTER_TOOLBAR_ITEM,key:"filter-input",searchValue:a,onFilterChange:c,placeholder:i,isClearable:!0})]},{component:O.b.LEVEL_ITEM,key:"pagination-item",fields:t.count>0?[{component:j.a,key:"products-pagination",meta:t,apiProps:a,apiRequest:n,isDisabled:r,isCompact:!0}]:[]}]}]}]}},P=n(370),_=n(52),k=n(382),w=n(361),D=n(355),C=n(379),T=n(88),F=n(141),S=n(54);function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var x=Object(D.a)((function(e,t,n){n(!0),t(Object(g.e)(e,_.a)).then((function(){return n(!1)}))}),1e3),N={filterValue:"",isOpen:!1,isFetching:!0,isFiltering:!1},R=function(e,t){switch(t.type){case"setFetching":return L({},e,{isFetching:t.payload});case"setFilterValue":return L({},e,{filterValue:t.payload});case"setFilteringFlag":return L({},e,{isFiltering:t.payload})}return e};t.default=function(){var e=Object(u.useContext)(F.a).release,t=Object(u.useReducer)(R,N),n=c()(t,2),r=n[0],a=r.isFetching,i=r.filterValue,s=r.isFiltering,f=n[1],m=Object(p.useDispatch)(),O=Object(p.useSelector)((function(e){return e.portfolioReducer.portfolioItems})),v=O.data,D=O.meta;Object(u.useEffect)((function(){Promise.all([m(Object(g.e)(void 0,_.a)),m(Object(w.c)())]).then((function(){return f({type:"setFetching",payload:!1})})),Object(b.c)(),insights.chrome.appNavClick({id:"products",secondaryNav:!0})}),[]);var I=function(e){f({type:"setFilterValue",payload:e}),x(e,m,(function(e){return f({type:"setFilteringFlag",payload:e})}))},L=v.map((function(e){return l.a.createElement(y.a,o()({key:e.id,pathname:e.portfolio_id&&S.t},(n=(t=e).portfolio_id,r=t.id,a=t.service_offering_source_ref,n&&r&&a?{pathname:n&&S.t,searchParams:{portfolio:n,"portfolio-item":r,source:a}}:{}),e,{toDisplay:[]}));var t,n,r,a})),V={PrimaryAction:D.noData?function(){return l.a.createElement("a",{href:"".concat(e,"settings/sources/new")},l.a.createElement(T.Button,{variant:"primary"},"Add source"))}:function(){return l.a.createElement(T.Button,{variant:"link",onClick:function(){return I("")}},"Clear all filters")},title:D.noData?"No products yet":"No results found",description:D.noData?"Configure a source to add products into portfolios.":"No results match the filter criteria. Remove all filters or clear all filters to show results.",Icon:D.noData?d.a:h.a};return l.a.createElement("div",null,l.a.createElement(P.a,{schema:E({filterProps:{searchValue:i,onFilterChange:I,placeholder:"Filter by product..."},title:"Products",isLoading:s||a,meta:D,fetchProducts:function(){return m(g.e.apply(void 0,arguments))}})}),l.a.createElement(k.a,{isLoading:s||a,items:L,renderEmptyState:function(){return l.a.createElement(C.b,V)}}),D.count>0&&l.a.createElement("div",{className:"pf-u-p-lg global-primary-background content-layout"},l.a.createElement(j.a,{dropDirection:"up",meta:D,apiRequest:function(){return m(g.e.apply(void 0,arguments))}})))}}}]);
//# sourceMappingURL=../sourcemaps/products.js.map