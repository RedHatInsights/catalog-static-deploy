(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{341:function(e,t,r){"use strict";var n={};r.r(n),r.d(n,"getPlatforms",(function(){return g})),r.d(n,"getPlatform",(function(){return h})),r.d(n,"getPlatformItems",(function(){return y})),r.d(n,"getPlatformInventories",(function(){return b})),r.d(n,"getServiceOffering",(function(){return O}));var a=r(1),o=r.n(a),c=r(2),i=r(83),s=r.n(i),l=r(55),u=r(12),p=r(48);function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var d=Object(l.a)(),m=Object(l.b)(),g=function(){return m.post("".concat(u.h,"/graphql"),{query:'\nquery {\n  application_types (filter: { name: "/insights/platform/catalog" }) {\n    id\n    name\n    sources {\n      id\n      name\n      source_type_id\n    }\n  }\n}'}).then((function(e){return e.data.application_types})).then((function(e){return s()(e,1)[0].sources}))},h=function(e){return d.get("".concat(u.h,"/sources/").concat(e))},y=function(e,t,r){var n=t?"&filter[name][contains_i]=".concat(t):"";return e?d.get("".concat(u.i,"/sources/").concat(e,"/service_offerings?filter[archived_at][nil]").concat(n).concat(r?"&limit=".concat(r.limit,"&offset=").concat(r.offset):"")):d.get("".concat(u.i,"/service_offerings"))},b=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:p.a;return e?d.get("".concat(u.i,"/sources/").concat(e,"/service_inventories?filter[name][contains_i]=").concat(t).concat(r?"&limit=".concat(r.limit,"&offset=").concat(r.offset):"")):d.get("".concat(u.i,"/service_inventories?limit=").concat(r.limit,"&offset=").concat(r.offset))},O=function(e,t){return Promise.all([d.get("".concat(u.i,"/service_offerings/").concat(e)),d.get("".concat(u.h,"/sources/").concat(t)).then((function(e){return d.get("".concat(u.h,"/source_types/").concat(e.source_type_id)).then((function(t){var r=t.icon_url;return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e,{icon_url:r})}))}))]).then((function(e){var t=s()(e,2);return{service:t[0],source:t[1]}}))};function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}r.d(t,"c",(function(){return E})),r.d(t,"b",(function(){return P})),r.d(t,"d",(function(){return _})),r.d(t,"a",(function(){return k})),r.d(t,"e",(function(){return w}));var E=function(){return function(e){return e((function(e){return e({type:"".concat(c.j,"_PENDING")}),g().then((function(t){return e({type:"".concat(c.j,"_FULFILLED"),payload:t})})).catch((function(t){return e({type:"".concat(c.j,"_REJECTED"),payload:t})}))}))}},P=function(e,t,r){return{type:c.m,payload:y(e,t,r),meta:j({platformId:e,filter:t},r)}},_=function(e){return{type:c.i,payload:h(e)}},k=function(e,t,r){return{type:c.k,payload:b(e,t,r)}},w=function(){return{type:c.u,payload:O.apply(n,arguments)}}},347:function(e,t,r){"use strict";var n=r(83),a=r.n(n),o=r(0),c=r.n(o),i=r(3),s=r.n(i),l=r(33),u=r(367),p=r(49),f=r(358),d=r.n(f),m=function(e){var t=e.src,r=e.height,n=e.sourceId,i=Object(o.useState)(!1),s=a()(i,2),f=s[0],m=s[1],g=Object(o.useState)(!1),h=a()(g,2),y=h[0],b=h[1],O=Object(l.useSelector)((function(e){return e.platformReducer.platformIconMapping})),v=n?O[n]:d.a;return c.a.createElement("div",{className:"display-inline-block"},!f&&c.a.createElement(p.c,{height:r}),c.a.createElement(u.LazyLoadImage,{threshold:2e3,delayTime:0,height:f?r:0,style:{height:f?r:0},className:"card-image ".concat(f?"":"hide"),onError:function(){return b(!0)},onLoad:function(){return m(!0)},src:!t||y?v:t}))};m.propTypes={src:s.a.string,platformId:s.a.string,style:s.a.object,height:s.a.number,sourceId:s.a.string},m.defaultProps={style:{},height:40},t.a=m},358:function(e,t,r){e.exports=r.p+"fonts/card-icon-default.svg"},379:function(e,t,r){"use strict";var n=r(0),a=r.n(n),o=r(3),c=r.n(o),i=r(373),s=function(e){var t=e.handleCheck,r=e.isChecked,n=e.id;return a.a.createElement(i.Checkbox,{onClick:function(e){return e.stopPropagation()},isChecked:r,onChange:t,"aria-label":"card checkbox",id:n})};s.propTypes={handleCheck:c.a.func,isChecked:c.a.bool,id:c.a.string},t.a=s},380:function(e,t,r){"use strict";var n=r(1),a=r.n(n),o=r(26),c=r.n(o),i=r(38),s=r.n(i),l=r(0),u=r.n(l),p=r(3),f=r.n(p),d=r(59),m=r(21),g=r(39),h=r(368),y=r(342),b=function(e){var t=e.name,r=e.display_name,n=e.distributor,a=e.pathname,o=e.searchParams,i=e.preserveSearch,l=s()(e,["name","display_name","distributor","pathname","searchParams","preserveSearch"]);return u.a.createElement(d.CardBody,{className:"card-height"},u.a.createElement(g.TextContent,null,u.a.createElement(y.a,{pathname:a,searchParams:o,preserveSearch:i},u.a.createElement(m.Text,{className:"elipsis-text-overflow",component:m.TextVariants.h3,title:r||t},r||t)),u.a.createElement(m.Text,{component:m.TextVariants.small},n,"Â ")),u.a.createElement(h.a,c()({},l,{toDisplay:[l.description?"description":"long_description"]})))};b.propTypes={name:f.a.string,display_name:f.a.string,distributor:f.a.string,long_description:f.a.string,description:f.a.string,pathname:f.a.string,preserveSearch:f.a.bool,searchParams:f.a.shape(a()({},f.a.string,f.a.string))},t.a=b},424:function(e,t,r){"use strict";var n=r(0),a=r.n(n),o=r(3),c=r.n(o),i=r(57),s=r(366),l=r(369),u=r(90),p=r(146),f=r(12),d=r(347),m=r(379),g=r(380),h=function(e){return a.a.createElement(u.GalleryItem,null,a.a.createElement("div",{className:"".concat(e.removeInProgress&&e.isSelected?"portfolio-item-progress":""," ")},e.removeInProgress&&e.isSelected&&a.a.createElement(i.Card,{className:"content-gallery-card progress-overlay"}),a.a.createElement(i.Card,{className:"content-gallery-card"},a.a.createElement(s.CardHeader,{className:"card_header"},a.a.createElement(p.Level,null,a.a.createElement(d.a,{src:"".concat(f.c,"/portfolio_items/").concat(e.id,"/icon"),sourceId:e.service_offering_source_ref}),e.isSelectable&&a.a.createElement(m.a,{handleCheck:function(){return e.onSelect(e.id)},isChecked:e.isSelected,id:e.id}))),a.a.createElement(g.a,e),a.a.createElement(l.CardFooter,null))))};h.propTypes={id:c.a.string,platformId:c.a.string,service_offering_source_ref:c.a.string,isSelectable:c.a.bool,isSelected:c.a.bool,onSelect:c.a.func,orderUrl:c.a.string,removeInProgress:c.a.bool,portfolio_id:c.a.string},t.a=h},616:function(e,t,r){"use strict";r.r(t);var n=r(26),a=r.n(n),o=r(83),c=r.n(o),i=r(1),s=r.n(i),l=r(0),u=r.n(l),p=r(33),f=r(399),d=r.n(f),m=r(343),g=r.n(m),h=r(340),y=r(346),b=r(424),O=r(337),v=r(403),j=r(339),E=function(e){var t=e.meta,r=e.fetchProducts,n=e.isLoading,a=e.filterProps,o=a.searchValue,c=a.onFilterChange,i=a.placeholder;return{fields:[{component:O.b.TOP_TOOLBAR,key:"products-top-toolbar",fields:[{component:O.b.TOP_TOOLBAR_TITLE,key:"products-toolbar-title",title:"Products",description:"All products collected from your portfolios",noData:t.noData},{component:O.b.LEVEL,key:"Products-actions",fields:t.noData?[]:[{component:O.b.TOOLBAR,key:"main-portfolio-toolbar",fields:[Object(v.b)({groupName:"filter-group",component:O.b.FILTER_TOOLBAR_ITEM,key:"filter-input",searchValue:o,onFilterChange:c,placeholder:i,isClearable:!0})]},{component:O.b.LEVEL_ITEM,key:"pagination-item",fields:t.count>0?[{component:j.a,key:"products-pagination",meta:t,apiProps:o,apiRequest:r,isDisabled:n,isCompact:!0}]:[]}]}]}]}},P=r(349),_=r(48),k=r(359),w=r(341),C=r(335),D=r(357),S=r(84),F=r(113),I=r(50);function T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function L(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?T(Object(r),!0).forEach((function(t){s()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var N=Object(C.a)((function(e,t,r){r(!0),t(Object(h.e)(e,_.a)).then((function(){return r(!1)}))}),1e3),R={filterValue:"",isOpen:!1,isFetching:!0,isFiltering:!1},V=function(e,t){switch(t.type){case"setFetching":return L({},e,{isFetching:t.payload});case"setFilterValue":return L({},e,{filterValue:t.payload});case"setFilteringFlag":return L({},e,{isFiltering:t.payload})}return e};t.default=function(){var e=Object(l.useContext)(F.a).release,t=Object(l.useReducer)(V,R),r=c()(t,2),n=r[0],o=n.isFetching,i=n.filterValue,s=n.isFiltering,f=r[1],m=Object(p.useDispatch)(),O=Object(p.useSelector)((function(e){return e.portfolioReducer.portfolioItems})),v=O.data,C=O.meta;Object(l.useEffect)((function(){Promise.all([m(Object(h.e)(void 0,_.a)),m(Object(w.c)())]).then((function(){return f({type:"setFetching",payload:!1})})),Object(y.c)(),insights.chrome.appNavClick({id:"products",secondaryNav:!0})}),[]);var T=function(e){f({type:"setFilterValue",payload:e}),N(e,m,(function(e){return f({type:"setFilteringFlag",payload:e})}))},L=v.map((function(e){return u.a.createElement(b.a,a()({key:e.id,pathname:e.portfolio_id&&I.t},(r=(t=e).portfolio_id,n=t.id,o=t.service_offering_source_ref,r&&n&&o?{pathname:r&&I.t,searchParams:{portfolio:r,"portfolio-item":n,source:o}}:{}),e));var t,r,n,o})),x={PrimaryAction:C.noData?function(){return u.a.createElement("a",{href:"".concat(e,"settings/sources/new")},u.a.createElement(S.Button,{variant:"primary"},"Add source"))}:function(){return u.a.createElement(S.Button,{variant:"link",onClick:function(){return T("")}},"Clear all filters")},title:C.noData?"No products yet":"No results found",description:C.noData?"Configure a source to add products into portfolios.":"No results match the filter criteria. Remove all filters or clear all filters to show results.",Icon:C.noData?d.a:g.a};return u.a.createElement("div",null,u.a.createElement(P.a,{schema:E({filterProps:{searchValue:i,onFilterChange:T,placeholder:"Filter by product..."},title:"Products",isLoading:s||o,meta:C,fetchProducts:function(){return m(h.e.apply(void 0,arguments))}})}),u.a.createElement(k.a,{isLoading:s||o,items:L,renderEmptyState:function(){return u.a.createElement(D.b,x)}}),C.count>0&&u.a.createElement("div",{className:"pf-u-p-lg global-primary-background content-layout"},u.a.createElement(j.a,{dropDirection:"up",meta:C,apiRequest:function(){return m(h.e.apply(void 0,arguments))}})))}}}]);
//# sourceMappingURL=../sourcemaps/products.js.map