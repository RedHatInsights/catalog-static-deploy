(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{561:function(e,t,n){"use strict";var r=n(1),a=n.n(r),o=n(176),c=n.n(o),i=n(78);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var l=function(e){return"string"==typeof e?e.split("?")[0]:"object"===c()(e)?s(s({},e),{},{search:void 0}):e};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.removeSearch,n=e.keepHash,r=Object(i.g)();return s(s({},r),{},{push:function(e){var a=e;return n&&r.location.hash.length>0&&(a="object"===c()(a)?s(s({},a),{},{hash:r.location.hash}):"".concat(a).concat(r.location.hash)),t?r.push(l(a)):r.push(a)}})}},695:function(e,t,n){"use strict";var r=n(29),a=n.n(r),o=n(30),c=n(171);function i(){var e=a()(["\n  overflow: hidden;\n"]);return i=function(){return e},e}var u=Object(o.b)(c.Bullseye)(i());t.a=u},863:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),o=n(14),c=n.n(o),i=n(26),u=n.n(i),s=n(15),l=n.n(s),p=n(0),f=n.n(p),b=n(4),m=n.n(b),d=n(20),h=n(170),O=n(169),v=n(172),j=n(38),y=n.n(j),g=n(6),w=n(100),P=n(27),E=Object(w.a)((function(e,t){return Object(P.e)(e).then((function(n){var r=n.data;if(!e||0===e.trim().length)throw"Required";if(r.find((function(n){return n.name===e&&n.id!==t})))throw"Name has already been taken"}))})),S=function(e,t,n){var r,a,o,c,i;return{fields:[{label:"schemas.portfolio.name",name:"name",component:y.a.TEXT_FIELD,isRequired:!0,maxLength:(null==t||null===(r=t.components)||void 0===r||null===(a=r.schemas)||void 0===a||null===(o=a.Portfolio)||void 0===o||null===(c=o.properties)||void 0===c||null===(i=c.name)||void 0===i?void 0:i.maxLength)||g.d,validate:[function(e){return E(e,n)}]},{label:"schemas.portfolio.description",component:y.a.TEXTAREA,name:"description"}]}},T=n(126),D=n(79),k=n(561),R=n(695),x=n(183),C=n(11),q=n(106),L=n(102),A=n(44),Q=n(166),H=n(23);function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var X=function(e){var t,n,r=e.removeQuery,a=e.closeTarget,o=e.viewState,i=Object(H.a)(),s=Object(d.useDispatch)(),b=Object(p.useState)(!0),m=l()(b,2),j=m[0],y=m[1],g=Object(p.useContext)(q.a).openApiSchema,w=Object(D.a)(["portfolio"]),E=l()(w,1)[0].portfolio,J=Object(k.a)({removeQuery:r,keepHash:!0}).push,X=Object(d.useSelector)((function(e){var t=e.portfolioReducer;return Object(P.g)(t,E)})),_=function(){var e=u()(c.a.mark((function e(t){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={variant:"success",title:i(A.a.addSuccessTitle),description:i(A.a.addSuccessDescription,{name:t.name,b:function(e){return f.a.createElement("b",{key:"strong"},e)}})},e.next=3,s(Object(T.a)(t,n));case 3:return r=e.sent,e.abrupt("return",r&&r.value&&r.value.id?J({pathname:C.y,search:"?portfolio=".concat(r.value.id)}):J(a));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=E&&X&&Object.keys(X).length>0;return!1===(null==X||null===(t=X.metadata)||void 0===t||null===(n=t.user_capabilities)||void 0===n?void 0:n.update)?f.a.createElement(x.a,null):f.a.createElement(h.Modal,{title:i(E?A.a.modalEditTitle:A.a.modalCreateTitle),isOpen:j,onClose:function(){return J(a)},variant:"small"},!E||B?f.a.createElement(v.c,{schema:S(0,g,E),schemaType:"default",onSubmit:function(e){return X?(y(!1),s(Object(T.o)(e,o)).then((function(){return J(a)}))):_(e,o)},onCancel:function(){return J(a)},initialValues:N({},X),formContainer:"modal",templateProps:{submitLabel:i(E?L.a.save:Q.a.create),disableSubmit:["pristine","submitting"]}}):f.a.createElement(R.a,{className:"pf-u-m-md"},f.a.createElement(O.Spinner,null)))};X.propTypes={removeQuery:m.a.bool,closeTarget:m.a.oneOfType([m.a.string,m.a.shape({pathname:m.a.string.isRequired,search:m.a.string})]).isRequired,viewState:m.a.shape({count:m.a.number,limit:m.a.number,offset:m.a.number,filter:m.a.string})};t.default=X}}]);
//# sourceMappingURL=../sourcemaps/add-portfolio~5a4d8549.js.map