"use strict";(self.webpackChunkcatalog=self.webpackChunkcatalog||[]).push([[7792],{87552:(e,t,n)=>{n.r(t),n.d(t,{default:()=>q});var r=n(29439),a=n(4942),o=n(30624),l=n.n(o),i=n(45237),c=n(334),u=n(48794),s=n(54213),d=n(63035),f=n(66678),p=n(7247),m=n(11608),v=n(49827),b=n(12700),g=n(33188),h=n(81624),y=n(15040),w=n(30452),E=n(8666),Z=n(97881),F=n(23349),O=function(){var e=(0,F.Z)();return l().createElement(y.Text,{component:y.TextVariants.h1},e(Z.Z.noItems))};const P=function(e){var t=e.data,n=e.columns,r=e.isCompact,a=void 0!==r&&r,i=e.isLoading,c=void 0!==i&&i,u=e.actionResolver,s=e.areActionsDisabled,d=e.borders,f=void 0===d||d,p=e.routes,m=void 0===p?function(){return null}:p,v=e.titlePlural,b=e.renderEmptyState,g=e.ouiaId,h=(0,o.useState)([]),y=h[0],Z=h[1];return(0,o.useEffect)((function(){Z(t)}),[t]),c?l().createElement(E.Wi,null):l().createElement(o.Fragment,null,0===y.length?b?b():l().createElement(O,null):l().createElement(o.Fragment,null,m(),l().createElement(w.Table,{ouiaId:g,"aria-label":v+" table",variant:a?w.TableVariant.compact:void 0,borders:f,rows:y,cells:n,actionResolver:u,areActionsDisabled:s},l().createElement(w.TableHeader,null),l().createElement(w.TableBody,null))))};var k=n(93433),j=n(77172),D=n(92183),R=n(47786),I=n(56682),J=n(53352);function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function V(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var T={filterValue:"",isOpen:!1,isFetching:!0,isFiltering:!1},C=(0,h.Z)((function(e,t,n,r){var a,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:p.he;r(!0),n(null!==(a=window.catalog)&&void 0!==a&&a.standalone?(0,v.bJ)(e,t,o):(0,m.bJ)(e,t,o)).then((function(){return r(!1)}))}),1e3),A=function(e,t){switch(t.type){case"setFetching":return V(V({},e),{},{isFetching:t.payload});case"setFilterValue":return V(V({},e),{},{filterValue:t.payload});case"setFilteringFlag":return V(V({},e),{},{isFiltering:t.payload});default:return e}};const q=function(){var e=(0,F.Z)(),t=(0,o.useRef)([e(I.Z.name),e(I.Z.description),e(I.Z.created),e(J.Z.workflowColumn)]).current,n=(0,o.useReducer)(A,T),a=(0,r.Z)(n,2),h=a[0],y=h.filterValue,w=h.isFetching,E=h.isFiltering,Z=a[1],O=(0,i.useSelector)((function(e){return e.platformReducer.platformInventories})),S=O.data,q=O.results,x=O.count,H=O.meta,L=(0,i.useSelector)((function(e){return e.platformReducer.selectedPlatform})),B=(0,i.useDispatch)(),N=(0,R.Z)(["platform"]),W=(0,r.Z)(N,1)[0].platform,_=(0,c.useHistory)();(0,o.useEffect)((function(){var e;B(null!==(e=window.catalog)&&void 0!==e&&e.standalone?(0,v.bJ)(W,y,p.he):(0,m.bJ)(W,y,p.he)).then((function(){return Z({type:"setFetching",payload:!1})})),(0,d.k3)()}),[]);var z=S||q,G=H||{count:x},K=z?function(e){return e.reduce((function(e,t,n){var r=t.id,a=t.name,i=t.description,c=t.created_at,u=t.workflow;return[].concat((0,k.Z)(e),[{id:r,key:n,isOpen:!1,cells:[a,i,l().createElement(o.Fragment,{key:"date"},l().createElement(d.bb,{date:c})),u]}])}),[])}(z):[],M=L?L.name:"";return l().createElement(o.Fragment,null,l().createElement(f.Z,{schema:(0,b.At)({onFilterChange:function(e){Z({type:"setFilterValue",payload:e}),C(W,e,B,(function(e){return Z({type:"setFilteringFlag",payload:e})}),V(V({},H),{},{offset:0}))},searchValue:y,filterPlaceholder:e(J.Z.inventoriesFilter),meta:G,apiRequest:function(e,t){var n;return B(null!==(n=window.catalog)&&void 0!==n&&n.standalone?(0,v.bJ)(W,y,t):(0,m.bJ)(W,y,t))}})}),l().createElement(s.Z,{type:"content"},l().createElement(P,{ouiaId:"PlatformsTable",title:M,data:K,columns:t,isLoading:w||E,actionResolver:function(e){return[{title:"Set approval",onClick:function(){return _.push({pathname:"/platforms/platform/platform-inventories/edit-workflow",search:"?platform=".concat(W,"&inventory=").concat(e.id)})}}]},renderEmptyState:function(){return l().createElement(g.Z,{title:"No inventories",Icon:u.ZP,description:e(""===y?J.Z.noInventoriesDescription:J.Z.noInventoriesFilterDescription)})}})),G.count>0&&l().createElement(D.Z,null,l().createElement(j.Z,{dropDirection:"up",meta:G,apiRequest:function(e,t){var n;return B(null!==(n=window.catalog)&&void 0!==n&&n.standalone?(0,v.bJ)(W,y,t):(0,m.bJ)(W,y,t))}})))}}}]);
//# sourceMappingURL=../sourcemaps/platform-inventories.4e757e02c2482c6d4ff311a9b6cdd494.js.map