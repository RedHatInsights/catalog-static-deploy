(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{581:function(e,t,o){"use strict";var n=o(85),a=function(){return(a=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++)for(var a in t=arguments[o])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};t.a=function(e){var t=void 0===e?{}:e,o=t.removeSearch,r=t.keepHash,i=Object(n.g)();return a(a({},i),{push:function(e){var t=e;return r&&i.location.hash.length>0&&(t="object"==typeof t?a(a({},t),{hash:i.location.hash}):""+t+i.location.hash),o?i.push(function(e){return"string"==typeof e?e.split("?")[0]:"object"==typeof e?a(a({},e),{search:void 0}):e}(t)):i.push(t)}})}},818:function(e,t,o){"use strict";o.r(t);var n=o(26),a=o.n(n),r=o(0),i=o.n(r),s=o(4),c=o.n(s),u=o(19),l=o(103),p=o(22),f=o(5),h=o(23),b=function(){for(var e=0,t=0,o=arguments.length;t<o;t++)e+=arguments[t].length;var n=Array(e),a=0;for(t=0;t<o;t++)for(var r=arguments[t],i=0,s=r.length;i<s;i++,a++)n[a]=r[i];return n},d=function(e,t){void 0===e&&(e=""),void 0===t&&(t=[]);var o=t.map((function(e){return"filter[id][]="+e})).join("&");return Object(p.a)().get(f.b+"/workflows?filter[name][contains]="+e+"&"+(o||"")).then((function(e){return e.data.map((function(e){var t=e.id;return{label:e.name,value:t}}))}))},v=function(e,t,o){var n=e?e.map((function(e){return Object(p.j)().unlinkWorkflow(e,o)})):[],a=t?t.map((function(e){return Object(p.j)().linkWorkflow(e,o)})):[];return Promise.all(b(n,a))},m=function(e,t,o){void 0===t&&(t={limit:h.a.limit,offset:h.a.offset}),void 0===o&&(o="");var n="app_name="+e.appName+"&object_type="+e.objectType+"&object_id="+e.objectId,a="&limit="+t.limit+"&offset="+t.offset,r="&filter[name][contains]="+o;return Object(p.a)().get(f.b+"/workflows?"+n+r+a)},g=o(107),j=function(e){return e().i18nReducer.formatMessage},k=o(20),w=Object(k.b)({unlinkNotification:{id:"approval.notifications.unlink",defaultMessage:"{count, number} {count, plural, one {approval process was} other {approval processes were}} unlinked successfully."},linkNotification:{id:"approval.notifications.link",defaultMessage:"{count, number} {count, plural, one {approval process was} other {approval processes were}} linked successfully."},setWorkflow:{id:"approval.workflows.set",defaultMessage:"Select approval processes for <strong>{objectName}</strong>"},currentWorkflows:{id:"approval.workflows.current",defaultMessage:"Current approval processes"}}),y=o(86),O=o(581),N=o(18),S=o(196),T=o(195),W=function(e){var t=e.objectType,o=e.removeSearch,n=e.keepHash,s=e.querySelector,c=e.pushParam,p=e.objectName,h=void 0===p?function(){return t}:p,b=e.onClose,W=Object(N.a)(),M=Object(r.useRef)(W(Object(k.a)({id:"workflows.modal.title",defaultMessage:"Set approval process"}))).current,R=Object(u.useDispatch)(),_=Object(O.a)({removeSearch:o,keepHash:n}),q=Object(y.a)([s]),P=a()(q,1)[0],H=function(){b&&b(),_.push(c)};return i.a.createElement(S.a,{title:M,onClose:H,onSubmit:function(e,o){var n,a,r;H(),R((n=e,a=o,r={object_type:t,app_name:f.c[t],object_id:P[s]},function(e,t){var o=j(t);return e({type:l.a.UPDATE_WORKFLOWS,payload:v(a,n,r).then((function(){return e(Object(g.addNotification)({variant:"success",title:"Success updating approval process",dismissable:!0,description:(a.length>0?o&&o(w.unlinkNotification,{count:a.length}):"")+"\n          "+(n.length>0?o(w.linkNotification,{count:n.length}):"")}))}))})}))},getInitialTags:function(){return m({objectType:t,appName:f.c[t],objectId:P[s]}).then((function(e){return e.data}))},loadTags:d,subTitle:W(w.setWorkflow,{strong:T.a,objectName:h(P[s])}),existingTagsMessage:W(w.currentWorkflows)})};W.propTypes={pushParam:c.a.oneOfType([c.a.string,c.a.shape({pathname:c.a.string.isRequired,search:c.a.string})]).isRequired,objectType:c.a.string.isRequired,objectName:c.a.func,removeSearch:c.a.bool,querySelector:c.a.oneOf(["portfolio","platform","inventory","portfolio-item"]).isRequired,keepHash:c.a.bool,onClose:c.a.func},W.defaultProps={keepHash:!1};t.default=W}}]);
//# sourceMappingURL=../sourcemaps/edit-approval-workflow~91f4305a.js.map