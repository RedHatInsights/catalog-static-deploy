(window.webpackJsonp=window.webpackJsonp||[]).push([[59],{433:function(e,t,a){"use strict";var r=a(436);t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{onlyResolvesLast:!1};return Object(r.a)(e,t,a)}},440:function(e,t,a){"use strict";var r=a(89),n=a.n(r),o=a(29),i=a.n(o),l=a(0),c=a.n(l),s=a(12),p=a.n(s),u=a(436),f=a(214),d=a(23),m=function(e){var t=e.meta,a=t.limit,r=t.count,o=t.offset,l=e.apiProps,s=e.apiRequest,p=e.className,m=e.isCompact,b=i()(e,["meta","apiProps","apiRequest","className","isCompact"]);return c.a.createElement("div",{className:p},c.a.createElement(f.Pagination,n()({perPage:a||50,itemCount:r||0,onPerPageSelect:function(e,t){return s(l,{offset:o,limit:t})},page:Object(d.b)(a,o),onSetPage:function(e,t,r){var n={offset:Object(d.c)(t,a),limit:a},o=function(){return s(l,n)};return r?Object(u.a)(o,250)():o()},direction:"down",isCompact:m},b)))};m.propTypes={meta:p.a.shape({count:p.a.number,limit:p.a.number.isRequired,offset:p.a.number.isRequired}),apiRequest:p.a.func.isRequired,apiProps:p.a.any,className:p.a.string,isCompact:p.a.bool},m.defaultProps={meta:{count:0,limit:50,offset:0},className:"",isCompact:!1},t.a=m},474:function(e,t,a){"use strict";var r=a(0),n=a.n(r),o=a(12),i=a.n(o),l=function(e){var t=e.children;return n.a.createElement("div",{className:"pf-u-p-lg pf-u-pt-md pf-u-pb-md global-primary-background pf-u-mt-auto"},t)};l.propTypes={children:i.a.oneOfType([i.a.node,i.a.arrayOf(i.a.node)])},t.a=l},652:function(e,t,a){"use strict";var r=a(0);t.a=function(){var e=Object(r.useRef)(!1);return Object(r.useEffect)((function(){return e.current=!0,function(){return e.current=!1}}),[]),e}},890:function(e,t,a){"use strict";a.r(t);var r=a(89),n=a.n(r),o=a(19),i=a.n(o),l=a(1),c=a.n(l),s=a(0),p=a.n(s),u=a(16),f=a(59),d=a(448),m=a.n(d),b=a(566),y=a.n(b),h=a(72),g=a(60),v=a(551),O=a(23),j=a(93),E=a(29),w=a.n(E),P=a(12),D=a.n(P),R=a(546),F=a(523),C=a(550),q=a(209),_=a(210),T=a(34),S=a(215),k=a(50),N=a(71),x=a(648),I=a(132),A=a(30),B=a.n(A),V=a(51),L=a(496),H=a(92),U=a(213),W=a(547),J=a(31);function z(){var e=B()(["\n  width: 100%;\n"]);return z=function(){return e},e}function K(){var e=B()(["\n  max-width: calc(100% - 80px);\n  width: calc(100% - 80px);\n"]);return K=function(){return e},e}var G=Object(J.b)(U.LevelItem)(K()),M=Object(J.b)(H.Level)(z()),Q=function(e){var t=e.id,a=e.to,r=e.portfolioName,n=e.portfolio_items,o=e.headerActions;return p.a.createElement(M,null,p.a.createElement(G,null,p.a.createElement(N.TextContent,null,p.a.createElement(V.a,{to:a,id:"portfolio-link-".concat(t)},p.a.createElement(k.Text,{title:r,className:"pf-u-mb-0",component:k.TextVariants.h3},p.a.createElement(W.a,null,r))))),p.a.createElement(L.Badge,{isRead:!0},n),p.a.createElement("div",{onClick:function(e){return e.preventDefault()}},o))};Q.propTypes={portfolioName:D.a.string.isRequired,portfolio_items:D.a.number,headerActions:D.a.node,id:D.a.string,to:D.a.shape({pathname:D.a.string.isRequired,search:D.a.string.isRequired}).isRequired},Q.defaultProps={headerActions:[]};var X=Q,Y=a(444),Z=a(11),$=a(549),ee=a(548),te=a(126),ae=a(441),re=a(88);function ne(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}var oe=["description"],ie=function(e){var t=e.portfolioId,a=e.handleCopyPortfolio,r=e.userCapabilities,n=r.share,o=r.copy,l=r.unshare,c=r.update,u=r.destroy,f=r.set_approval,d=Object(re.a)(),m=Object(s.useState)(!1),b=i()(m,2),y=b[0],h=b[1],g=[];return(n||l)&&g.push(p.a.createElement(_.DropdownItem,{key:"share-portfolio-action",id:"share-portfolio-action",component:p.a.createElement(Y.a,{searchParams:{portfolio:t},pathname:Z.z,preserveHash:!0},d(te.a.share))})),o&&g.push(p.a.createElement(_.DropdownItem,{key:"copy-portfolio-action",id:"copy-portfolio-action",onClick:function(){return a(t)}},d(te.a.copy))),f&&g.push(p.a.createElement(_.DropdownItem,{key:"workflow-portfolio-action",id:"workflow-portfolio-action",component:p.a.createElement(Y.a,{searchParams:{portfolio:t},pathname:Z.e,preserveHash:!0},d(te.a.setApproval))})),c&&g.push(p.a.createElement(_.DropdownItem,{key:"edit-portfolio-action",id:"edit-portfolio-action",component:p.a.createElement(Y.a,{searchParams:{portfolio:t},pathname:Z.d,preserveHash:!0},d(te.a.edit))})),u&&g.push(p.a.createElement(_.DropdownItem,{key:"remove-portfolio-action",id:"remove-portfolio-action",component:p.a.createElement(Y.a,{searchParams:{portfolio:t},pathname:Z.y,preserveHash:!0},d(te.a.delete))})),0===g.length?null:p.a.createElement(q.Dropdown,{key:"portfolio-dropdown",id:"portfolio-".concat(t,"-dropdown"),isOpen:y,isPlain:!0,onSelect:function(){return h(!1)},position:T.DropdownPosition.right,toggle:p.a.createElement(S.KebabToggle,{id:"portfolio-".concat(t,"-toggle"),onToggle:function(e){return h(e)}}),dropdownItems:g})};ie.propTypes={portfolioId:D.a.string.isRequired,userCapabilities:D.a.shape({destroy:D.a.bool,update:D.a.bool,share:D.a.bool,unshare:D.a.bool,set_approval:D.a.bool,copy:D.a.bool}).isRequired,handleCopyPortfolio:D.a.func.isRequired};var le=function(e){var t=e.imageUrl,a=e.isDisabled,r=e.name,o=e.id,i=e.handleCopyPortfolio,l=e.metadata,s=l.user_capabilities,u=l.statistics,f=u.shared_groups,d=u.portfolio_items,m=w()(e,["imageUrl","isDisabled","name","id","handleCopyPortfolio","metadata"]),b=Object(re.a)(),y={pathname:Z.x,search:"?portfolio=".concat(o)};return p.a.createElement($.b,{isDisabled:a},p.a.createElement($.a,null,p.a.createElement(F.CardHeader,null,p.a.createElement(X,{id:o,to:y,portfolioName:r,portfolio_items:d||0,headerActions:p.a.createElement(ie,{portfolioId:o,userCapabilities:s,handleCopyPortfolio:i})})),p.a.createElement(ee.a,null,p.a.createElement(N.TextContent,{className:"pf-u-mb-md"},p.a.createElement(k.Text,{component:k.TextVariants.small,className:"pf-i-mb-sm"},"Last updatedÂ ",p.a.createElement(I.DateFormat,{date:m.updated_at||m.created_at,type:"relative"})),p.a.createElement(k.Text,{component:k.TextVariants.small},m.owner)),p.a.createElement(R.a,n()({},function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(a),!0).forEach((function(t){c()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ne(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({name:r,imageUrl:t},m),{toDisplay:oe}))),p.a.createElement(C.CardFooter,null,f>0&&p.a.createElement(x.Label,{variant:"filled",color:"blue"},b(ae.a.shared)))))};le.propTypes={history:D.a.object,imageUrl:D.a.string,name:D.a.string,id:D.a.string.isRequired,updated_at:D.a.string,created_at:D.a.string.isRequired,owner:D.a.string,isDisabled:D.a.bool,metadata:D.a.shape({user_capabilities:D.a.object.isRequired,statistics:D.a.shape({shared_groups:D.a.number,portfolio_items:D.a.number}).isRequired}).isRequired,handleCopyPortfolio:D.a.func.isRequired};var ce=le,se=a(524),pe=a(433),ue=a(440),fe=a(474),de=a(78),me=a(138),be=a(450),ye=a(91),he=a(451),ge=a(652),ve=a(568);function Oe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}var je={name:ae.a.name,owner:ae.a.owner,sort_by:ae.a.sortBy},Ee={name:ae.a.name,owner:ae.a.owner,updated_at:ae.a.updated,created_at:ae.a.created},we=function(e){var t=e.filters,a=e.stateDispatch,r=e.debouncedFilter,n=e.initialState,o=e.meta,l=e.filterType,s=e.handleFilterItems,f=e.sortDirection,d=e.handleSort,m=e.fetchPortfoliosWithState,b=e.isFetching,y=e.isFiltering,g=Object(u.useDispatch)(),v=Object(re.a)();return o.noData?null:p.a.createElement(ve.PrimaryToolbar,{dedicatedAction:p.a.createElement(Y.a,{pathname:"/portfolios/add-portfolio"},p.a.createElement(h.Button,{variant:"primary",type:"button"},v(ae.a.create))),activeFiltersConfig:{filters:Object.entries(t).filter((function(e){var t=i()(e,2)[1];return t&&t.length>0})).map((function(e){var t=i()(e,2),a=t[0],r=t[1];return{category:v(je[a]),type:a,chips:Array.isArray(r)?r.map((function(e){return{name:e}})):[{name:"sort_by"===a?v(Ee[r]):r}]}})),onDelete:function(e,l,s){var p=i()(l,1)[0];if(s)return a({type:"replaceFilterChip",payload:n.filters}),r(n.filters,o,g,(function(e){return a({type:"setFilteringFlag",payload:e})}));var u=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Oe(Object(a),!0).forEach((function(t){c()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Oe(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},t);"state"===p.type?u[p.type]=u[p.type].filter((function(e){return e!==p.chips[0].name})):u[p.type]="",a({type:"replaceFilterChip",payload:u}),r(u,o,g,(function(e){return a({type:"setFilteringFlag",payload:e})}))}},filterConfig:{onChange:function(e,t){return a({type:"setFilterType",payload:t})},value:l,items:[{filterValues:{value:t.name,onChange:function(e,t){return s(t)}},label:v(ae.a.name),value:"name"},{filterValues:{value:t.owner,onChange:function(e,t){return s(t)}},label:v(ae.a.owner),value:"owner"},{filterValues:{value:t.sort_by||"name",onChange:function(e,t){return s(t)},items:[{label:v(ae.a.name),value:"name"},{label:v(ae.a.owner),value:"owner"},{label:v(ae.a.created),value:"created_at"},{label:v(ae.a.updated),value:"updated_at"}]},placeholder:t.sort_by?v(Ee[t.sort_by]):v(ae.a.name),label:v(ae.a.sortBy),value:"sort_by",type:"radio"}]},sortByConfig:{direction:f,onSortChange:function(e,t){return d(t)}},pagination:o.count>0?p.a.createElement(ue.a,{isDisabled:b||y,meta:o,apiRequest:function(e,a){return g(m(t,a))},isCompact:!0}):void 0})};we.propTypes={filters:D.a.shape({name:D.a.string.isRequired,owner:D.a.string.isRequired,sort_by:D.a.string}).isRequired,stateDispatch:D.a.func.isRequired,debouncedFilter:D.a.func.isRequired,initialState:D.a.shape({filters:D.a.shape(c()({},D.a.string,D.a.any)).isRequired}).isRequired,meta:D.a.object.isRequired,filterType:D.a.string.isRequired,handleFilterItems:D.a.func.isRequired,sortDirection:D.a.string.isRequired,handleSort:D.a.func.isRequired,fetchPortfoliosWithState:D.a.func.isRequired,isFetching:D.a.bool.isRequired,isFiltering:D.a.bool.isRequired};var Pe=we,De=a(565);function Re(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function Fe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Re(Object(a),!0).forEach((function(t){c()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Re(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Ce=Object(pe.a)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:O.a,a=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;r(!0),a(Object(j.h)(e,t)).then((function(){return r(!1)}))}),1e3),qe={isOpen:!1,isFetching:!0,isFiltering:!1,filterType:"name",filters:{name:"",owner:"",sort_by:void 0},sortDirection:he.a.asc},_e=function(e,t){switch(t.type){case"setFetching":return Fe(Fe({},e),{},{isFetching:t.payload});case"setFilterValue":return Fe(Fe({},e),{},{filters:(a=t.payload,r=e.filterType,n=e.filters,Fe(Fe({},n),{},c()({},r,a)))});case"replaceFilterChip":return Fe(Fe({},e),{},{filters:t.payload});case"setFilteringFlag":return Fe(Fe({},e),{},{isFiltering:t.payload});case"setFilterType":return Fe(Fe({},e),{},{filterType:t.payload});case"setSortBy":return Fe(Fe({},e),{},{sortDirection:t.payload,filters:e.filters.sort_by?e.filters:Fe(Fe({},e.filters),{},{sort_by:"name"})})}var a,r,n;return e};t.default=function(){var e=Object(re.a)(),t=Object(me.a)(),a=Object(ge.a)(),r=Object(s.useReducer)(_e,Fe(Fe({},qe),null==t?void 0:t.portfolio)),o=i()(r,2),l=o[0],d=l.isFetching,b=l.isFiltering,O=l.filters,E=l.filterType,w=l.sortDirection,P=o[1],D=Object(u.useSelector)((function(e){return e.portfolioReducer.portfolios})),R=D.data,F=D.meta,C=Object(u.useDispatch)(),q=Object(s.useContext)(de.a).permissions,_=Object(f.g)();Object(s.useEffect)((function(){C(Object(j.h)(O,Fe(Fe({},F),{},{sortDirection:w}))).then((function(){return P({type:"setFetching",payload:!1})})),Object(g.c)(),insights.chrome.appNavClick({id:"portfolios",secondaryNav:!0})}),[]);var T=function(e){P({type:"setFilterValue",payload:e}),Ce(Fe(Fe({},O),{},c()({},E,e)),Fe(Fe({},F),{},{offset:0,sortDirection:w}),C,(function(e){return P({type:"setFilteringFlag",payload:e})}))};Object(s.useEffect)((function(){!a||b&&d||T(O[E])}),[w]);var S=function(e){return C(Object(j.c)(e)).then((function(e){var t=e.id;return _.push({pathname:Z.x,search:"?portfolio=".concat(t)})}))},k={PrimaryAction:F.noData?function(){return p.a.createElement(se.a,{url:Z.b,id:"create-portfolio",label:"Create portfolio",hasPermission:Object(g.a)(q,["catalog:portfolios:create"])})}:function(){return p.a.createElement(h.Button,{variant:"link",onClick:function(){return T("")}},e(be.a.clearFilters))},title:F.noData?e(ye.a.portfoliosNoData):e(be.a.noResults),description:F.noData?e(ye.a.portfoliosNoDataDescription):e(be.a.noResultsDescription),Icon:F.noData?y.a:m.a},N=R.map((function(e){return p.a.createElement(ce,n()({key:e.id},e,{handleCopyPortfolio:S}))}));return p.a.createElement(s.Fragment,null,p.a.createElement(De.b,null,p.a.createElement(De.a,{title:e(ye.a.portfoliosTitle)}),p.a.createElement(Pe,{filters:O,stateDispatch:P,debouncedFilter:Ce,initialState:qe,meta:F,filterType:E,handleFilterItems:T,sortDirection:w,handleSort:function(e){return P({type:"setSortBy",payload:e})},fetchPortfoliosWithState:j.h,isFetching:d,isFiltering:b})),p.a.createElement(v.a,{items:N,isLoading:d||b,renderEmptyState:function(){return p.a.createElement(se.b,k)}}),F.count>0&&p.a.createElement(fe.a,null,p.a.createElement(ue.a,{meta:F,apiRequest:function(e,t){return C(Object(j.h)(O,t))},dropDirection:"up"})))}}}]);
//# sourceMappingURL=../sourcemaps/portfolios~3d9b8e9e.js.map