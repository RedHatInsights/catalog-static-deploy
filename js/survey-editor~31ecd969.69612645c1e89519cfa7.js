(window.webpackJsonp=window.webpackJsonp||[]).push([[66],{671:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i(1),a=r.__importStar(i(0)),n=i(2),s=r.__importDefault(i(45));t.CardHeader=e=>{var{children:t=null,className:i=""}=e,o=r.__rest(e,["children","className"]);return a.createElement("div",Object.assign({className:n.css(s.default.cardHeader,i)},o),t)},t.CardHeader.displayName="CardHeader"},943:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Tab=()=>null,t.Tab.displayName="Tab"},944:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i(1),a=r.__importStar(i(0)),n=r.__importDefault(i(728)),s=r.__importDefault(i(29)),o=i(2),l=r.__importDefault(i(300)),c=r.__importDefault(i(298)),d=i(95),u=i(945),f=i(946),p=i(47);var h;!function(e){e.div="div",e.nav="nav"}(h=t.TabsComponent||(t.TabsComponent={}));class m extends a.Component{constructor(e){super(e),this.tabList=a.createRef(),this.handleScrollButtons=()=>{if(this.tabList.current&&!this.props.isVertical){const e=this.tabList.current,t=!d.isElementInView(e,e.firstChild,!1),i=!d.isElementInView(e,e.lastChild,!1),r=t||i,a=!t,n=!i;this.setState({showScrollButtons:r,disableLeftScrollButton:a,disableRightScrollButton:n})}},this.scrollLeft=()=>{if(this.tabList.current){const e=this.tabList.current,t=Array.from(e.children);let i,r,a;for(a=0;a<t.length&&!i;a++)d.isElementInView(e,t[a],!1)&&(i=t[a],r=t[a-1]);r&&(e.scrollLeft-=r.scrollWidth)}},this.scrollRight=()=>{if(this.tabList.current){const e=this.tabList.current,t=Array.from(e.children);let i,r;for(let a=t.length-1;a>=0&&!i;a--)d.isElementInView(e,t[a],!1)&&(i=t[a],r=t[a+1]);r&&(e.scrollLeft+=r.scrollWidth)}},this.state={showScrollButtons:!1,disableLeftScrollButton:!1,disableRightScrollButton:!1,shownKeys:[this.props.activeKey],ouiaStateId:p.getDefaultOUIAId(m.displayName)}}handleTabClick(e,t,i,r){const{shownKeys:n}=this.state;this.props.onSelect(e,t),i&&(a.Children.toArray(this.props.children).filter(e=>e.props&&e.props.tabContentRef&&e.props.tabContentRef.current).forEach(e=>e.props.tabContentRef.current.hidden=!0),i.current&&(i.current.hidden=!1)),r&&this.setState({shownKeys:n.concat(t)})}componentDidMount(){this.props.isVertical||(window.addEventListener("resize",this.handleScrollButtons,!1),this.handleScrollButtons())}componentWillUnmount(){this.props.isVertical||window.removeEventListener("resize",this.handleScrollButtons,!1)}componentDidUpdate(e){const{activeKey:t,mountOnEnter:i}=this.props,{shownKeys:r}=this.state;e.activeKey!==t&&i&&r.indexOf(t)<0&&this.setState({shownKeys:r.concat(t)})}render(){const e=this.props,{className:t,children:i,activeKey:b,id:E,isFilled:v,isSecondary:I,isVertical:S,isBox:_,leftScrollAriaLabel:L,rightScrollAriaLabel:y,"aria-label":O,component:P,ouiaId:g,ouiaSafe:T,mountOnEnter:C,unmountOnExit:A,inset:D}=e,B=r.__rest(e,["className","children","activeKey","id","isFilled","isSecondary","isVertical","isBox","leftScrollAriaLabel","rightScrollAriaLabel","aria-label","component","ouiaId","ouiaSafe","mountOnEnter","unmountOnExit","inset"]),{showScrollButtons:R,disableLeftScrollButton:j,disableRightScrollButton:N,shownKeys:M}=this.state,w=E||d.getUniqueId(),H=P===h.nav?"nav":"div";return a.createElement(a.Fragment,null,a.createElement(H,Object.assign({"aria-label":O,className:o.css(n.default.tabs,v&&n.default.modifiers.fill,I&&n.default.modifiers.secondary,S&&n.default.modifiers.vertical,_&&n.default.modifiers.box,R&&!S&&n.default.modifiers.scrollable,d.formatBreakpointMods(D,n.default),t)},p.getOUIAProps(m.displayName,void 0!==g?g:this.state.ouiaStateId,T),{id:E&&E},B),a.createElement("button",{className:o.css(n.default.tabsScrollButton,I&&s.default.modifiers.secondary),"aria-label":L,onClick:this.scrollLeft,disabled:j,"aria-hidden":j},a.createElement(l.default,null)),a.createElement("ul",{className:o.css(n.default.tabsList),ref:this.tabList,onScroll:this.handleScrollButtons},a.Children.toArray(i).filter(Boolean).map((e,t)=>{const i=e.props,{title:s,eventKey:l,tabContentRef:c,id:d,tabContentId:f,isHidden:p=!1,className:h="",ouiaId:m}=i,E=r.__rest(i,["title","eventKey","tabContentRef","id","tabContentId","isHidden","className","ouiaId"]);return p?null:a.createElement("li",{key:t,className:o.css(n.default.tabsItem,l===b&&n.default.modifiers.current,h)},a.createElement(u.TabButton,Object.assign({className:o.css(n.default.tabsLink),onClick:e=>this.handleTabClick(e,l,c,C),id:`pf-tab-${l}-${d||w}`,"aria-controls":f?""+f:`pf-tab-section-${l}-${d||w}`,tabContentRef:c,ouiaId:m},E),s))})),a.createElement("button",{className:o.css(n.default.tabsScrollButton,I&&s.default.modifiers.secondary),"aria-label":y,onClick:this.scrollRight,disabled:N,"aria-hidden":N},a.createElement(c.default,null))),a.Children.toArray(i).filter(e=>e&&e.props.children&&!(A&&e.props.eventKey!==b)&&!(C&&-1===M.indexOf(e.props.eventKey))).map((e,t)=>a.createElement(f.TabContent,{key:t,activeKey:b,child:e,id:e.props.id||w,ouiaId:e.props.ouiaId})))}}t.Tabs=m,m.displayName="Tabs",m.defaultProps={activeKey:0,onSelect:()=>{},isFilled:!1,isSecondary:!1,isVertical:!1,isBox:!1,leftScrollAriaLabel:"Scroll left",rightScrollAriaLabel:"Scroll right",component:h.div,mountOnEnter:!1,unmountOnExit:!1,ouiaSafe:!0}},945:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i(1),a=r.__importStar(i(0)),n=i(47);t.TabButton=e=>{var{children:i,tabContentRef:s,ouiaId:o,ouiaSafe:l}=e,c=r.__rest(e,["children","tabContentRef","ouiaId","ouiaSafe"]);const d=c.href?"a":"button";return a.createElement(d,Object.assign({},n.getOUIAProps(t.TabButton.displayName,o,l),c),i)},t.TabButton.displayName="TabButton"},946:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i(1),a=r.__importStar(i(0)),n=i(2),s=i(47),o=e=>{var{id:t,activeKey:i,"aria-label":o,child:l,children:c,className:d,eventKey:u,innerRef:f,ouiaId:p,ouiaSafe:h}=e,m=r.__rest(e,["id","activeKey","aria-label","child","children","className","eventKey","innerRef","ouiaId","ouiaSafe"]);if(c||l){let e;return e=o?null:c?`pf-tab-${u}-${t}`:`pf-tab-${l.props.eventKey}-${t}`,a.createElement("section",Object.assign({ref:f,hidden:c?null:l.props.eventKey!==i,className:c?n.css("pf-c-tab-content",d):n.css("pf-c-tab-content",l.props.className),id:c?t:`pf-tab-section-${l.props.eventKey}-${t}`,"aria-label":o,"aria-labelledby":e,role:"tabpanel",tabIndex:0},s.getOUIAProps("TabContent",p,h),m),c||l.props.children)}return null};t.TabContent=a.forwardRef((e,t)=>a.createElement(o,Object.assign({},e,{innerRef:t})))},947:function(e,t,i){"use strict";t.__esModule=!0,t.TimesIconConfig={name:"TimesIcon",height:512,width:352,svgPath:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z",yOffset:0,xOffset:0},t.TimesIcon=i(76).createIcon(t.TimesIconConfig),t.default=t.TimesIcon},948:function(e,t,i){"use strict";t.__esModule=!0,t.GripVerticalIconConfig={name:"GripVerticalIcon",height:512,width:320,svgPath:"M96 32H32C14.33 32 0 46.33 0 64v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32V64c0-17.67-14.33-32-32-32zm0 160H32c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32v-64c0-17.67-14.33-32-32-32zm0 160H32c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32v-64c0-17.67-14.33-32-32-32zM288 32h-64c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32V64c0-17.67-14.33-32-32-32zm0 160h-64c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32v-64c0-17.67-14.33-32-32-32zm0 160h-64c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32v-64c0-17.67-14.33-32-32-32z",yOffset:0,xOffset:0},t.GripVerticalIcon=i(76).createIcon(t.GripVerticalIconConfig),t.default=t.GripVerticalIcon},949:function(e,t,i){"use strict";t.__esModule=!0,t.EyeSlashIconConfig={name:"EyeSlashIcon",height:512,width:640,svgPath:"M320 400c-75.85 0-137.25-58.71-142.9-133.11L72.2 185.82c-13.79 17.3-26.48 35.59-36.72 55.59a32.35 32.35 0 0 0 0 29.19C89.71 376.41 197.07 448 320 448c26.91 0 52.87-4 77.89-10.46L346 397.39a144.13 144.13 0 0 1-26 2.61zm313.82 58.1l-110.55-85.44a331.25 331.25 0 0 0 81.25-102.07 32.35 32.35 0 0 0 0-29.19C550.29 135.59 442.93 64 320 64a308.15 308.15 0 0 0-147.32 37.7L45.46 3.37A16 16 0 0 0 23 6.18L3.37 31.45A16 16 0 0 0 6.18 53.9l588.36 454.73a16 16 0 0 0 22.46-2.81l19.64-25.27a16 16 0 0 0-2.82-22.45zm-183.72-142l-39.3-30.38A94.75 94.75 0 0 0 416 256a94.76 94.76 0 0 0-121.31-92.21A47.65 47.65 0 0 1 304 192a46.64 46.64 0 0 1-1.54 10l-73.61-56.89A142.31 142.31 0 0 1 320 112a143.92 143.92 0 0 1 144 144c0 21.63-5.29 41.79-13.9 60.11z",yOffset:0,xOffset:0},t.EyeSlashIcon=i(76).createIcon(t.EyeSlashIconConfig),t.default=t.EyeSlashIcon},950:function(e,t,i){"use strict";t.__esModule=!0,t.ExclamationCircleIconConfig={name:"ExclamationCircleIcon",height:512,width:512,svgPath:"M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z",yOffset:0,xOffset:0},t.ExclamationCircleIcon=i(76).createIcon(t.ExclamationCircleIconConfig),t.default=t.ExclamationCircleIcon},951:function(e,t,i){"use strict";t.__esModule=!0,t.TrashRestoreIconConfig={name:"TrashRestoreIcon",height:512,width:448,svgPath:"M53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32zm70.11-175.8l89.38-94.26a15.41 15.41 0 0 1 22.62 0l89.38 94.26c10.08 10.62 2.94 28.8-11.32 28.8H256v112a16 16 0 0 1-16 16h-32a16 16 0 0 1-16-16V320h-57.37c-14.26 0-21.4-18.18-11.32-28.8zM432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16z",yOffset:0,xOffset:0},t.TrashRestoreIcon=i(76).createIcon(t.TrashRestoreIconConfig),t.default=t.TrashRestoreIcon},977:function(e,t,i){"use strict";i.r(t);var r,a=i(591),n=i.n(a),s=i(96),o=i.n(s),l=i(616),c=i.n(l),d=i(135),u=i.n(d),f=i(0),p=i.n(f),h=i(13),m=i.n(h),b=i(83),E=i(35),v=i.n(E),I=i(940),S=i.n(I),_=i(941),L=i(182),y=i(23),O=i(4),P=i(249),g=i(818),T=i(18),C=i(109),A=i(183),D=i(25),B=i.n(D);function R(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,r)}return i}function j(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?R(Object(i),!0).forEach((function(t){u()(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):R(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var N=(r={},u()(r,v.a.TEXT_FIELD,{attributes:[_.fieldProperties.LABEL,_.fieldProperties.HELPER_TEXT,_.fieldProperties.PLACEHOLDER,_.fieldProperties.IS_DISABLED,_.fieldProperties.IS_READ_ONLY,_.fieldProperties.HIDE_FIELD]}),u()(r,v.a.CHECKBOX,{attributes:[_.fieldProperties.LABEL,_.fieldProperties.IS_DISABLED,_.fieldProperties.OPTIONS,_.fieldProperties.HIDE_FIELD]}),u()(r,v.a.SELECT,{attributes:[_.fieldProperties.OPTIONS,_.fieldProperties.LABEL,_.fieldProperties.IS_DISABLED,_.fieldProperties.PLACEHOLDER,_.fieldProperties.HELPER_TEXT,_.fieldProperties.HIDE_FIELD]}),u()(r,v.a.DATE_PICKER,{attributes:[_.fieldProperties.LABEL,_.fieldProperties.TODAY_BUTTON_LABEL,_.fieldProperties.IS_CLEARABLE,_.fieldProperties.CLOSE_ON_DAY_SELECT,_.fieldProperties.SHOW_TODAY_BUTTON,_.fieldProperties.HIDE_FIELD]}),u()(r,v.a.PLAIN_TEXT,{attributes:[_.fieldProperties.MULTI_LINE_LABEL]}),u()(r,v.a.RADIO,{attributes:[_.fieldProperties.LABEL,_.fieldProperties.IS_DISABLED,_.fieldProperties.OPTIONS,_.fieldProperties.HIDE_FIELD]}),u()(r,v.a.SWITCH,{attributes:[_.fieldProperties.LABEL,_.fieldProperties.IS_READ_ONLY,_.fieldProperties.IS_DISABLED,_.fieldProperties.HIDE_FIELD]}),u()(r,v.a.TEXTAREA,{attributes:[_.fieldProperties.LABEL,_.fieldProperties.HELPER_TEXT,_.fieldProperties.IS_READ_ONLY,_.fieldProperties.IS_DISABLED,_.fieldProperties.HIDE_FIELD]}),r);N["select-field"]=N[v.a.SELECT],N["textarea-field"]=N[v.a.TEXTAREA];var M={componentMapper:j({},A.a),builderMapper:j({},_.builderMapper),pickerMapper:j(j({},_.pickerMapper),{},{"select-field":_.pickerMapper[v.a.SELECT],"textarea-field":_.pickerMapper[v.a.TEXTAREA]}),propertiesMapper:_.propertiesMapper,componentProperties:N},w=function(e){var t=j({},e);return t.fields=t.fields.map((function(e){var t=e.validate,i=c()(e,["validate"]);return t?j(j({},i),{},{validate:t.map((function(e){var t=e.type;return j(j({},c()(e,["type"])),{},{type:A.b[t]||t})}))}):i})),t},H=function(e){return p.a.createElement(S.a,e)},K=function(e){var t=e.closeUrl,i=e.search,r=e.portfolioItem,a=Object(f.useState)(),s=o()(a,2),l=s[0],d=s[1],u=Object(f.useState)(!1),h=o()(u,2),m=h[0],E=h[1],v=Object(f.useState)(),I=o()(v,2),S=I[0],A=I[1],D=Object(f.useState)(),R=o()(D,2),N=R[0],K=R[1],V=Object(f.useState)(0),x=o()(V,2),U=x[0],k=x[1],z=Object(T.useDispatch)(),F=Object(b.g)().push,X=function(){return Object(y.a)().get("".concat(O.e,"/portfolio_items/").concat(r.id,"/service_plans")).then((function(e){var t=o()(e,1)[0].create_json_schema.schema;return K(e[0]),e[0].imported?Object(y.a)().get("".concat(O.e,"/service_plans/").concat(e[0].id,"/base")).then((function(e){return A(w(e.create_json_schema.schema)),w(t)})):w(t)})).then((function(e){d(e),E(!1)}))};Object(f.useEffect)((function(){X()}),[]);var $=function(e){return Object(y.i)().patchServicePlanModified("".concat(N.id),{modified:{schema:e}})},q=function(e){return Object(y.i)().createServicePlan({portfolio_item_id:r.id}).then((function(e){return o()(e,1)[0].id})).then((function(t){return Object(y.i)().patchServicePlanModified("".concat(t),{modified:{schema:e}})}))},Y=function(e){return E(!0),(N.imported?$:q)(function(e){var t=j({},e);return t.fields=t.fields.map((function(e){var t=e.validate,i=c()(e,["validate"]);return t?j(j({},i),{},{validate:t.map((function(e){var t=e.type;return j(j({},c()(e,["type"])),{},{type:t!==B.a.MAX_NUMBER_VALUE&&t!==B.a.MIN_NUMBER_VALUE?"".concat(t,"-validator"):t})}))}):i})),t}(e)).then((function(){return E(!1),z(Object(C.addNotification)({variant:"success",title:"Survey of ".concat(r.name," has been modified."),dismissable:!0})),F({pathname:t,search:i})})).catch((function(e){E(!1),z({type:"EDIT_SURVEY_REJECTED",payload:e})}))};return p.a.createElement(f.Fragment,null,l?[p.a.createElement(H,n()({},M,{key:U,schema:l,disableDrag:!0,disableAdd:!0,schemaTemplate:S,mode:"subset",openEditor:!0}),(function(e){var a=e.getSchema,n=e.isValid,s=c()(e,["getSchema","isValid"]);return p.a.createElement(f.Fragment,null,p.a.createElement(g.b,{key:"survey-editor-toolbar",handleSaveSurvey:function(){return Y(a())},isValid:n,closeUrl:t,search:i,isFetching:m||!l,modified:null==N?void 0:N.modified,handleResetSurvey:function(){return e=N.id,d(void 0),void Object(y.i)().resetServicePlanModified(e).then(X).then((function(){return k((function(e){return e+1})),z(Object(C.addNotification)({variant:"success",title:"Survey of ".concat(r.name," has been restored."),dismissable:!0}))}));var e}}),p.a.createElement(_.BuilderTemplate,s),";")}))]:p.a.createElement(f.Fragment,null,p.a.createElement(g.b,{handleSaveSurvey:Y,closeUrl:t,search:i,isFetching:!l||m}),p.a.createElement(P.Bullseye,null,p.a.createElement(L.Spinner,null))))};K.propTypes={closeUrl:m.a.string.isRequired,search:m.a.string.isRequired,portfolioItem:m.a.shape({id:m.a.string.isRequired,name:m.a.string.isRequired}).isRequired,portfolio:m.a.object.isRequired},t.default=K}}]);
//# sourceMappingURL=../sourcemaps/survey-editor~31ecd969.js.map