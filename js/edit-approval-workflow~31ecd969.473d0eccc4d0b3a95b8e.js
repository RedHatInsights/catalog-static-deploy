(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{639:function(e,t){function n(){return e.exports=n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},n.apply(this,arguments)}e.exports=n},641:function(e,t,n){"use strict";var o=n(658),r=n.n(o);function c(e){var t=null,n=null,o=new Promise((function(e,o){t=e,n=o}));return e&&e.then((function(e){t&&t(e)}),(function(e){n&&n(e)})),{promise:o,resolve:function(e){t&&t(e)},reject:function(e){n&&n(e)},cancel:function(){t=null,n=null}}}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var a=function(){return(a=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},i={key:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return null},onlyResolvesLast:!0},u=function(){function e(e){this.config=e,this.debounceSingleton=null,this.debounceCache={}}return e.prototype._createDebouncedFunction=function(){var e,t,n=r()(this.config.func,this.config.wait,this.config.options);return this.config.options.onlyResolvesLast&&(e=n,t=null,n=function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];t&&t();var r=e.apply(void 0,n),a=c(r),i=a.promise,u=a.cancel;return t=u,i}),{func:n}},e.prototype.getDebouncedFunction=function(e){var t,n=(t=this.config.options).key.apply(t,e);return null==n?(this.debounceSingleton||(this.debounceSingleton=this._createDebouncedFunction()),this.debounceSingleton):(this.debounceCache[n]||(this.debounceCache[n]=this._createDebouncedFunction()),this.debounceCache[n])},e}();t.a=function(e,t,n){var o=a({},i,n),r=new u({func:e,wait:t,options:o});return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=r.getDebouncedFunction(e).func;return n.apply(void 0,e)}}},642:function(e,t,n){"use strict";var o=n(641);t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{onlyResolvesLast:!1};return Object(o.a)(e,t,n)}},658:function(e,t,n){"use strict";var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function r(e){return"function"==typeof e?e():e}function c(){var e={};return e.promise=new Promise((function(t,n){e.resolve=t,e.reject=n})),e}e.exports=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=void 0,i=void 0,u=void 0,l=[];return function(){var f,p=r(t),b=(new Date).getTime(),h=!a||b-a>p;a=b;for(var m=arguments.length,y=Array(m),d=0;d<m;d++)y[d]=arguments[d];if(h&&n.leading)return n.accumulate?Promise.resolve(e.call(this,[y])).then((function(e){return e[0]})):Promise.resolve(e.call.apply(e,[this].concat(y)));if(i?clearTimeout(u):i=c(),l.push(y),u=setTimeout(s.bind(this),p),n.accumulate){var v=(f=l.length-1,{v:i.promise.then((function(e){return e[f]}))});if("object"===(void 0===v?"undefined":o(v)))return v.v}return i.promise};function s(){var t=i;clearTimeout(u),Promise.resolve(n.accumulate?e.call(this,l):e.apply(this,l[l.length-1])).then(t.resolve,t.reject),l=[],i=null}}},661:function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(t){return"function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?e.exports=o=function(e){return n(e)}:e.exports=o=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":n(e)},o(t)}e.exports=o},664:function(e,t,n){"use strict";var o=n(2),r=n.n(o),c=n(661),a=n.n(c),i=n(60);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var s=function(e){return"string"==typeof e?e.split("?")[0]:"object"===a()(e)?l(l({},e),{},{search:void 0}):e};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.removeSearch,n=e.keepHash,o=Object(i.g)();return l(l({},o),{},{push:function(e){var r=e;return n&&o.location.hash.length>0&&(r="object"===a()(r)?l(l({},r),{},{hash:o.location.hash}):"".concat(r).concat(o.location.hash)),t?o.push(s(r)):o.push(r)}})}},703:function(e,t,n){"use strict";var o=n(0),r=n(164),c=n(119),a=n(8),i=n(118),u=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&(n[o[r]]=e[o[r]])}return n};const l=n.n(i).a||i,s=(e,t)=>Object(c.b)(Object.assign({},a.a,{locale:"en"}),Object(a.c)(),e,t);class f extends o.Component{shouldComponentUpdate(e){const t=this.props,{values:n}=t,o=u(t,["values"]),{values:r}=e,c=u(e,["values"]);return!l(r,n)||!l(o,c)}render(){return o.createElement(r.a.Consumer,null,e=>{this.props.defaultMessage||Object(a.h)(e);const{formatMessage:t=s,textComponent:n=o.Fragment}=e||{},{id:r,description:c,defaultMessage:i,values:u,children:l,tagName:f=n}=this.props;let p=t({id:r,description:c,defaultMessage:i},u);return Array.isArray(p)||(p=[p]),"function"==typeof l?l(...p):f?o.createElement(f,null,...p):p})}}f.displayName="FormattedMessage",f.defaultProps={values:{}},t.a=f},722:function(e,t,n){"use strict";n.r(t);var o=n(39),r=n.n(o),c=n(2),a=n.n(c),i=n(0),u=n.n(i),l=n(1),s=n.n(l),f=n(33),p=n(578),b=n(73),h=n(44),m=n(583),y=n(584),d=n(668),v=n(651),g=n.n(v),O=n(642),j=function(e){return{fields:[{component:g.a.SELECT,name:"selectedWorkflows",label:"",loadOptions:Object(O.a)(e),multi:!0,isSearchable:!0,isClearable:!0}]}},w=n(21),S=n.n(w),P=n(703),k=n(70),E=n(111),D=n(12),F=n(74),x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=t.map((function(e){return"filter[id][]=".concat(e)})).join("&");return Object(E.a)().get("".concat(D.a,"/workflows?filter[name][contains]=").concat(e,"&").concat(n||"")).then((function(e){return e.data.map((function(e){var t=e.id;return{label:e.name,value:t}}))}))},C=function(e,t,n){var o=e?e.map((function(e){return Object(E.i)().unlinkWorkflow(e,n)})):[],r=t?t.map((function(e){return Object(E.i)().linkWorkflow(e,n)})):[];return Promise.all([].concat(S()(o),S()(r)))},T=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{limit:F.a.limit,offset:F.a.offset},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o="app_name=".concat(e.appName,"&object_type=").concat(e.objectType,"&object_id=").concat(e.objectId),r="&limit=".concat(t.limit,"&offset=").concat(t.offset),c="&filter[name][contains]=".concat(n);return Object(E.a)().get("".concat(D.a,"/workflows?").concat(o).concat(c).concat(r))},_=n(148),R=n(76),W=n(77),L=n(664);function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var q={isFetching:!0},I=function(e,t){switch(t.type){case"setFetching":return N(N({},e),{},{isFetching:t.payload});default:return e}},H=function(e){var t=e.objectType,n=e.removeQuery,o=e.keepHash,c=e.querySelector,a=e.pushParam,l=e.objectName,s=void 0===l?function(){return t}:l,v=Object(i.useReducer)(I,q),g=r()(v,2),O=g[0].isFetching,w=g[1],S=Object(f.useSelector)((function(e){return e.approvalReducer.resolvedWorkflows})),E=S.data,M=S.meta,N=Object(f.useDispatch)(),H=Object(L.a)({removeQuery:n,keepHash:o}),A=Object(W.a)([c]),Q=r()(A,1)[0];Object(i.useEffect)((function(){N(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{limit:F.a.limit,offset:F.a.offset},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return{type:k.a.RESOLVE_WORKFLOWS,payload:T(e,t,n)}}({objectType:t,appName:D.b[t],objectId:Q[c]},M)).then((function(){return w({type:"setFetching",payload:!1})}))}),[]);return u.a.createElement(p.Modal,{title:"Set approval process",isOpen:!0,onClose:function(){return H.push(a)},isSmall:!0},O&&u.a.createElement(R.i,null),!O&&u.a.createElement(m.Stack,{gutter:"md"},u.a.createElement(y.StackItem,null,u.a.createElement(b.TextContent,null,u.a.createElement(h.Text,null,"Select approval processes for"," ",u.a.createElement("strong",null,s(Q[c]))))),u.a.createElement(y.StackItem,null,u.a.createElement(d.b,{initialValues:{selectedWorkflows:E?E.map((function(e){return e.id})):void 0},onSubmit:function(e,n){var o=n.getState().initialValues.selectedWorkflows||[],r=e.selectedWorkflows||[];H.push(a);var l,s,f,p=o.filter((function(e){return r.findIndex((function(t){return t===e}))<0})),b=r.filter((function(e){return o.findIndex((function(t){return t===e}))<0}));(p.length>0||b.length>0)&&N((l=p,s=b,f={object_type:t,app_name:D.b[t],object_id:Q[c]},function(e){return e({type:k.a.UPDATE_WORKFLOWS,payload:C(l,s,f).then((function(){return e(Object(_.addNotification)({variant:"success",title:"Success updating approval process",dismissable:!0,description:u.a.createElement(i.Fragment,null,l.length>0?u.a.createElement(P.a,{id:"workflows.update_workflows",defaultMessage:"{count, number} {count, plural, one {approval process was}\n                    other {approval processes were}} unlinked successfully. ",values:{count:l.length}}):"",s.length>0?u.a.createElement(P.a,{id:"workflows.update_workflows",defaultMessage:"{count, number} {count, plural, one {approval process was}\n                    other {approval processes were}} linked successfully.",values:{count:s.length}}):"")}))}))})}))},onCancel:function(){return H.push(a)},schema:j(x),formContainer:"modal",buttonsLabels:{submitLabel:"Save"}}))))};H.propTypes={pushParam:s.a.oneOfType([s.a.string,s.a.shape({pathname:s.a.string.isRequired,search:s.a.string})]).isRequired,objectType:s.a.string.isRequired,objectName:s.a.func,removeQuery:s.a.bool,querySelector:s.a.oneOf(["portfolio","platform","inventory","portfolio-item"]).isRequired,keepHash:s.a.bool},H.defaultProps={keepHash:!1};t.default=H}}]);
//# sourceMappingURL=../sourcemaps/edit-approval-workflow~31ecd969.js.map