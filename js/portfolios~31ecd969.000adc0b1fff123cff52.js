(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{366:function(e,t,o){"use strict";var r=o(367);t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{onlyResolvesLast:!1};return Object(r.a)(e,t,o)}},433:function(e,t,o){"use strict";t.__esModule=!0,t.WrenchIconConfig={name:"WrenchIcon",height:512,width:512,svgPath:"M507.73 109.1c-2.24-9.03-13.54-12.09-20.12-5.51l-74.36 74.36-67.88-11.31-11.31-67.88 74.36-74.36c6.62-6.62 3.43-17.9-5.66-20.16-47.38-11.74-99.55.91-136.58 37.93-39.64 39.64-50.55 97.1-34.05 147.2L18.74 402.76c-24.99 24.99-24.99 65.51 0 90.5 24.99 24.99 65.51 24.99 90.5 0l213.21-213.21c50.12 16.71 107.47 5.68 147.37-34.22 37.07-37.07 49.7-89.32 37.91-136.73zM64 472c-13.25 0-24-10.75-24-24 0-13.26 10.75-24 24-24s24 10.74 24 24c0 13.25-10.75 24-24 24z",yOffset:0,xOffset:0,transform:""},t.WrenchIcon=o(168).createIcon(t.WrenchIconConfig),t.default=t.WrenchIcon},682:function(e,t,o){"use strict";o.r(t);var r=o(364),a=o.n(r),n=o(31),i=o.n(n),l=o(1),c=o.n(l),s=o(0),p=o.n(s),u=o(23),f=o(40),m=o(385),d=o.n(m),b=o(433),h=o.n(b),O=o(50),y=o(91),g=o(392),v=o(401),j=o(49),E=o(382),P=o(47),w=o.n(P),D=o(10),C=o.n(D),k=o(395),T=o(383),R=o(399),F=o(171),I=o(170),L=o(26),_=o(175),N=o(35),q=o(48),V=o(98),x=o(21),S=o.n(x),A=o(36),B=o(64),H=o(169),M=o(396),W=o(22);function U(){var e=S()(["\n  width: 100%;\n"]);return U=function(){return e},e}function z(){var e=S()(["\n  max-width: calc(100% - 44px);\n"]);return z=function(){return e},e}var J=Object(W.b)(H.LevelItem)(z()),K=Object(W.b)(B.Level)(U()),G=function(e){var t=e.id,o=e.to,r=e.portfolioName,a=e.headerActions;return p.a.createElement(K,null,p.a.createElement(J,{className:"pf-m-grow"},p.a.createElement(q.TextContent,null,p.a.createElement(A.a,{to:o,id:"portfolio-link-".concat(t)},p.a.createElement(N.Text,{title:r,className:"pf-u-mb-0",component:N.TextVariants.h3},p.a.createElement(M.a,null,r))))),p.a.createElement(H.LevelItem,{onClick:function(e){return e.preventDefault()}},a))};G.propTypes={portfolioName:C.a.string.isRequired,headerActions:C.a.node,id:C.a.string,to:C.a.shape({pathname:C.a.string.isRequired,search:C.a.string.isRequired}).isRequired},G.defaultProps={headerActions:[]};var Q=G,X=o(371),Y=o(9),Z=o(398),$=o(397);function ee(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}var te=["description"],oe=function(e){var t=e.portfolioId,o=e.handleCopyPortfolio,r=e.userCapabilities,a=r.share,n=r.copy,l=r.unshare,c=r.update,u=r.destroy,f=r.set_approval,m=Object(s.useState)(!1),d=i()(m,2),b=d[0],h=d[1],O=[];return(a||l)&&O.push(p.a.createElement(I.DropdownItem,{key:"share-portfolio-action",id:"share-portfolio-action",component:p.a.createElement(X.a,{searchParams:{portfolio:t},pathname:Y.w,preserveHash:!0},"Share")})),n&&O.push(p.a.createElement(I.DropdownItem,{key:"copy-portfolio-action",id:"copy-portfolio-action",onClick:function(){return o(t)}},"Copy")),f&&O.push(p.a.createElement(I.DropdownItem,{key:"workflow-portfolio-action",id:"workflow-portfolio-action",component:p.a.createElement(X.a,{searchParams:{portfolio:t},pathname:Y.d,preserveHash:!0},"Set approval")})),c&&O.push(p.a.createElement(I.DropdownItem,{key:"edit-portfolio-action",id:"edit-portfolio-action",component:p.a.createElement(X.a,{searchParams:{portfolio:t},pathname:Y.c,preserveHash:!0},"Edit")})),u&&O.push(p.a.createElement(I.DropdownItem,{key:"remove-portfolio-action",id:"remove-portfolio-action",component:p.a.createElement(X.a,{searchParams:{portfolio:t},pathname:Y.v,preserveHash:!0},"Delete")})),0===O.length?null:p.a.createElement(F.Dropdown,{key:"portfolio-dropdown",id:"portfolio-".concat(t,"-dropdown"),isOpen:b,isPlain:!0,onSelect:function(){return h(!1)},position:L.DropdownPosition.right,toggle:p.a.createElement(_.KebabToggle,{id:"portfolio-".concat(t,"-toggle"),onToggle:function(e){return h(e)}}),dropdownItems:O})};oe.propTypes={portfolioId:C.a.string.isRequired,userCapabilities:C.a.shape({destroy:C.a.bool,update:C.a.bool,share:C.a.bool,unshare:C.a.bool,set_approval:C.a.bool,copy:C.a.bool}).isRequired,handleCopyPortfolio:C.a.func.isRequired};var re=function(e){var t=e.imageUrl,o=e.isDisabled,r=e.name,n=e.id,i=e.handleCopyPortfolio,l=e.metadata.user_capabilities,s=w()(e,["imageUrl","isDisabled","name","id","handleCopyPortfolio","metadata"]),u={pathname:Y.u,search:"?portfolio=".concat(n)};return p.a.createElement(Z.b,{isDisabled:o},p.a.createElement(Z.a,null,p.a.createElement(T.CardHeader,null,p.a.createElement(Q,{id:n,to:u,portfolioName:r,headerActions:p.a.createElement(oe,{portfolioId:n,userCapabilities:l,handleCopyPortfolio:i})})),p.a.createElement($.a,null,p.a.createElement(q.TextContent,{className:"pf-u-mb-md"},p.a.createElement(N.Text,{component:N.TextVariants.small,className:"pf-i-mb-sm"},"Last updatedÂ ",p.a.createElement(V.DateFormat,{date:s.updated_at||s.created_at,type:"relative"})),p.a.createElement(N.Text,{component:N.TextVariants.small},s.owner)),p.a.createElement(k.a,a()({},function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(o),!0).forEach((function(t){c()(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ee(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}({name:r,imageUrl:t},s),{toDisplay:te}))),p.a.createElement(R.CardFooter,null)))};re.propTypes={history:C.a.object,imageUrl:C.a.string,name:C.a.string,id:C.a.string.isRequired,updated_at:C.a.string,created_at:C.a.string.isRequired,owner:C.a.string,isDisabled:C.a.bool,metadata:C.a.shape({user_capabilities:C.a.object.isRequired}).isRequired,handleCopyPortfolio:C.a.func.isRequired};var ae=re,ne=o(390),ie=o(432),le=o(369);function ce(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function se(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(o),!0).forEach((function(t){c()(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ce(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var pe=function(e){var t=e.meta,o=e.fetchPortfolios,r=e.userPermissions,a=e.filterProps,n=a.searchValue,i=a.onFilterChange,l=a.placeholder;return{fields:[{component:ne.b.TOP_TOOLBAR,key:"portfolios-top-toolbar",fields:[{component:ne.b.TOP_TOOLBAR_TITLE,key:"portfolios-toolbar-title",title:"Portfolios",noData:t.noData},{component:ne.b.LEVEL,key:"portfolios-actions",fields:t.noData?[]:[{component:ne.b.TOOLBAR,key:"main-portfolio-toolbar",fields:[Object(ie.b)({groupName:"filter-group",component:ne.b.FILTER_TOOLBAR_ITEM,key:"filter-input",searchValue:n,onFilterChange:i,placeholder:l,isClearable:!0}),Object(ie.b)(se({hidden:0===t.count||!Object(y.a)(r,["catalog:portfolios:create"]),groupName:"portfolio-button-group",key:"create-portfolio"},Object(ie.a)({pathname:"/portfolios/add-portfolio",variant:"primary",key:"create-portfolio-button","aria-label":"Create portfolio",title:"Create"})))]},{component:ne.b.LEVEL_ITEM,key:"pagination-item",fields:t.count>0?[{component:le.a,isCompact:!0,key:"portfolios-pagination",meta:t,apiRequest:o}]:[]}]}]}]}},ue=o(387),fe=o(366),me=o(402),de=o(56),be=o(104);function he(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function Oe(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?he(Object(o),!0).forEach((function(t){c()(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):he(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var ye=Object(fe.a)((function(e,t,o){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:j.a;o(!0),t(Object(E.h)(Oe(Oe({},r),{},{filter:e}))).then((function(){return o(!1)}))}),1e3),ge={filterValue:"",isOpen:!1,isFetching:!0,isFiltering:!1},ve=function(e,t){switch(t.type){case"setFetching":return Oe(Oe({},e),{},{isFetching:t.payload});case"setFilterValue":return Oe(Oe({},e),{},{filterValue:t.payload});case"setFilteringFlag":return Oe(Oe({},e),{},{isFiltering:t.payload})}return e};t.default=function(){var e,t=Object(be.a)(),o=Object(s.useReducer)(ve,Oe(Oe({},ge),{},{filterValue:(null==t||null===(e=t.portfolio)||void 0===e?void 0:e.filter)||""})),r=i()(o,2),n=r[0],l=n.filterValue,c=n.isFetching,m=n.isFiltering,b=r[1],j=Object(u.useSelector)((function(e){return e.portfolioReducer.portfolios})),P=j.data,w=j.meta,D=Object(u.useDispatch)(),C=Object(s.useContext)(de.a).permissions,k=Object(f.g)();Object(s.useEffect)((function(){D(Object(E.h)(null==t?void 0:t.portfolio)).then((function(){return b({type:"setFetching",payload:!1})})),Object(y.c)(),insights.chrome.appNavClick({id:"portfolios",secondaryNav:!0})}),[]);var T=function(e){b({type:"setFilterValue",payload:e}),ye(e,D,(function(e){return b({type:"setFilteringFlag",payload:e})}),Oe(Oe({},w),{},{offset:0}))},R=function(e){return D(Object(E.c)(e)).then((function(e){var t=e.id;return k.push({pathname:Y.u,search:"?portfolio=".concat(t)})}))},F={PrimaryAction:w.noData?function(){return p.a.createElement(ue.a,{url:Y.a,id:"create-portfolio",label:"Create portfolio",hasPermission:Object(y.a)(C,["catalog:portfolios:create"])})}:function(){return p.a.createElement(O.Button,{variant:"link",onClick:function(){return T("")}},"Clear all filters")},title:w.noData?"No portfolios":"No results found",description:w.noData?"No portfolios match your filter criteria.":"No results match the filter criteria. Remove all filters or clear all filters to show results.",Icon:w.noData?h.a:d.a},I=P.map((function(e){return p.a.createElement(ae,a()({key:e.id},e,{handleCopyPortfolio:R}))}));return p.a.createElement(s.Fragment,null,p.a.createElement(g.a,{schema:pe({meta:w,userPermissions:C,fetchPortfolios:function(e,t){return D(Object(E.h)(Oe({filter:l},t)))},filterProps:{searchValue:l,onFilterChange:T,placeholder:"Filter by portfolio"}})}),p.a.createElement(v.a,{items:I,isLoading:c||m,renderEmptyState:function(){return p.a.createElement(ue.b,F)}}),w.count>0&&p.a.createElement(me.a,null,p.a.createElement(le.a,{meta:w,apiRequest:function(e,t){return D(Object(E.h)(Oe({filter:l},t)))},dropDirection:"up"})))}}}]);
//# sourceMappingURL=../sourcemaps/portfolios~31ecd969.js.map