(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{547:function(t,e){function n(){return t.exports=n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},n.apply(this,arguments)}t.exports=n},549:function(t,e,n){"use strict";var o=n(566),r=n.n(o);function i(t){var e=null,n=null,o=new Promise((function(t,o){e=t,n=o}));return t&&t.then((function(t){e&&e(t)}),(function(t){n&&n(t)})),{promise:o,resolve:function(t){e&&e(t)},reject:function(t){n&&n(t)},cancel:function(){e=null,n=null}}}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var u=function(){return(u=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},c={key:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return null},onlyResolvesLast:!0},a=function(){function t(t){this.config=t,this.debounceSingleton=null,this.debounceCache={}}return t.prototype._createDebouncedFunction=function(){var t,e,n=r()(this.config.func,this.config.wait,this.config.options);return this.config.options.onlyResolvesLast&&(t=n,e=null,n=function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];e&&e();var r=t.apply(void 0,n),u=i(r),c=u.promise,a=u.cancel;return e=a,c}),{func:n}},t.prototype.getDebouncedFunction=function(t){var e,n=(e=this.config.options).key.apply(e,t);return null==n?(this.debounceSingleton||(this.debounceSingleton=this._createDebouncedFunction()),this.debounceSingleton):(this.debounceCache[n]||(this.debounceCache[n]=this._createDebouncedFunction()),this.debounceCache[n])},t}();e.a=function(t,e,n){var o=u({},c,n),r=new a({func:t,wait:e,options:o});return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=r.getDebouncedFunction(t).func;return n.apply(void 0,t)}}},550:function(t,e,n){"use strict";var o=n(549);e.a=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{onlyResolvesLast:!1};return Object(o.a)(t,e,n)}},566:function(t,e,n){"use strict";function o(t){return"function"==typeof t?t():t}function r(){var t={};return t.promise=new Promise((function(e,n){t.resolve=e,t.reject=n})),t}t.exports=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=void 0,u=void 0,c=void 0,a=[];return function(){var s=o(e),f=(new Date).getTime(),p=!i||f-i>s;i=f;for(var h=arguments.length,m=Array(h),v=0;v<h;v++)m[v]=arguments[v];if(p&&n.leading)return n.accumulate?Promise.resolve(t.call(this,[m])).then((function(t){return t[0]})):Promise.resolve(t.call.apply(t,[this].concat(m)));if(u?clearTimeout(c):u=r(),a.push(m),c=setTimeout(l.bind(this),s),n.accumulate){var b=a.length-1;return u.promise.then((function(t){return t[b]}))}return u.promise};function l(){var e=u;clearTimeout(c),Promise.resolve(n.accumulate?t.call(this,a):t.apply(this,a[a.length-1])).then(e.resolve,e.reject),a=[],u=null}}},569:function(t,e){function n(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=n=function(t){return typeof t}:t.exports=n=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(e)}t.exports=n},665:function(t,e,n){"use strict";n.r(e);var o=n(62),r=n.n(o),i=n(103),u=n.n(i),c=n(36),a=n.n(c),l=n(0),s=n.n(l),f=n(1),p=n.n(f),h=n(30),m=n(60),v=n(488),b=n(559),d=n.n(b),y=n(576),g=n(99),O=n(561),j=n(550),S=n(583),_=n(10),w=function(t){return Object(S.k)(t,{limit:100,offset:0}).then((function(t){return t.data.filter((function(t){return t.metadata.user_capabilities.update})).map((function(t){var e=t.name;return{value:t.id,label:e}}))}))},x=function(t,e,n){return{fields:[{component:"value-only",name:"portfolio_item_name",label:"Name",value:t},{component:d.a.SELECT,name:"portfolio_id",label:"Portfolio",isRequired:!0,loadOptions:Object(j.a)(w),onChange:e,isDisabled:n,isSearchable:!0}]}},C=function(t){var e=t.portfolioId,n=t.portfolioItemId,o=t.closeUrl,i=t.search,c=Object(h.useDispatch)(),f=Object(m.g)().push,p=Object(l.useState)(!1),b=a()(p,2),d=b[0],j=b[1],S=Object(l.useState)(),w=a()(S,2),C=w[0],P=w[1],D=Object(l.useState)(!1),I=a()(D,2),R=I[0],k=I[1];Object(l.useEffect)((function(){Object(g.f)().getPortfolioItemNextName(n,e).then((function(t){var e=t.next_name;return P(e)}))}),[]);var L=function(){var t=u()(r.a.mark((function t(o){var i,u;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return j(!0),t.next=3,c(Object(O.i)(o.portfolio_id));case 3:return i=t.sent,u=i.value,t.abrupt("return",c(Object(O.d)(n,o,u)).then((function(t){var e=t.id,n=t.service_offering_source_ref;return f({pathname:_.t,search:"?portfolio=".concat(o.portfolio_id,"&portfolio-item=").concat(e,"&source=").concat(n)})})).then((function(){return o.portfolio_id===e&&c(Object(O.f)(e))})).catch((function(){return j(!1)})));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return s.a.createElement(v.Modal,{isOpen:!0,title:"Copy product",onClose:function(){return f({pathname:o,search:i})},isSmall:!0},s.a.createElement(y.b,{initialValues:{portfolio_id:e,portfolio_item_name:C},schema:x(C,(function(t){return k(!0),Object(g.f)().getPortfolioItemNextName(n,t).then((function(t){var e=t.next_name;P(e)})).then((function(){return k(!1)}))}),R),onSubmit:L,onCancel:function(){return f({pathname:o,search:i})},formContainer:"modal",buttonsLabels:{submitLabel:"Save"},disableSubmit:d?["pristine","dirty"]:[]}))};C.propTypes={closeUrl:p.a.string.isRequired,portfolioId:p.a.string,portfolioItemId:p.a.string.isRequired,search:p.a.string.isRequired},e.default=C}}]);
//# sourceMappingURL=../sourcemaps/copy-portfolio-item-modal~31ecd969.js.map