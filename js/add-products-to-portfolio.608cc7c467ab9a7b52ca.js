"use strict";(self.webpackChunkcatalog=self.webpackChunkcatalog||[]).push([[7781],{55251:(e,t,r)=>{r.r(t),r.d(t,{default:()=>Y});var o=r(85061),n=r(28481),i=r(96156),a=r(22122),c=r(30624),l=r.n(c),p=r(45697),s=r.n(p),u=r(81253),d=r(48794),f=r(8755),m=r(59837),y=r(33188),h=r(97881),g=r(64466),O=r(23349),b=["platform"],P=function(e){var t=e.platform,r=(0,O.Z)();return l().createElement(y.Z,{Icon:t?d.ZP:f.ZP,title:r(t?g.Z.addProducstFilterTitle:g.Z.addProducstPlatformTitle),description:r(t?h.Z.noResultsDescription:g.Z.addProducstPlatformDescription)})};P.propTypes={platform:s().any};var v=function(e){var t=e.platform,r=(0,u.Z)(e,b);return l().createElement(m.Z,(0,a.Z)({editMode:!0},r,{renderEmptyState:function(){return l().createElement(P,{platform:t})}}))};v.propTypes={checkedItems:s().arrayOf(s().string),platform:s().any},v.defaultProps={checkedItems:[]};const Z=v;var j=r(66678),k=r(7247),E=r(44056),F=r(91703),T=r(56824),w=r(28359),R=r(18446),S=r.n(R),I=function(){return(I=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},C=function(e){var t=e.onChange,r=function(e,t){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(o=Object.getOwnPropertySymbols(e);n<o.length;n++)t.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(e,o[n])&&(r[o[n]]=e[o[n]])}return r}(e,["onChange"]),o=(0,c.useState)(void 0),n=o[0],i=o[1];return l().createElement("div",{key:"filter-select",id:"filter-select",className:"filter-select"},l().createElement(w.M,I({isDisabled:!r.options||0===r.options.length,name:"filter-select",simpleValue:!1,onChange:function(e){t&&t(e||n),i(e||n)},value:n},r)))};C.propTypes={options:s().array,onChange:s().func.isRequired};const D=(0,c.memo)(C,(function(e,t){return S()(e.options,t.options)}));var L=r(68212),V=r(77172);function A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function H(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?A(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const _=function(e){var t=e.options,r=e.isFetching,o=e.searchValue,n=e.portfolioName,i=e.itemsSelected,a=e.onOptionSelect,c=e.onFilterChange,l=e.portfolioRoute,p=e.onClickAddToPortfolio,s=e.meta,u=e.platformId,d=e.fetchPlatformItems;return{fields:[{component:F.H.TOP_TOOLBAR,key:"add-products-toolbar",fields:[{component:F.H.TOP_TOOLBAR_TITLE,title:"Add products: ".concat(n),key:"add-products-title"},{component:F.H.LEVEL,key:"add-products-actions",fields:[{component:F.H.TOOLBAR,key:"add-products-actions-toolbar",fields:[{component:F.H.TOOLBAR_GROUP,key:"products-filter-group",fields:[{component:D,key:"select-platforms",id:"products-platform-select",isMulti:!1,isSearchable:!0,placeholder:"Filter by Platform",options:t,onChange:a},{component:F.H.FILTER_TOOLBAR_ITEM,key:"filter-products-input",onFilterChange:c,searchValue:o,isDisabled:!u,placeholder:"Filter products"}]},H({groupName:"cancel-group-item"},(0,T.g)({key:"add-products-cancel-button",pathname:l,variant:"link","aria-label":"Cancel Add products to Portfolio",preserveSearch:!0,title:"Cancel"})),{component:F.H.TOOLBAR_ITEM,key:"add-group-item",fields:[{key:"portfolio-items-add-group",component:L.Z,variant:"primary","aria-label":"Add products to Portfolio",title:"Add",type:"button",onClick:p,isDisabled:!i||r,showSpinner:r,children:"Add",id:"add-products-to-portfolio"}]}]},{component:F.H.LEVEL_ITEM,key:"pagination-item",fields:s?[{component:V.Z,key:"add-products-pagination",meta:s,apiProps:u,apiRequest:d,isCompact:!0}]:[]}]}]}]}};var x=r(11608),M=r(89231),B=r(74798),q=r(45237),N=r(92183),G=r(81624);function U(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?U(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;return e.map((function(e){return l().createElement(E.Z,(0,a.Z)({key:e.id},e,{editMode:!0,onToggleItemSelect:function(){return t(e.id)},checked:r.includes(e.id)}))}))},K={filterValue:"",isFetching:!1,isFiltering:!1},Q=function(e,t){switch(t.type){case"setFetching":return z(z({},e),{},{isFetching:t.payload});case"setFilterValue":return z(z({},e),{},{filterValue:t.payload});case"setFilteringFlag":return z(z({},e),{},{isFiltering:t.payload})}return e},W=(0,G.Z)((function(e,t,r,o){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:k.he;o(!0),r((0,x.Vx)(e,t,z(z({},n),{},{filter:t}))).then((function(){return o(!1)}))}),1e3),X=function(e){var t=e.portfolioRoute,r=(0,c.useState)(void 0),i=(0,n.Z)(r,2),a=i[0],p=i[1],s=(0,c.useState)([]),u=(0,n.Z)(s,2),d=u[0],f=u[1],m=(0,c.useReducer)(Q,K),y=(0,n.Z)(m,2),h=y[0],g=h.filterValue,O=h.isFetching,b=y[1],P=(0,B.Z)().push,v=(0,q.useDispatch)(),E=(0,q.useSelector)((function(e){var t=e.portfolioReducer.selectedPortfolio,r=e.platformReducer;return{platforms:r.platforms,platformItems:r.platformItems,isLoading:r.isPlatformDataLoading,portfolio:t}})),F=E.portfolio,T=E.platforms,w=E.platformItems,R=E.isLoading;(0,c.useEffect)((function(){v((0,x.dw)())}),[]);var S=a&&w[a.id]?w[a.id].data:[],I=a&&w[a.id]&&w[a.id].meta;return l().createElement(c.Fragment,null,l().createElement(j.Z,{schema:_({options:T.map((function(e){return{value:e.id,label:e.name,id:e.id}})),isFetching:O,portfolioName:F&&F.name||"",itemsSelected:d.length>0,onOptionSelect:function(e){p(e),v((0,x.Vx)(e.id,g,k.he))},onFilterChange:function(e){return function(e){b({type:"setFilterValue",payload:e}),W(a.id,e,v,(function(e){return b({type:"setFilteringFlag",payload:e})}),z(z({},I),{},{offset:0}))}(e)},portfolioRoute:t,onClickAddToPortfolio:function(){return v({type:"setFetching",payload:!0}),v((0,M.Zm)(F.id,d)).then((function(){return v({type:"setFetching",payload:!1})})).then((function(){return P({pathname:t,search:"?portfolio=".concat(F.id)})})).then((function(){return v((0,M.cP)(F.id))})).catch((function(){return v({type:"setFetching",payload:!1})}))},meta:I,platformId:a&&a.id,searchValue:g,fetchPlatformItems:function(e,t){return v((0,x.Vx)(e,g,t))}})}),l().createElement(Z,{platform:!!a,checkedItems:d,isLoading:R,items:J(S,(function(e){return f(function(e){var t=d.indexOf(e);return t>-1?[].concat((0,o.Z)(d.slice(0,t)),(0,o.Z)(d.slice(t+1))):[].concat((0,o.Z)(d),[e])}(e))}),d)}),I&&I.count>0&&l().createElement(N.Z,null,l().createElement(V.Z,{meta:I,apiProps:a&&a.id,apiRequest:function(e,t){return(0,x.Vx)(e,g,t)},dropDirection:"up"})))};X.propTypes={portfolioRoute:s().string.isRequired};const Y=X}}]);
//# sourceMappingURL=../sourcemaps/add-products-to-portfolio.def8ceb06cf3031f3773f5a8534449b4.js.map