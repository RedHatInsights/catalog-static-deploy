"use strict";(self.webpackChunkcatalog=self.webpackChunkcatalog||[]).push([[5868],{5693:(e,n,t)=>{t.r(n),t.d(n,{default:()=>T});var o=t(30624),a=t.n(o),r=t(45237),i=t(30137),l=t(96354),u=t(35388),c=t(81624),s=t(83629),d=t(73712),f=(0,c.Z)((function(e,n){var t;(null===(t=window.catalog)||void 0===t?void 0:t.standalone)?(0,d.IE)(e).then((function(t){var o=t.results;if(!e||0===e.trim().length)throw"Required";if(o.find((function(t){return t.name===e&&t.id!==n})))throw"Name has already been taken"})):(0,s.IE)(e).then((function(t){var o=t.data;if(!e||0===e.trim().length)throw"Required";if(o.find((function(t){return t.name===e&&t.id!==n})))throw"Name has already been taken"}))})),v=t(89231),p=t(77503),h=t(47786),m=t(74798),b=t(9456),w=t(36722),y=t(72510),g=t(7579),Z=t(64466),k=t(56682),E=t(23349),S=function(){return(S=Object.assign||function(e){for(var n,t=1,o=arguments.length;t<o;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e}).apply(this,arguments)};const T=function(e){var n,t,c=e.removeQuery,T=e.closeTarget,x=e.viewState,C=(0,E.Z)(),P=(0,r.useDispatch)(),j=(0,o.useState)(!0),O=j[0],R=j[1],L=(0,o.useContext)(y.Z).openApiSchema,M=(0,h.Z)(["portfolio"])[0].portfolio,X=(0,m.Z)({removeSearch:c,keepHash:!0}).push,q=(0,r.useSelector)((function(e){var n,t=e.portfolioReducer;return(null===(n=window.catalog)||void 0===n?void 0:n.standalone)?(0,d.nX)(t,M):(0,s.nX)(t,M)}));if(M&&q&&Object.keys(q).length,!1===(null===(t=null===(n=null==q?void 0:q.metadata)||void 0===n?void 0:n.user_capabilities)||void 0===t?void 0:t.update))return a().createElement(b.M,null);var A=function(e,n){var t,o,a,r,i;return{fields:[{label:"schemas.portfolio.name",name:"name",component:l.Z.TEXT_FIELD,isRequired:!0,maxLength:(null===(i=null===(r=null===(a=null===(o=null===(t=null==e?void 0:e.components)||void 0===t?void 0:t.schemas)||void 0===o?void 0:o.Portfolio)||void 0===a?void 0:a.properties)||void 0===r?void 0:r.name)||void 0===i?void 0:i.maxLength)||u.Nb,validate:[function(e){return f(e,n)}]},{label:"schemas.portfolio.description",component:l.Z.TEXTAREA,name:"description"}]}}(L,M);return a().createElement(i.ZP,{schema:A,onSubmit:function(e){var n;return q?(R(!1),P((null===(n=window.catalog)||void 0===n?void 0:n.standalone)?(0,p.o9)(e,x):(0,v.o9)(e,x)).then((function(){return X(T)}))):function(e){return n=void 0,t=void 0,r=function(){var n,t,o;return function(e,n){var t,o,a,r,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(r){return function(l){return function(r){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,o&&(a=2&r[0]?o.return:r[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,r[1])).done)return a;switch(o=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return i.label++,{value:r[1],done:!1};case 5:i.label++,o=r[1],r=[0];continue;case 7:r=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==r[0]&&2!==r[0])){i=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){i.label=r[1];break}if(6===r[0]&&i.label<a[1]){i.label=a[1],a=r;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(r);break}a[2]&&i.ops.pop(),i.trys.pop();continue}r=n.call(e,i)}catch(e){r=[6,e],o=0}finally{t=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}}(this,(function(r){switch(r.label){case 0:return n={variant:"success",title:C(Z.Z.addSuccessTitle),description:C(Z.Z.addSuccessDescription,{name:e.name,b:function(e){return a().createElement("b",{key:"strong"},e)}})},[4,P((null===(o=window.catalog)||void 0===o?void 0:o.standalone)?(0,p.jM)(e,n):(0,v.jM)(e,n))];case 1:return[2,(t=r.sent())&&t.value&&t.value.id?X({pathname:w.hT,search:"?portfolio="+t.value.id}):X(T)]}}))},new((o=void 0)||(o=Promise))((function(e,a){function i(e){try{u(r.next(e))}catch(e){a(e)}}function l(e){try{u(r.throw(e))}catch(e){a(e)}}function u(n){var t;n.done?e(n.value):(t=n.value,t instanceof o?t:new o((function(e){e(t)}))).then(i,l)}u((r=r.apply(n,t||[])).next())}));var n,t,o,r}(e)},onCancel:function(){return X(T)},initialValues:S({},q),isModal:!0,modalProps:{title:C(M?Z.Z.modalEditTitle:Z.Z.modalCreateTitle),isOpen:O,onClose:function(){return X(T)},variant:"small"},templateProps:{submitLabel:C(M?g.Z.save:k.Z.create)}})}}}]);
//# sourceMappingURL=../sourcemaps/add-portfolio.46a4871ca2718944c08bd56dbc8bc4a6.js.map