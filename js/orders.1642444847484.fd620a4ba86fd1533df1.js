(self.webpackChunkcatalog=self.webpackChunkcatalog||[]).push([[486],{92223:(e,t,r)=>{"use strict";r.d(t,{Z:()=>f});var n=r(87462),o=r(4942),a=r(45987),l=r(30624),i=r.n(l),s=r(45697),c=r.n(s),d=r(94184),u=r.n(d),m=function(e){var t=e.centered,r=e.className,l=e.children,s=(0,a.Z)(e,["centered","className","children"]),c=u()("ins-c-table__empty",(0,o.Z)({},"is-centered",t),r);return i().createElement("div",(0,n.Z)({className:c},s)," ",l)};const f=m;m.propTypes={centered:c().bool,children:c().any,className:c().string}},97881:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=(0,r(50049).vU)({noItems:{id:"common.filtering.noItems",defaultMessage:"No items found"},filterByProduct:{id:"common.filtering.filterByProduct",defaultMessage:"Filter by product"},noResults:{id:"common.filtering.noResults",defaultMessage:"No results found"},noResultsDescription:{id:"common.filtering.noResultsDescription",defaultMessage:"No results match the filter criteria. Remove all filters or clear all filters to show results."},clearFilters:{id:"common.filtering.clear-filters",defaultMessage:"Clear all filters"},noProducts:{id:"common.filtering.no-products",defaultMessage:"No products yet"},noRecords:{id:"commonMessages.noRecords",defaultMessage:"No records"},filterByTitle:{id:"tableToolbar.filterByTitle",defaultMessage:"Filter by {title}"},noResultsFound:{id:"tableToolbar.noResultsFound",defaultMessage:"No results found"},noResult:{id:"tableToolbar.noResult",defaultMessage:"No {results}"},unknown:{id:"commonMessages.unknown",defaultMessage:"Unknown"}})},31644:(e,t,r)=>{"use strict";r.d(t,{C:()=>i,Z:()=>s});var n=r(56682),o=r(50049),a=function(){return(a=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},l=(0,o.vU)({title:{id:"common.states.title",defaultMessage:"State"},ordered:{id:"common.states.ordered",defaultMessage:"Ordered"},approvalPending:{id:"common.states.approval-pending",defaultMessage:"Approval Pending"},canceled:{id:"common.states.canceled",defaultMessage:"Canceled"},completed:{id:"common.states.completed",defaultMessage:"Completed"},failed:{id:"common.states.failed",defaultMessage:"Failed"},undecided:{id:"common.states.undecided",defaultMessage:"Undecided"},approved:{id:"common.states.approved",defaultMessage:"Approved"},denied:{id:"common.states.denied",defaultMessage:"Denied"},error:{id:"common.states.error",defaultMessage:"Error"},pending:{id:"common.states.pending",defaultMessage:"Pending"},skipped:{id:"common.states.skipped",defaultMessage:"Skipped"},started:{id:"common.states.started",defaultMessage:"Started"},notified:{id:"common.states.notified",defaultMessage:"Notified"},unknown:{id:"common.states.unknown",defaultMessage:"Unknown"}}),i=function(e){return e?e.replace(/\s/g,"").replace(/^./,(function(e){return e.toLowerCase()})):"unknown"};const s=a(a({},l),{created:n.Z.created})},32642:(e,t,r)=>{"use strict";r.d(t,{Z:()=>g});var n=r(30624),o=r.n(n),a=r(29163),l=r(14494),i=r(8666),s=r(36288),c=r(72679);const d=(0,a.ZP)(c.LazyLoadImage)(f||(u=["\n  height: ",";\n  display: ",";\n  float: ",";\n  width: ",";\n"],m=["\n  height: ",";\n  display: ",";\n  float: ",";\n  width: ",";\n"],Object.defineProperty?Object.defineProperty(u,"raw",{value:m}):u.raw=m,f=u),(function(e){var t=e.height;return e.hidden?"0px":t+"px"||0}),(function(e){return e.hidden?"none":"inherit"}),(function(e){return e.hidden?"left":"inherit"}),(function(e){return e.hidden?0:"inherit"}));var u,m,f,p=a.ZP.div(v||(v=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}(["\n  display: inline-block;\n  height: ",";\n"],["\n  display: inline-block;\n  height: ",";\n"])),(function(e){return e.height+"px"}));const g=function(e){var t=e.src,r=e.height,a=void 0===r?40:r,c=e.sourceId,u=(0,n.useState)(!1),m=u[0],f=u[1],g=(0,n.useState)(!1),v=g[0],y=g[1],h=(0,l.v9)((function(e){return e.platformReducer.platformIconMapping})),b=c?h[c]:s;return o().createElement(p,{height:a},!m&&o().createElement(i.bz,{height:a}),o().createElement(d,{threshold:2e3,delayTime:0,hidden:!m,height:m?a:0,onError:function(){return y(!0)},onLoad:function(){return f(!0)},src:!t||v?b:t}))};var v},77172:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(30624),o=r.n(n),a=r(99166),l=r(65832),i=r(7247),s=function(){return(s=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};const c=function(e){var t=e.meta,r=t.limit,n=void 0===r?50:r,c=t.count,d=void 0===c?0:c,u=t.offset,m=void 0===u?0:u,f=e.apiProps,p=e.apiRequest,g=e.className,v=void 0===g?"":g,y=e.isCompact,h=void 0!==y&&y,b=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}(e,["meta","apiProps","apiRequest","className","isCompact"]);return o().createElement("div",{className:v},o().createElement(l.Pagination,s({perPage:n||50,itemCount:d||0,onPerPageSelect:function(e,t){return p(f,{offset:m,limit:t})},page:(0,i.FZ)(n,m),onSetPage:function(e,t,r){var o={offset:(0,i.SJ)(t,n),limit:n},l=function(){return p(f,o)};return r?(0,a.Z)(l,250)():l()},dropDirection:"down",isCompact:h},b)))}},42413:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(30624),o=r.n(n),a=r(81778);const l={Completed:{icon:o().createElement(a.CheckCircleIcon,null),color:"green"},"Approval Pending":{icon:o().createElement(a.ClockIcon,null),color:"blue"},Ordered:{icon:o().createElement(a.PlusCircleIcon,null),color:"grey"},Failed:{icon:o().createElement(a.ExclamationCircleIcon,null),color:"red"},Canceled:{icon:o().createElement(a.ExclamationTriangleIcon,null),color:"orange"},Created:{icon:o().createElement(a.PlusCircleIcon,null),color:"grey"},Approved:{icon:o().createElement(a.CheckCircleIcon,null),color:"green"},Denied:{icon:o().createElement(a.ExclamationCircleIcon,null),color:"red"},Error:{icon:o().createElement(a.ExclamationCircleIcon,null),color:"red"},Undecided:{icon:o().createElement(a.ClockIcon,null),color:"blue"},Unknown:{icon:o().createElement(a.ExclamationTriangleIcon,null),color:"grey"}}},53170:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>$});var n=r(30624),o=r.n(n),a=r(65832),l=r(66678),i=r(91703);var s=r(14494),c=r(54213),d=r(66031),u=r(92223),m=r(87462),f=r(4942),p=r(45987),g=r(84812),v=r(62472),y=r(94184),h=r.n(y),b=r(45697),E=r.n(b),_=function(e){var t=e.isFooter,r=e.results,a=e.className,l=e.selected,i=e.children,s=e.ouiaId,c=e.ouiaSafe,d=void 0===c||c,u=(0,p.Z)(e,["isFooter","results","className","selected","children","ouiaId","ouiaSafe"]),y=h()("ins-c-table__toolbar",(0,f.Z)({},"ins-m-footer",t),a),b="RHI/TableToolbar",E=(0,v.Z1)(b,s,d);return o().createElement(n.Fragment,null,o().createElement(g.o,(0,m.Z)({className:y,"data-ouia-component-type":b,"data-ouia-component-id":E,"data-ouia-safe":d},u),i),(r>=0||l>=0)&&o().createElement("div",{className:"ins-c-table__toolbar-results"},r>=0&&o().createElement("span",{className:"ins-c-table__toolbar-results-count"}," ",function(e){return"".concat(e,e>1||e<1?" Results":" Result")}(r)," "),l>=0&&o().createElement("span",{className:"ins-c-table__toolbar-results-selected"}," ",l," Selected ")))};const I=_;_.propTypes={isFooter:E().bool,results:E().number,children:E().any,className:E().string,selected:E().number,ouiaId:E().string,ouiaSafe:E().bool},_.defaultProps={isFooter:!1};var Z=r(81778),F=r(41436),x=r(2482),O=r(85132),P=r(11608),C=r(49827),S=r(8666),w=r(62410),T=r(32642),N=r(35388),M=function(e){var t,r,n,o;if(localStorage.getItem("catalog_standalone")){var a=(null===(t=null==e?void 0:e.extra_data)||void 0===t?void 0:t.order_items)&&(null===(r=null==e?void 0:e.extra_data)||void 0===r?void 0:r.order_items[0]);return null===(o=null===(n=null==a?void 0:a.extra_data)||void 0===n?void 0:n.portfolio_item)||void 0===o?void 0:o.icon_url}var l=e.orderItems;return l&&l[0]&&N.Vs+"/portfolio_items/"+l[0].portfolio_item_id+"/icon"},k=r(20697),B=r(36722),D=r(31644),R=r(42413),j=function(){return(j=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};var A=r(77172),U=r(81624),L=r(7247),V=r(44058),q=r(97881),H=r(40229),z=r(56682),G=r(23349),J=function(){return(J=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},W=(0,U.Z)((function(e,t,r,n){void 0===t&&(t=L.he),n(!0),r(localStorage.getItem("catalog_standalone")?(0,O.AU)(e,t):(0,x.AU)(e,t)).then((function(){return n(!1)}))}),1e3),K={isOpen:!1,isFetching:!0,isFiltering:!1,filterType:"state",filters:{state:[],owner:""},sortBy:{index:0,direction:F.SortByDirection.desc}},Q=function(e,t){switch(t.type){case"setFetching":return J(J({},e),{isFetching:t.payload});case"setFilterValue":return J(J({},e),{filters:(r=t.payload,n=e.filterType,o=e.filters,J(J({},o),((a={})[n]=r,a)))});case"replaceFilterChip":return J(J({},e),{filters:t.payload});case"setFilteringFlag":return J(J({},e),{isFiltering:t.payload});case"setFilterType":return J(J({},e),{filterType:t.payload});case"setSortBy":return J(J({},e),{sortBy:t.payload,isFetching:!0})}var r,n,o,a;return e},X={0:"id",3:"owner",4:"created_at",6:"state"};const Y=function(){var e,t,r,l=(0,G.Z)(),i=(0,s.I0)(),m=(0,V.Z)(),f=(0,n.useReducer)(Q,J(J({},K),{filters:(null===(e=null==m?void 0:m.orders)||void 0===e?void 0:e.filters)||{state:[],owner:""},sortBy:{direction:(null===(t=null==m?void 0:m.orders)||void 0===t?void 0:t.sortDirection)||F.SortByDirection.desc,index:(null===(r=null==m?void 0:m.orders)||void 0===r?void 0:r.sortIndex)||0}})),p=f[0],g=p.isFetching,v=p.isFiltering,y=p.filterType,h=p.filters,b=p.sortBy,E=f[1],_=(0,s.v9)((function(e){return e.orderReducer.orders})),N=localStorage.getItem("catalog_standalone")?_.results:_.data,U=localStorage.getItem("catalog_standalone")?{count:_.count,noData:!1}:_.meta,L=[{title:l(H.Z.orderID)},l(z.Z.product),"",{title:l(H.Z.orderedByLabel)},{title:l(H.Z.orderDate)},l(z.Z.updated),{title:l(z.Z.status)}].map((function(e){return"object"!=typeof e||g||v||0===N.length?e:J(J({},e),{transforms:[F.sortable]})})),Y=(0,s.v9)((function(e){return e.portfolioReducer.portfolioItems})),$=localStorage.getItem("catalog_standalone")?Y.results:Y.data,ee=N.map((function(e){var t=function(e,t){return localStorage.getItem("catalog_standalone")?function(e){var t,r=null===(t=null==e?void 0:e.extra_data)||void 0===t?void 0:t.order_items[0],n=null==r?void 0:r.extra_data.portfolio_item;return n?{orderPlatform:n.service_offering_source_ref,orderPortfolio:n.portfolio_id}:{}}(e):function(e,t){var r=e.orderItems,n=r[0]&&t.find((function(e){var t=e.id;return r[0].portfolio_item_id===t}));return n?{orderPlatform:n.service_offering_source_ref,orderPortfolio:n.portfolio_id}:{}}(e,t)}(e,$),r=t.orderPlatform,i=t.orderPortfolio,s=function(e,t){return localStorage.getItem("catalog_standalone")?function(e){var t,r=null===(t=null==e?void 0:e.extra_data)||void 0===t?void 0:t.order_items[0],n=null==r?void 0:r.extra_data.portfolio_item;return n?n.name:"Order "+e.id}(e):function(e,t){var r=e.orderItems,n=e.id,o=r[0]&&t.find((function(e){var t=e.id;return r[0].portfolio_item_id===t}));return o?o.name:"Order "+n}(e,t)}(e,$);return function(e,t,r,l){var i,s,c,d=(i=e,localStorage.getItem("catalog_standalone")?(null===(s=null==i?void 0:i.extra_data)||void 0===s?void 0:s.order_items)&&(null===(c=null==i?void 0:i.extra_data)||void 0===c?void 0:c.order_items[0])||{}:(null==i?void 0:i.orderItems)&&i.orderItems[0]||{}),u=j(j(j(j({order:e.id},d.id?{"order-item":d.id}:{}),d.portfolio_item?{"portfolio-item":d.portfolio_item}:{}),t?{platform:t}:{}),r?{portfolio:r}:{}),m=(0,D.C)(e.state);return[{title:o().createElement(F.TableText,null,o().createElement(k.Z,{pathname:B.A5,searchParams:u},e.id))},{title:o().createElement(n.Fragment,null,o().createElement(T.Z,{height:60,src:M(e),sourceId:t}))},e.orderName,e.owner,{title:o().createElement(a.Text,{className:"pf-u-mb-0",component:a.TextVariants.small},o().createElement(w.Z,{date:e.created_at,variant:"relative"}))},{title:o().createElement(a.Text,{className:"pf-u-mb-0",component:a.TextVariants.small},o().createElement(w.Z,{date:(null==e?void 0:e.orderItems)&&e.orderItems[0]&&e.orderItems[0].updated_at,variant:"relative"}))},{title:o().createElement(F.TableText,null,o().createElement(a.Label,j({},R.Z[e.state],{variant:"outline"}),l(D.Z[m])))}]}(J(J({},e),{orderName:s}),r,i,l)}));(0,n.useEffect)((function(){E({type:"setFetching",payload:!0}),Promise.all([i(localStorage.getItem("catalog_standalone")?(0,O.AU)(h,null==m?void 0:m.orders):(0,x.AU)(h,null==m?void 0:m.orders)),i(localStorage.getItem("catalog_standalone")?(0,C.dw)():(0,P.dw)())]).then((function(){return E({type:"setFetching",payload:!1})}))}),[]);var te=function(e,t){return E({type:"setFetching",payload:!0}),i(localStorage.getItem("catalog_standalone")?(0,O.AU)(h,J(J({},t),{sortBy:X[b.index],sortDirection:b.direction,sortIndex:b.index})):(0,x.AU)(h,J(J({},t),{sortBy:X[b.index],sortDirection:b.direction,sortIndex:b.index}))).then((function(){return E({type:"setFetching",payload:!1})})).catch((function(){return E({type:"setFetching",payload:!1})}))},re=function(e){var t;void 0===e&&(e=""),E({type:"setFilterValue",payload:e}),W(J(J({},h),((t={})[y]=e,t)),J(J({},U),{sortBy:X[b.index],sortDirection:b.direction,sortIndex:b.index,offset:0}),i,(function(e){return E({type:"setFilteringFlag",payload:e})}))},ne=function(){return E({type:"replaceFilterChip",payload:K.filters}),W(K.filters,J(J({},U),{sortBy:X[b.index],sortDirection:b.direction,sortIndex:b.index}),i,(function(e){return E({type:"setFilteringFlag",payload:e})}))};return o().createElement(a.Grid,{hasGutter:!0},o().createElement(a.GridItem,null,o().createElement(c.Z,{type:"content"},!U.noData&&o().createElement(d.Z,{activeFiltersConfig:{filters:Object.entries(h).filter((function(e){var t=e[1];return t&&t.length>0})).map((function(e){var t=e[0],r=e[1];return{category:t,type:t,chips:Array.isArray(r)?r.map((function(e){return{name:e}})):[{name:r}]}})),onDelete:function(e,t,r){var n=t[0];if(r)return ne();var o=J({},h);"state"===n.type?o[n.type]=o[n.type].filter((function(e){var t;return e!==(null===(t=null==n?void 0:n.chips)||void 0===t?void 0:t[0].name)})):o[n.type]="",E({type:"replaceFilterChip",payload:o}),W(o,U,i,(function(e){return E({type:"setFilteringFlag",payload:e})}))}},filterConfig:{onChange:function(e,t){return E({type:"setFilterType",payload:t})},value:y,items:[{filterValues:{items:[{value:"Approval Pending",label:l(D.Z.approvalPending)},{value:"Canceled",label:l(D.Z.canceled)},{value:"Completed",label:l(D.Z.completed)},{value:"Created",label:l(z.Z.created)},{value:"Failed",label:l(D.Z.failed)},{value:"Ordered",label:l(D.Z.ordered)}],value:h.state,onChange:function(e,t){return re(t)}},label:"State",value:"state",type:"checkbox"},{filterValues:{value:h.owner,onChange:function(e,t){return re(t)}},label:"Owner",value:"owner"}]},pagination:o().createElement(A.Z,{isDisabled:g||v,apiRequest:te,meta:U,isCompact:!0})}),o().createElement(F.Table,J({"aria-label":"orders"},g||v||0!==N.length?{sortBy:b,onSort:function(e,t,r){return E({type:"setSortBy",payload:{index:t,direction:r}}),i(localStorage.getItem("catalog_standalone")?(0,O.AU)(h,J(J({},U),{sortBy:X[t],sortDirection:r,sortIndex:t})):(0,x.AU)(h,J(J({},U),{sortBy:X[t],sortDirection:r,sortIndex:t}))).then((function(){return E({type:"setFetching",payload:!1})}))}}:{},{cells:L,rows:g||v?[]:ee,className:"orders-table"}),o().createElement(F.TableHeader,null),o().createElement(F.TableBody,null)),!(g||v)&&0===N.length&&o().createElement(u.Z,null,o().createElement(a.Bullseye,null,o().createElement(a.EmptyState,null,o().createElement(a.Bullseye,null,o().createElement(a.EmptyStateIcon,{icon:Z.SearchIcon})),o().createElement(a.Title,{headingLevel:"h1",size:"lg"},U.noData?l(H.Z.noOrdersTitle):l(q.Z.noResults)),o().createElement(a.EmptyStateBody,null,U.noData?l(H.Z.noOrdersDescription):l(q.Z.noResultsDescription)),!U.noData&&o().createElement(a.EmptyStateSecondaryActions,null,o().createElement(a.Button,{ouiaId:"clear-filter",variant:"link",onClick:ne},l(q.Z.clearFilters)))))),(g||v)&&o().createElement(S.Wi,null),o().createElement(I,{className:"pf-u-mr-0"},o().createElement("div",{className:"bottom-pagination-container"},o().createElement(a.Flex,{justifyContent:{default:"justifyContentFlexEnd"}},U&&U.count>0&&o().createElement(A.Z,{className:"pf-u-mt-0",isDisabled:g||v,apiRequest:te,meta:U})))))))},$=function(){return o().createElement(a.Stack,null,o().createElement(l.Z,{schema:{fields:[{component:i.H.TOP_TOOLBAR,className:"orders pf-u-p-lg",key:"orders-toolbar",fields:[{component:i.H.TOP_TOOLBAR_TITLE,key:"orders-toolbar-title",title:"Orders",className:""}]}]}}),o().createElement(Y,null))}},36288:(e,t,r)=>{"use strict";e.exports=r.p+"fonts/card-icon-default.svg"},11452:()=>{},93818:()=>{},94498:()=>{},28992:()=>{},8572:()=>{},98379:()=>{},36974:()=>{},97236:()=>{},38024:()=>{},16166:()=>{}}]);
//# sourceMappingURL=../sourcemaps/orders.346d8ff24509e005c4df8a88efffa704.js.map